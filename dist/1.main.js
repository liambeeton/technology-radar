(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{45:function(e,t,o){"use strict";o.r(t);var r=o(29),a=o(0);var n=function(e){let t,o,r,n,i=e.getFromEnv("dataSource").dataset,l=t=e.getChildren().canvas[0].getChildren("vCanvas")[0],s=e.config.defaultDatasetType||"";return i?((r=e.getDSGroupdef())&&(Object(a.K)(t,r,"datasetGroup_"+s,1,[i]),n=t.getChildren("datasetGroup_"+s)),n&&(l=n[0]),o=e.getDSdef(),void Object(a.O)(l,o,"dataset",i.length,i)):void e.setChartMessage()},i=o(1),l=o(3),s=o(4);let c=a.zb.POINTER,d="none",g="M",h="L",b=(e,t,o,r,a)=>{var n,i,l,s,c,d,b,p,u,m,f,v=[g];return"column"===a||"dragColumn"===a||"column3D"===a||"realtimeColumn"===a||"errorBar2D"===a?(i=.5*(n=.25*o),l=.7*r,s=.4*r,v=v.concat([e,t+r,"l",0,-l,n,0,0,l,"z","m",n+i,0,"l",0,-r,n,0,0,r,"z","m",n+i,0,"l",0,-s,n,0,0,s,"z"])):"bar2D"===a||"bar3D"===a?(n=.3*o,i=.6*o,s=(l=r/4)/2,v=v.concat([e,t,h,e+i,t,e+i,t+l,e,t+l,"Z",g,e,t+l+s,h,e+o,t+l+s,e+o,t+l+s+l,e,t+2*l+s,"Z",g,e,t+2*(l+s),h,e+n,t+2*(l+s),e+n,t+r,e,t+r,"Z"])):"area"===a||"area3d"===a||"areaspline"===a||"dragArea"===a||"realTimeArea"===a||"splinearea"===a?(n=.3*o,i=.6*o,l=.6*r,s=.2*r,c=.8*r,v=v.concat([e,t+c,h,e,t+l,e+n,t+s,e+i,t+l,e+o,t+s,e+o,t+c,"Z"])):"pie2D"===a||"pie3d"===a||"doughnut2D"===a||"doughnut3D"===a?(i=.9*(n=.5*o),d=e+n+(m=1),p=t+n-m,b=e+n-(f=1),u=t+n+f,v=v.concat([d,p,h,d,p-i+m,"A",i-m,i-m,0,0,1,d+i-m,p,"Z",g,b,u,h,b,u-i,"A",i,i,0,1,0,b+i,u,"Z"])):v=v.concat([e,t,h,e+o,t,e+o,t+r,e,t+r,"Z"]),{path:v}},p=function(e,t){let o=e.config,r=e.getLinkedParent().config,n=r.symbolWidth,l=Object(a.xb)(r.padding,4),s=.5*n,d=(r.initialItemX||0)+o._legendX+l,g=(r.initialItemY||0)+o._legendY-l,h=d+r.symbolPadding+s,b=g+(o._markerYGutter||0)+r.symbolPadding+s,p=Object(i.k)(o.anchorSide),u=o.symbol=p&&p.split("_")||[],m="spoke"===u[0]?1:0;return("line"===o.type||o.drawLine)&&(s*=.6),{path:Object(a.yb)([u[1]||2,h,b,s,o.startAngle,o.spoke||m]),cursor:t.cursor||c,stroke:t.stroke,fill:t.fill,"stroke-width":t["stroke-width"]||.5}};Object(s.a)({name:"legendItemAnimation",type:"animationRule",extension:{"*.legendItem.legendItem":()=>({"icon.appearing":()=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:1}}],"background.appearing":e=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:e.attr.opacity}}],"icon.disappearing":()=>[{finalAttr:{opacity:0},slot:"initial"}]})}});var u=class extends l.a{constructor(){super(),this._stateCosmetics={},this._legendState=[]}getName(){return"legendItem"}parseLegendCosmetics(){let e,t,o,r=this,n=this.getLinkedParent(),i=n.getLegendState(),l=r.getLegendState(),s=["default"],c={};for(s=s.concat(i,l),o=0;o<s.length;o++)e=n.getStateCosmetics(s[o]),t=r.getStateCosmetics(s[o]),e&&("function"==typeof e?c=e(c,r):Object(a.R)(c,e)),t&&("function"==typeof t?c=t(c,r):Object(a.R)(c,t));return c}getType(){return"legendItem"}configure(e){var t,o,r=this.config;for(t in e)if(e.hasOwnProperty(t))if("object"!=typeof e[t])r[t]=e[t];else{let a=r[t]?r[t]:{};for(o in e[t])a[o]=e[t][o];r[t]=a}}itemClickFn(){let e=this,t=e.getFromEnv("chart-attrib"),o=Object(a.xb)(t.interactivelegend,1),r=e.getLinkedItem("owner");o&&r.legendInteractivity(e)}dispose(){this.removeEventListener("click",this.click),this.removeEventListener("mouseover",this.mouseover),this._dispose()}getLegendState(){return this._legendState}hasState(e){var t,o,r=this.getLegendState();for(t=0,o=r.length;t<o;t++)if(r[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,o,r=1;if(e)for(t=0,o=this._legendState.length;t<o&&r;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),r=0);else this._legendState.length=0;this.asyncDraw()}removeStateCosmetics(e){delete this._stateCosmetics[e]}setStateCosmetics(e,t){this._stateCosmetics[e]=t}getStateCosmetics(e){return this._stateCosmetics[e]}draw(){var e,t,o,r,n,l,s,u,m,f,v,x,y,C,O,k,w,j,L,F,S,A,E,I,_,P,T,R,B,M,D,G,V,N,W,H,z,Y,X=this.getLinkedParent(),K=X.getFromEnv("chart").config,J=this,U=J.getFromEnv("animationManager"),Z=J.config,$=X.config,q=$.legendHeight,Q=$.symbolPadding,ee=$.symbolWidth,te=$.interactiveLegend,oe=$.textPadding||2,re=Object(a.xb)($.padding,4),ae=$.itemHoverStyle,ne=X.getChildContainer("itemGroup"),ie=$.drawCustomLegendIcon,le=J.hasState("hidden"),se={};o=(e=J.parseLegendCosmetics()).symbol,r=$.initialItemX||0,n=$.initialItemY||0,m=Z.type,L=e.symbol.stroke||"000000",F=e.symbol.fill,t=e.symbol.lineWidth||$.lineWidth,A=Z.anchorSide,E=Z.drawLine,f=r+Z._legendX+re,v=n+Z._legendY-re,D=J.getGraphicalElement("legendItemBackground"),u=J.getGraphicalElement("legendItemText"),x=J.getGraphicalElement("legendItemLine"),C=J.getGraphicalElement("legendItemSymbol"),(te=Object(a.vb)(Z.interactiveLegend,te))||(e.cursor="default"),G=e.text,z=f+q+oe-2,Y=v+(Z._legendTestY||0),G.text=Z.name,G.x=z,G.y=Y,s=U.setAnimation({el:u||"text",attr:G,component:J,container:ne,label:"icon"}),u||(s=J.addGraphicalElement("legendItemText",s)),s.data("legendItem",Z),V=!1,ie&&!1!==Z.customLegendIcon?(P=!le&&o.borderColor,T=Object(a.vb)(o.borderAlpha),I=!le&&o.bgColor,_=Object(a.vb)(o.bgAlpha,"100"),R=e.symbol.rawFillColor,F=le?e.symbol.fill:I||R,F=Object(i.c)(F,_),B=e.symbol.rawStrokeColor,L=le?e.symbol.stroke:P||B||R,L=Object(i.c)(L,T),O=f+Q+(k=.5*ee),l=v+(Z._markerYGutter||0)+Q+k,w="spoke"===(j=Object(i.k)(o.sides)&&Object(i.k)(o.sides).split("_")||[])[0]?1:0,N={path:Object(a.yb)([j[1]||2,O,l,k,o.startAngle||0,w]),cursor:e.symbol.cursor||c,stroke:L,fill:F,"stroke-width":Object(a.xb)(o.borderThickness,1)}):"line"===m||E?(l=v+(Z._markerYGutter||0)+Q+.5*ee,H={path:[g,f+Q,l,h,f+Q+ee,l]},V=!0,se={opacity:K.legendiconalpha||1,"stroke-width":t,stroke:L,cursor:e.cursor||c},A&&(N=p(J,e.symbol))):A?N=p(J,e.symbol):"line"!==m&&(L=Z.symbolStroke||L,N={path:b(f+Q,v+(Z._markerYGutter||0)+Q,ee,ee,m).path,"stroke-width":.5,stroke:L,fill:F,cursor:e.cursor||c}),H&&V?(Object.assign(H,se),x=U.setAnimation({el:x||"path",attr:H,component:J,callback:function(){this.show()},container:ne}),!J.getGraphicalElement("legendItemLine")&&(x=J.addGraphicalElement("legendItemLine",x))):x&&x.hide(),N?(N.opacity=Object(a.xb)(e.symbol.opacity,1),y=U.setAnimation({el:C||"path",attr:N,component:J,callback:function(){this.show()},container:ne,label:"icon"}),(!C||!C.node)&&(y=J.addGraphicalElement("legendItemSymbol",y)),y.data("legendItem",Z)):C&&C.hide(),S=e.background&&e.background.legendBackgroundColor?Object(i.c)(e.background.legendBackgroundColor,e.background.alpha):a.B,W={x:f,y:v,width:Z._totalWidth,height:Z._legendH,r:0,fill:S,opacity:1,"stroke-width":1,stroke:d,cursor:e.symbol.cursor||c},M=U.setAnimation({el:D||"rect",attr:W,css:void 0,component:J,label:"background",container:ne}),D||J.addGraphicalElement("legendItemBackground",M),M.data("legendItem",J).data("interactive",te).data("itemHoverStyle",ae).data("itemStyle",e)}};let m=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"plot"}],f=[{slot:"plot",startEnd:{start:0,end:.5}}],v=[{slot:"intial"}];var x={"*.legend.legend":()=>({"legendGroup.appearing":m,"legendGroup.updating":f,"legendGroup.disappearing":v,"scroller.appearing":m,"scroller.updating":f,"scroller.disappearing":v})},y=o(6);let C,O={left:a.u,right:a.q,center:a.s},k=Math,w=k.min,j=k.max,L=k.floor,F=k.ceil,S=",",A="none",E=a.zb.NORMAL,I={fontWeight:{1:a.zb.BOLD,0:E},fontStyle:{1:"italic",0:E},textDecoration:{1:"underline",0:a.zb.noneStr}},_=function(e){let t,o;return{dragstart:()=>{t=e.config.xL||e.config.xPos,o=e.config.yL||e.config.yPos},dragmove:r=>{let a,n,i=r.originalEvent.data[0],l=r.originalEvent.data[1],s=e.config,c=e.getFromEnv("chartConfig"),d=(s.borderWidth||0)+2;a=w(j(t+i,d),c.width-s.width-d),n=w(j(o+l,d),c.height-s.height-d),s.xPos=s.xL=a,s.yPos=s.yL=n,e.addJob("draw",e.dragDraw,y.b&&y.b.draw)}}};Object(s.a)({name:"legendAnimation",type:"animationRule",extension:x});var P=class extends l.a{constructor(){super();let e=this;e._stateCosmetics={},e._legendState=[],e.dragDraw=function(){e.draw()},e.drawScroll=function(){e.createItemGroup()},e.config.handlers=_(e)}createItem(e){var t;return t=new u,this.attachChild(t,"legendItem"),t.setLinkedItem("owner",e),t.addEventListener("mouseover",function(){t.setLegendState("hover",!0)}),t.addEventListener("mouseout",function(){t.removeLegendState("hover")}),t.getId()}getItem(e){var t=this.getChildren().legendItem;if(e===C)return!1;if(t)for(let o=0;o<t.length;o++)if(t[o].getId()===e)return t[o]}getSortedLegendItems(){let e,t,o=this.getChildren("legendItem")||[],r=this.config.reverselegend,a={},n=[];for(e=0,t=o.length;e<t;e++)o[e].config.index===C?a[t+e]=o[e]:a[o[e].config.index]=o[e];return Object.keys(a).sort(function(e,t){return r?t-e:e-t}).forEach(e=>{n.push(a[e])}),n}disposeItem(e){var t=this.getItem(e);t&&t.remove()}getName(){return"legend"}getType(){return"legend"}__setDefaultConfig(){super.__setDefaultConfig();let e=this.config;e.enabled=!0,e.symbolWidth=12,e.borderRadius=1,e.lastScrollPos=0,e.oriSymbolPadding=3,e.textPadding=4,e.scrollY=0,e.backgroundColor="#FFFFFF",e.initialItemX=0,e.title={text:a.b,x:0,y:0,padding:2},e.scroll={},e.itemStyle={}}createLegendGroup(){let e,t=this,o=t.config,r=t.getFromEnv("chart"),a=r.config,n=t.getFromEnv("animationManager"),i=.5*(o.borderWidth||0)+2,l=t.getContainer("legendGroup");o.xL&&(o.xL=w(j(o.xL,i),a.width-o.width-i)),o.yL&&(o.yL=w(j(o.yL,i),a.height-o.height-i)),e=n.setAnimation({el:l||"group",attr:{name:"legendGroup",transform:["T",o.xL||o.xPos,o.yL||o.yPos]},container:r.getChildContainer("legendGroup"),component:t}),l||t.addContainer("legendGroup",e)}draw(){this.createLegendGroup(),this.drawLegendBox(),this.createItemGroup(),this.drawCaption(),this.decideScroll()}decideScroll(){let e=this,t=e.getFromEnv("animationManager"),o=e.config,r=e.getLinkedItem("legendScrollBar");o.scroll.enabled?(this.createScrollGroup(),this.createScrollBar()):o.hasScroll&&(e.removeLinkedItem("legendScrollBar"),t.setAnimation({el:e.getChildContainer("itemGroup"),attr:{"clip-rect":null,transform:"none"},component:e}),r.config.node.hide(),o.scrollY=0,o.hasScroll=!1)}createItemGroup(){var e,t=this,o=t.getFromEnv("animationManager"),r=t.getContainer("legendGroup"),a=t.getChildContainer("itemGroup");return e=o.setAnimation({el:a||"group",attr:{name:"item",transform:["T",0,t.config.scrollY||0]},container:r,component:t}),a||t.addChildContainer("itemGroup",e),e}createScrollGroup(){let e,t=this,o=t.getFromEnv("animationManager"),r=t.getChildContainer("scrollGroup"),a=t.getContainer("legendGroup");e=o.setAnimation({el:r||"group",attr:{name:"scrollGroup"},container:a,component:t,label:"scroller"}),r||t.addChildContainer("scrollGroup",e)}createScrollBar(){var e,t,o,r,n,l,s,c=this,d=c.config,g=c.getLinkedItem("legendScrollBar"),h=c.getChildContainer("itemGroup"),b=c.getFromEnv("toolbox"),p=c.getFromEnv("toolBoxAPI"),u=p&&p.Scroller,m=d.borderWidth||0,f=Object(a.xb)(d.padding,4),v=.5*f,x=d.scroll,C=d.width,O=d.height;e={conf:{isHorizontal:!1,color:Object(i.c)(c.getFromEnv("chart-attrib").legendscrollbgcolor)},handler:{scroll:function(e){d.lastScrollPos=e,d.scrollY=(o-d.totalHeight)*e,c.addJob("scrollDraw",c.drawScroll,y.b&&y.b.draw)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},g||((g=new u).configure(e.conf,(b.idCount||0)+1,b.pId,c.getFromEnv("chartInstance").id),g.attachEventHandlers(e.handler),this.setLinkedItem("legendScrollBar",g),this.config.hasScroll=!0),t=S+C+S+(o=O-f),h.attr({"clip-rect":"0,"+v+t}),n=C-10+v-m,l=.5*m,s=O-m,r={scrollPosition:x.scrollPosition||0,scrollRatio:(o+f)/d.totalHeight,showButtons:!1,displayStyleFlat:x.flatScrollBars},g.draw(n,l,{height:s,scrollRatio:r.scrollRatio,startPercent:0,scrollPosition:d.lastScrollPos||0,color:d.legendScrollBgColor,parentLayer:c.getChildContainer("scrollGroup")})}drawCaption(){var e,t,o,r,n=this,i=n.getChildContainer("itemGroup"),l=n.getGraphicalElement("caption"),s=this.getFromEnv("animationManager"),c=this.config,d=Object(a.xb)(c.padding,4),g=c.scroll.enabled,h=c.width;if(c.title&&c.title.text!==a.b&&c.validLegendItem){switch(c.title.align){case a.u:o=d;break;case a.q:o=h-d-(g?10:0);break;default:o=.5*h}t=c.title.style,e={text:c.title.text,title:c.title.originalText||a.b,x:o,y:d,fill:c.title.style.color,direction:c.textDirection,"line-height":t.lineHeight,"vertical-align":a.v,"text-anchor":c.title.align,opacity:1},r={"font-weight":t.fontWeight,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-size":t.fontSize},l&&l.show(),l?s.setAnimation({el:l,attr:e,component:n}):(l=s.setAnimation({el:"text",attr:e,component:n,container:i}),(l=this.addGraphicalElement("caption",l)).css(r)),n.getFromEnv("toolTipController").enableToolTip(l,c.title.originalText)}else l&&s.setAnimation({el:l,component:n,doNotRemove:!0,callback:function(){l.hide()}})}drawLegendBox(){var e,t=this,o=this.getFromEnv("animationManager"),r=t.config,a=t.getContainer("legendGroup"),n=r.width,i=t.getGraphicalElement("box"),l=r.height,s=r.borderRadius,c=r.backgroundColor,d=r.borderColor,g=r.borderAlpha,h=r.backgroundAlpha,b=r.borderWidth||0;return e=o.setAnimation({el:i||"rect",attr:{x:0,y:0,width:n,height:l,r:s,stroke:d,"stroke-width":b,fill:c||A,"stroke-opacity":g/100,"fill-opacity":h/100,cursor:r.legendAllowDrag?"move":"default"},container:a,component:t,label:"legendGroup"}),i||(t.addGraphicalElement("box",e),e.shadow(r.shadow)),e}getPosition(){var e,t,o,r,n,i=this.getFromEnv("chart").config,l=this.config,s=i.height-i.canvasBottom,c=i.canvasLeft,d=i.canvasWidth,g=l.chartMarginLeft||0,h=l.chartMarginRight||0,b=l.chartMarginBottom||0,p=i.actionBarHeight||0,u=l.actualCanvasMarginLeft||0,m=i.actualCanvasMarginBottom||0,f=i.actualCanvasMarginRight||0,v=l.alignLegendWithCanvas,x=i.height,y=i.canvasTop,C=l.width||0,O=l.height||0,k=i.borderWidth,w=i.oriCanvasLeft,j=i.oriTopSpace,L=i.oriBottomSpace,F=0,S=l.borderWidth||0;return l.legendPos===a.t&&(l.align=a.t,l.verticalAlign=a.s,n=l.layout="vertical"),n?(e=i.width-h-f-C-k,t=(F=Object(a.xb)(j,y))+.5*(x-Object(a.xb)(L,s)-F-O)+(l.y||0)):(o=i.width-(g+u+(h+f)),r=v?d-C:o-C,e=(v?Object(a.xb)(w,c):g+u)+r/2,t=x-O-m-b-p),Object(a.N)(e,t,C,O,S)}reverseLegendFn(){var e,t,o=this,r=o.config.items||[],a=[],n=r.length,i=0,l=o.config;for(e=n-1;0<=e;e--)r[e].configuration.mainDS?(t=e,a=a.concat(r.splice(t,i+1)),i=0):i++;a.length&&(l.orderReversed=!0,o.config.items=a.slice(0))}allocatePosition(){var e=this.config,t=this.getPosition();e.xPos=t.x,e.yPos=t.y,e.width=t.width,e.height=t.height}_manageLegendPosition(e){var t=this,o=t.config,r=t.getFromEnv("chart").hasSubDataset,n=o.legendPos,i=t.getChildren().legendItem;return o.reversed===o.prevReversed?r&&o.orderReversed&&t.reverseLegendFn():r?!o.orderReversed&&t.reverseLegendFn():i&&i.reverse(),o.prevReversed=o.reversed,n===a.t?t._placeLegendBlockRight(e):t._placeLegendBlockBottom(e)}_placeLegendBlockBottom(e){var t,o,r,n,i,l,s,c,d,g,h,b,p,u,m,f,v,x,y,C,O,k,S,A,E,I,_,P=this,T=P.getFromEnv("chart"),R=T.config,B=R.width,M=R.height,D=R.canvasLeft,G=R.width-(R.canvasRight||0),V=T.getFromEnv("smartLabel"),N=P.config,W=N.chartMarginLeft,H=N.chartMarginRight,z=N.chartMarginTop,Y=N.alignLegendWithCanvas,X=N.minimiseWrappingInLegend,K=N.legendScale,J=N.numColumns,U=N.padding,Z=2*e,$=2*U,q={width:$,height:$},Q=N.title,ee=Q.padding,te=P.getStateCosmetics("default"),oe=parseInt(te.text["font-size"],10)||10,re=P.getSortedLegendItems(),ae=re.length,ne=N.oriSymbolPadding,ie=N.textPadding,le=N.legendPadding,se=R.canvasMarginRight,ce=R.canvasMarginLeft,de=T.getChildren("yAxis"),ge=de&&de[0].config.isVertical?de:T.getChildren("xAxis"),he=ge&&ge[0],be=ge&&ge[1],pe=he&&he.config||{},ue=be&&be.config||{},me=pe.nameMaxW,fe=ue.nameMaxW,ve=pe.name&&pe.name.style||{},xe=ue.name&&ue.name.style||{},ye=pe.axisName||a.b,Ce=ue.axisName||a.b,Oe=0,ke=0,we=0,je=0,Le=0,Fe=0,Se=0,Ae=0,Ee=[],Ie=!1,_e=0,Pe=0,Te=R.canvasWidth-R.canvasMarginLeft-R.canvasMarginRight,Re=Te;if(N.paddingBottom=R.height-R.canvasBottom,V.useEllipsesOnOverflow(R.useEllipsesWhenOverflow),V.setStyle(ve),v=V.getOriSize(ye),V.setStyle(xe),x=V.getOriSize(Ce),0>=(y=oe+1)&&(y=1),ne*=K,0>=(y=w(y*=K,Te-=$))&&(ne=y=0),N.symbolWidth=y,N.textPadding=4,N.legendHeight=g=y+2*ne,N.rowHeight=r=j(parseInt(te.text["line-height"],10)||12,g),o=ie+ne+U,V.setStyle(Object(a.R)({},te.text)),i=V.getOriSize(a.z).height,n=le+N.borderWidth/2+1,n=w(n,e-i-8),le=.05*r,(v||x)&&(m=Object(a.xb)(v.height,0)>Object(a.xb)(x.height,0)?(f=me)&&v.width:(f=fe)&&x.width),Te=Y?Te:B-(m+z>M-e?2*f+H+W+se+ce:H+W+ce+se),N.initialItemY=0,N.initialItemX=0,N.showLegend&&0!==ae){for(l=0;l<ae;l+=1)A=E=(t=re[l]).config||(t.config={}),(I=E.name=Object(a.ub)(A.label))===a.b||0===A.enabled||!1===A.enabled||t.getState("removed")?E.enabled=0:(E.enabled=1,we+=1,s=!0,c=V.getOriSize(I),Oe=j(Oe,c.width),Fe=j(Fe,w(c.height,Z)),ke+=c.width);if(N.validLegendItem=s,je=ke/we,ke+=(d=g+le+ie+ne+$)*we,N.x=(D-W-G+H)/2,N.x=!Y&&ke>Re?0:N.x,s){for(je+=d,Oe+=d,0<J&&we<J&&(J=we),ke<=Te&&(0>=J||J===we)?(J=we,Le=je=ke/we,Ie=!0,Fe>r&&(Ae=(Fe-r)/2,r=Fe)):0<J&&(Le=Te/J)>je?Le>Oe&&(Le=Oe):Te>Oe&&(X||1.5*je>Oe)?(we<(J=L(Te/Oe))&&(J=we),Le=Oe):Te>=2*je?(we<(J=L(Te/je))&&(J=we),(Le=L(Te/J))>Oe&&(Le=Oe)):(J=1,Le=Te),N.itemWidth=Le,0>(p=F(Le-d))&&(ne=p=ie=0),N.symbolPadding=ne,N.textPadding=ie,N.width=Le*J-le,Q.oriText!==a.b&&(V.setStyle(Q.style),c=V.getSmartText(Q.oriText,Te,Z),Q.text=c.text,c.tooltext&&(Q.originalText=c.tooltext),S=c.width+$,N.width<S&&(N.initialItemX=(S-N.width)/2,N.width=S),N.initialItemY=Se=c.height+ee),V.setStyle(Object(a.R)({},te.text)),l=0;l<ae;l+=1)if(0!==(E=(t=re[l]).config).enabled){if(0===p&&(Ee[Pe]=!0,E.name=a.b,u=1,h=parseInt(Pe/J,10),b=Pe%J,E._legendX=b*Le,E._legendY=h*r+$,E._legendH=u*r,E._totalWidth=y+ne),Ie)(c=V.getOriSize(E.name)).height<r&&(E._legendTestY=(r-c.height)/2),E._markerYGutter=Ae,E._legendX=_e,E._legendY=$,E._legendH=r,E._totalWidth=y+o+c.width,_e+=c.width+d;else{for(c=V.getSmartText(E.name,p,Z),E.name=c.text,c.tooltext&&(E.originalText=c.tooltext);!0===Ee[Pe];)Pe+=1;for(O=c.height/r,k=Pe,u=0;u<O;u+=1,k+=J)Ee[k]=!0;c.height<r&&(E._legendTestY=(r-c.height)/2),h=parseInt(Pe/J,10),b=Pe%J,E._legendX=b*Le,E._legendY=h*r+$,E._legendH=u*r,E._totalWidth=y+o+c.width}Pe++}C=Ie?1:F(Ee.length/J),q.height+=C*r+Se,N.height=N.totalHeight=q.height,N.rowHeight=r,N.legendNumColumns=J,N.height-2*ne>e?(N.height=e,(_=N.scroll||(N.scroll={})).enabled=!0,_.flatScrollBars=N.flatScrollBars,_.scrollBar3DLighting=N.scrollBar3DLighting,N.width=N.width+12>Te?N.width:N.width+12):N.scroll.enabled=!1,n+=N.height,N.isActive=!0,N.enabled=!0}else N.enabled=!1,N.width=0,n=0}else n=0,N.height=0,N.width=0;return{bottom:n,right:0}}_placeLegendBlockRight(e){var t,o,r,n,i,l,s,c,d,g,h=this,b=h.config,p=h.getFromEnv("chart"),u=p.config,m=p.getFromEnv("smartLabel"),f=p.getChildren("canvas")[0].config.canvasBorderThickness||0,v=b.textPadding,x=b.title.padding,y=b.oriSymbolPadding,C=b.legendPadding,O=b.legendScale,k=h.getStateCosmetics("default"),L=parseInt(k.text["font-size"],10),F=2*u.canvasHeight,S=0,A=2*b.padding,E={width:A,height:A},I={},_=!1,P=h.getSortedLegendItems(),T=P.length,R=0;if(b.initialItemY=0,b.initialItemX=0,e-=A+C,0>=(n=L+1)&&(n=1),y*=O,0>=(n=w(n*=O,e))&&(y=n=0),b.symbolPadding=y,b.symbolWidth=n,b.legendHeight=i=n+2*y,b.rowHeight=j(parseInt(k.text["line-height"],10)||12,i),t=C+b.borderWidth/2+f,0>(r=e-i-C-v)&&(r=0),m.useEllipsesOnOverflow(u.useEllipsesWhenOverflow),m.setStyle(Object(a.R)({},k.text)),b.showLegend&&0!==T){for(R=0;R<T;R+=1)d=l=(g=P[R]).config||(g.config={}),s=l.name=Object(a.ub)(d.label),l._legendX=0,l._legendY=E.height,0!==d.enabled&&!1!==d.enabled&&s!==a.b?(l.enabled=1,_=!0,0===r?(E.height+=l._legendH=i,l.name=a.b,l._totalWidth=n+y):(o=m.getSmartText(s,r,F),l.name=o.text,o.tooltext&&(l.originalText=o.tooltext),o.height<i&&(l._legendTestY=(i-o.height)/2),l._totalWidth=n+y+v+o.width+C,E.height+=l._legendH=j(o.height,i),S=j(o.width,S))):l.enabled=0;b.validLegendItem=_,_?(b.itemWidth=S+i+C+v,b.width=b.itemWidth+A,b.title.oriText!==a.b&&(m.setStyle(b.title.style),o=m.getSmartText(b.title.oriText,e,F),b.title.text=o.text,o.tooltext&&(b.title.originalText=o.tooltext),c=o.width+A,b.width<c&&(b.initialItemX=(c-b.width)/2,b.width=c),b.initialItemY=o.height+x,E.height+=b.initialItemY),b.height=b.totalHeight=E.height,t=w(b.width+t,e),I.right=t+C,b.isActive=!0,b.enabled=!0):(b.enabled=!1,b.width=0,I.right=0)}else I.right=0,b.height=0,b.width=0;return I}postSpaceManager(){var e=this.config,t=e.legendPos,o=this.getFromEnv("chart").config.canvasHeight;t===a.t&&(e.height>o?(e.height=o,e.scroll.enabled=!0,e.scroll.flatScrollBars=e.flatScrollBars,e.scroll.scrollBar3DLighting=e.scrollBar3DLighting,e.width+=(e.scroll.scrollBarWidth=10)+(e.scroll.scrollBarPadding=2)):e.scroll.enabled=!1)}configure(){var e,t,o,r,n,l=this,s=l.config,c=l.getFromEnv("chart"),d=c.config,g=l.getFromEnv("style"),h=c.getFromEnv("chart-attrib"),b=c.config.is3D,p=l.getFromEnv("color-manager"),u=b?a.I.chart3D:a.I.chart2D,m=s.interactiveLegend=!1!==c.hasInteractiveLegend&&!!Object(a.xb)(h.interactivelegend,1),f=Object(a.xb)(h.useroundedges,0),v=g.outCancolor,x=Object(a.vb)(h.legenditemfont,g.outCanfontFamily),y=Object(a.xb)(h.legendiconscale,1),C=Object(a.wb)(h.legenditemfontsize,g.fontSize)+"px",k=Object(a.vb)(h.legenditemfontcolor,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),w=Object(i.g)(Object(a.vb)(h.legenditemhoverfontcolor,k));s.isActive=!1,s.chartMarginTop=d.origMarginTop,s.chartMarginRight=d.origMarginRight,s.chartMarginBottom=d.origMarginBottom,s.chartMarginLeft=d.origMarginLeft,s.reverselegend=Object(a.xb)(h.reverselegend,0),s.showLegend=Object(a.xb)(h.showlegend,!c.dontShowLegendByDefault,1),e=Object(a.Fb)({fontSize:C}),s.legendPos=Object(a.vb)(h.legendposition,c.legendposition,a.p).toLowerCase(),s.numColumns=Object(a.xb)(h.legendnumcolumns,0),s.xL=s.yL=0,(0>=y||5<y)&&(y=1),s.drawCustomLegendIcon=Object(a.xb)(h.drawcustomlegendicon,0),s.legendScale=y,s.legendPadding=Object(a.xb)(h.legendpadding,7),s.alignLegendWithCanvas=d.alignLegendWithCanvas,s.title.style={fontFamily:Object(a.vb)(h.legendcaptionfont,x),fontSize:Object(a.wb)(h.legendcaptionfontsize,g.fontSize)+"px",color:Object(a.vb)(h.legendcaptionfontcolor,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),fontWeight:I.fontWeight[Object(a.xb)(h.legendcaptionfontbold,1)]||a.b},n=h.legendcaptionalignment?h.legendcaptionalignment.toLowerCase():O.center,s.title.align=O[n]||O.center,s.title.style["text-anchor"]=s.title.align,s.padding=4,t=Object(a.vb)(h.legendbordercolor,p.getColor(u.legendBorderColor)),o=s.borderAlpha=Object(a.xb)(h.legendborderalpha,100),s.borderColor=Object(i.c)(t,o),s.borderWidth=Object(a.xb)(h.legendborderthickness,!f||h.legendbordercolor?1:0),s.borderRadius=Object(a.xb)(f,0),s.backgroundAlpha=r=Object(a.xb)(h.legendbgalpha,100),s.backgroundColor=Object(i.c)(Object(a.vb)(h.legendbgcolor,p.getColor(u.legendBgColor)),r),s.symbol3DLighting=!!Object(a.xb)(h.use3dlighting,h.useplotgradientcolor,1),s.shadow=!!Object(a.xb)(h.legendshadow,1),s.shadow&&(s.shadow={enabled:s.shadow,opacity:j(o,r)/100}),s.prevReversed=!!Object(a.xb)(s.reversed,0),s.reversed=!!Object(a.xb)(h.reverselegend,0),s.lineWidth=Object(a.xb)(h.linethickness,2),s.borderRadius=Object(a.xb)(h.legendborderradius,f?3:0),s.legendAllowDrag=!!Object(a.xb)(h.legendallowdrag,0),s.title.oriText=Object(a.ub)(Object(a.Y)(h.legendcaption,a.b)),s.legendScrollBgColor=Object(i.g)(Object(a.vb)(h.legendscrollbgcolor,h.scrollcolor,p.getColor("altHGridColor"))),s.legendScrollBarColor=Object(a.vb)(h.legendscrollbarcolor,t),s.legendScrollBtnColor=Object(a.vb)(h.legendscrollbtncolor,t),s.minimiseWrappingInLegend=Object(a.xb)(h.minimisewrappinginlegend,0),s.flatScrollBars=Object(a.xb)(h.flatscrollbars,0),s.scrollBar3DLighting=Object(a.xb)(h.scrollbar3dlighting,1),s.orderReversed=!1,l.setStateCosmetics("hidden",{symbol:{fill:Object(i.c)(Object(a.vb)(h.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1")),stroke:Object(i.c)(Object(a.vb)(h.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))},text:{fill:Object(i.c)(Object(a.vb)(h.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))}}),l.setStateCosmetics("default",{text:{fill:Object(i.c)(k),"font-family":x,cursor:m?a.zb.POINTER:"default","font-size":C,"line-height":e,"vertical-align":a.v,"text-anchor":a.u,direction:"rtl"===d.textDirection?"rtl":"initial","font-weight":I.fontWeight[Object(a.xb)(h.legenditemfontbold,0)]||a.b},symbol:{bgColor:Object(a.vb)(h.legendiconbgcolor),cursor:m?a.zb.POINTER:"default",borderColor:Object(a.vb)(h.legendiconbordercolor),bgAlpha:Object(a.vb)(h.legendiconbgalpha,h.legendiconalpha,100),borderAlpha:Object(a.vb)(h.legendiconborderalpha,h.legendiconalpha,100),borderThickness:Object(a.xb)(h.legendiconborderthickness),startAngle:Object(a.xb)(h.legendiconstartangle,45),sides:Object(a.xb)(h.legendiconsides,4)}}),l.setStateCosmetics("hover",function(e,t){return t.hasState("hidden")||(!e.text&&(e.text={}),e.text.fill=Object(i.c)(w.replace(/^#?([a-f0-9]+)/gi,"#$1")),e.text.cursor="inherit"),e}),s.legendAllowDrag&&!s._dragEvtListenerBinded?(l.addEventListener("dragstart",s.handlers.dragstart),l.addEventListener("dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!0):(l.removeEventListener("dragstart",s.handlers.dragstart),l.removeEventListener("dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!1)}getLegendState(){return this._legendState}hasState(e){var t,o,r=this.getLegendState();for(t=0,o=r.length;t<o;t++)if(r[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,o,r=1;if(e)for(t=0,o=this._legendState.length;t<o&&r;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),r=0);else this._legendState.length=0;this.asyncDraw()}setStateCosmetics(e,t){this._stateCosmetics[e]=t}removeStateCosmetics(e){delete this._stateCosmetics[e]}getStateCosmetics(e){return this._stateCosmetics[e]}hide(){var e=this.getFromEnv("chart").getChildContainer("legendGroup");e&&e.hide()}},T=function(e){let t;Object(a.K)(e,P,"legend"),(t=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",t),e.config.showLegend||t.remove()};var R=class extends r.a{constructor(){super(),this.registerFactory("dataset",n,["vCanvas"]),this.registerFactory("legend",T)}static getName(){return"MSCartesian"}getName(){return"MSCartesian"}getType(){return"chartAPI"}_createLayers(){super._createLayers();let e=this.getFromEnv("animationManager");this.getChildContainer("legendGroup")||this.addChildContainer("legendGroup",e.setAnimation({el:"group",attr:{name:"legend"},component:this,container:this.getContainer("parentgroup"),label:"group"}))}_manageLegendSpace(){(function(){var e,t,o,r,n=this,i=n.config,l=n.getChildren("legend")&&n.getChildren("legend")[0],s=n.getChildren("gLegend")&&n.getChildren("gLegend")[0],c=n.getFromEnv("dataSource").colorrange,d=i.hasLegend,g={},h=n.hasGradientLegend,b=n.getFromEnv("dataSource").chart,p=Object(a.xb)(b.mapbycategory,0);h&&c&&Object(a.xb)(c.gradient)&&!p?(e=s.conf,h=!0,i.gLegendEnabled=!0,r=.5,t=e.legendPosition):(e=l&&l.config,h=!1,i.gLegendEnabled=!1,r=(t=e&&e.legendPos)===a.t?.8:.4),o=t===a.t?i.availableWidth*r:i.availableHeight*r,h?g=n.manageGradientLegendSpace(o):!1!==d&&l&&!l.getState("removed")&&(g=l&&l._manageLegendPosition(o)),n._allocateSpace({bottom:g&&g.bottom||0,right:g&&g.right||0})}).call(this)}manageGradientLegendSpace(e){return function(e){var t,o,r,n,i=this,l=i.config,s=i.getFromEnv("gLegend"),c=s&&s.conf;return l.gLegendPadding=Object(a.xb)(i.getFromEnv("chart-attrib").legendpadding,10),r=Math.min(l.gLegendPadding,.5*e),c?(t=c.legendPosition,n=s.getLogicalSpace(e),o=t===a.p?{bottom:(n.height||0)+r}:{right:(n.width||0)+r}):o={bottom:0,right:0},o}.call(this,e)}},B=o(27),M=o(5),D=o(2),G=o(25),V=o(7),N=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],W={"initial.dataset.entities":function(){return{"path.appearing":()=>(N[0].slot="plot",N),"path.updating":e=>[{finalAttr:function(){return e.finalAttr}}],"labelConnectors.appearing":()=>(N[0].slot="final",N),"labelConnectors.updating":null,"entityLabel.appearing":()=>[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}],"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":()=>(N[0].slot="final",N),"markerItem.updating":e=>[{finalAttr:function(){return e.finalAttr}}]}},"initial.group.mapGroup":function(){return{"group.appearing":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"group.updating":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"*":null}}};let H,z=Object(s.b)("redraphael","plugin"),Y=window.navigator.userAgent,X=/msie/i.test(Y)&&!window.opera,K=",",J="",U="top",Z="bottom",$="right",q="left",Q="middle",ee="center",te="crisp",oe=window.Math,re=oe.min,ae=oe.max,ne=/stroke/gi,ie=/AppleWebKit/.test(Y),le=oe.ceil,se=function(e,t){let o=t?Object(a.R)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=a.Ib,o},ce=function(e,t){let o,r={};if(t=t||1,!e||"object"!=typeof e)return r;for(o in e)ne.test(o)||("stroke-width"===o?(r[o]=+e[o]/t,ie&&(r[o]=r[o]&&le(r[o])||0)):r[o]=e[o]);return r},de={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*re(t,e-t)}},ge={top:function(){return arguments[1]},middle:function(e,t){return 2*re(t,e-t)},bottom:function(e,t){return e-t}},he=function(e){let t,o=e&&e.length||0,r={};for(;o--;)(t=e[o]).id!==H&&(r[t.id.toLowerCase()]=t);return r};Object(s.a)({name:"mapsAnimation",type:"animationRule",extension:W}),function(e){var t,o,r,a=window.parseFloat,n=e._createNode,i=e._setFillAndStroke,l=e.el.constructor,s={Q:"L",Z:"X",q:"l",z:"x",",":" "},c=/,?([achlmqrstvxz]),?/gi,d=function(){return this.join(",").replace(c,t)};e.svg?(t="$1",o=function(){var o=e.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);o?"string"==typeof o?o=o.replace(c,t):o.toString=d:o="M0,0",this.node.setAttribute("d",o.toString())},e._engine.litepath=function(t,o,r,a,s){var c,d=n("path");return(a||o).canvas.appendChild(d),(c=new l(d,o,a)).type="litepath",c.id=d.raphaelid=e._oid++,d.raphael=!0,i(c,s||{fill:"none",stroke:"#000"}),c},e._getPath.litepath=function(t){return e.parsePathString(t.node.getAttribute("d"))}):e.vml&&(t=function(e,t){return s[t]||t},r=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},o=function(e){return e?"string"==typeof e?e=e.replace(c,t):e.toString=d:e="M0,0",this.node.path=e,this},e._engine.litepath=function(t,o,i,s,c){var d,g=n("shape"),h=g.style,b=new l(g,o,s);return h.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",i=a(i),isNaN(i)?g.coordsize="21600 21600":(b._.bzoom=i,h.width="1px",h.height="1px",g.coordsize=b._.bcoord=i+" "+i),g.coordorigin=o.coordorigin,b.type="litepath",b.id=g.raphaelid=e._oid++,g.raphael=!0,b._transform=b.transform,b.transform=r,e._setFillAndStroke(b,c||{fill:"none",stroke:"#000"}),(s||o).canvas.appendChild(g),(d=n("skew")).on=!0,g.appendChild(d),b.skew=d,b},e._getPath.litepath=function(t){return e.parsePathString(t.node.path||"")}),e.fn.litepath=function(t,r,a){var n,i,s;return"object"==typeof t&&t.constructor!==l&&(n=t,i=(t=t.litepath).zoom,a=t.group),r&&r.constructor===l?(a=r,i=void 0):i=r,t&&t.constructor===l&&(a=t,t=""),(s=e._engine.litepath(t,this,i,a,n)).ca.litepath=o,t&&s.attr("litepath",e.is(t,"array")?[t]:t),this.__set__&&this.__set__.push(s),this._elementsById[s.id]=s}}(z);class be extends l.a{constructor(){super(),this.components={}}getName(){return"entities"}getType(){return"dataset"}configureAttributes(e){if(!e)return;this.JSONData={data:e};let t,o,r,n,i,l,s,c,d=this,g=d.getFromEnv("chart").jsonData,h=d.config,b=g.map||g.chart,p=[],u=d.getFromEnv("colorManager"),m=g.entitydef||[];for(i in!h.attachEvent&&u&&(d.addExtEventListener("legendUpdate",function(){if("legend"===(c=arguments[1]).component)d.legendInteractivity(c.legendItem,c.colorObj);else for(p=c.maxMinArray,l=p.length,s=0;s<l;s++)d.updateEntityColors(p[s].min,p[s].max)},u),h.attachEvent=!0),t=g.data&&g.data[0]&&g.data[0].data?d.JSONData=g.data[0].data||[]:d.JSONData=g.data||[],h.useSNameAsId=Object(a.xb)(b.usesnameasid,0),this._redefineEntities(m),o=d.components.data,h.showTooltip=Object(a.xb)(b.showtooltip,1),h.showHoverEffect=Object(a.xb)(b.showhovereffect,0),t=he(t),d.calculateDataLimits(),g.colorrange||d.detachChild(d.getChildren("colorRange")&&d.getChildren("colorRange")[0].getId()),o)r=t[i],n=o[i],r?this._configureEntity(i,n,Object(a.kb)(be._sanitizeEntityOptions(Object(a.R)({},r)),n.config)):this._configureEntity(i,n,n.config)}updateEntityColors(e,t){let o,r,a,n,i,l,s=this.components.data,c=this.getFromEnv("chart"),d={"fill-opacity":0};for(n in s)a=(r=(o=s[n]).config).cleanValue,l={"fill-opacity":(i=r.alphaArr||[])[0]/100||1},a<e||a>t?(be.setCustomAttrs(o,d,c),o.hidden=!0):(o.hidden=!1,be.setCustomAttrs(o,l,c))}legendInteractivity(e,t){let o,r,a,n,i,l,s=this,c=s.getFromEnv("chart"),d=s.components.data,g=e.config,h=e.hasState("hidden"),b=s.getFromEnv("colorManager"),p={},u={"fill-opacity":0};for(o in c.getFromEnv("animationManager").setAnimationState("legendInteraction"),d)d.hasOwnProperty(o)&&(a=(g=(r=d[o]).config).cleanValue,l=b.getColorObj(a),n=g.visibleEntityAttr,p["fill-opacity"]=n["fill-opacity"],i=h?p:u,t.code===(!l.outOfRange&&l.code)&&(r.hidden=!h,be.setCustomAttrs(r,i,c),h?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}static setCustomAttrs(e,t){let o,r;e&&(r=(o=e.graphics).outlines).attr(t)}calculateDataLimits(){let e,t,o,r,a=this.getFromEnv("chart"),n=this.config,i=a.jsonData.data||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(r=0,o=i.length;r<o;r++)t=i[r].value,e=l.getCleanValue(t),s=re(s,e),c=ae(c,e);n.max=c,n.min=s}_configureEntity(e,t,o){let r,n,l,s,c,d,g,h,b,p,u,m,f,v,x,y,C,O,k,w,j,L,F=this,S=F.getFromEnv("chart"),A=F.config,E=this.getFromEnv("number-formatter"),I=S.config.entityOpts,_=t.config,P=t.labelConfig,T=o.value,R=_.cleanValue=E.getCleanValue(T),B=_.formattedValue=R===H?H:E.dataLabels(R),M=Object(a.xb)(o.showtooltip,I.showTooltip),D=this._getDefaultTooltip(t,o,F),G={formattedValue:B,sName:o.shortLabel,lName:o.label},V=I.dataLabels.style,N=_.toolText=M?Object(a.ub)(Object(a.vb)(Object(a.tb)(Object(a.vb)(o.tooltext,I.tooltext,D),[1,2,7,38,39],G,o))):J,W=_.borderColor=Object(a.vb)(o.bordercolor,I.borderColor),z=_.borderAlpha=Object(a.vb)(o.borderalpha,I.borderAlpha),Y=_.borderThickness=Object(a.xb)(o.borderthickness,I.borderThickness),X=I.hoverOnNull,U=_.useHoverColor=Object(a.xb)(o.showhovereffect,o.usehovercolor,X?I.showHoverEffect:isNaN(T)?0:I.showHoverEffect),Z=_.labelAlignment,$=F.getFromEnv("colorManager");if(t.hidden=!1,_.showLabel=Object(a.xb)(o.showlabel,I.showLabels),_.labelPadding=Object(a.xb)(o.labelpadding,I.labelPadding),_.fontFamily=Object(a.vb)(o.font,V.fontFamily),_.fontSize=Object(a.xb)(parseInt(o.fontsize,10),parseInt(V.fontSize,10)),_.fontBold=Object(a.xb)(o.fontbold,0),_.fontColor=Object(a.vb)(o.fontcolor,V.color),_.connectorColor=Object(a.vb)(o.labelconnectorcolor,I.connectorColor),_.connectorAlpha=Object(a.vb)(o.labelconnectoralpha,I.connectorAlpha),_.hoverBorderThickness=Object(a.xb)(o.borderhoverthickness,o.hoverborderthickness,I.hoverBorderThickness),_.hoverBorderColor=Object(a.vb)(o.borderhovercolor,o.hoverbordercolor,I.hoverBorderColor,_.borderColor),_.hoverBorderAlpha=Object(a.vb)(o.borderhoveralpha,o.hoverborderalpha,I.hoverBorderAlpha,_.borderAlpha),_.connectorThickness=Object(a.xb)(o.labelconnectorthickness,I.connectorThickness),_.origConnectorThickness=_.connectorThickness,_.borderThickness=Y,_.link=o.link,_.isVisible=!0,_.id=e,_.originalId=o.origId,null!==R&&((r=$&&$.getColor(R))&&!r.outOfRange&&(y=r.code,r.oriAlpha!==H&&(C=r.oriAlpha+""))),Object(a.vb)(o.color,o.alpha,o.angle,o.ratio)===H?(v=se({color:Object(a.vb)(y,I.fillColor),alpha:Object(a.vb)(C,I.fillAlpha),angle:Object(a.vb)(I.fillAngle),ratio:Object(a.vb)(I.fillRatio)}),f=se({color:Object(a.vb)(I.nullEntityColor),alpha:Object(a.vb)(I.nullEntityAlpha),angle:Object(a.vb)(I.nullEntityAngle),ratio:Object(a.vb)(I.nullEntityRatio)}),c=(b=null===R?f:v).FCcolor.color,d=b.FCcolor.alpha,g=b.FCcolor.angle,h=b.FCcolor.ratio):(c=Object(a.vb)(o.color,y,I.fillColor),d=Object(a.vb)(o.alpha,C,I.fillAlpha),g=Object(a.vb)(o.angle,I.fillAngle),h=Object(a.vb)(o.ratio,I.fillRatio),b=se({color:c,alpha:d,angle:g,ratio:h})),N===J&&(A.showTooltip=0),_.visibleEntityAttr={stroke:Object(i.c)(W,z),fill:(_.fillColor=b).toString(),"fill-opacity":d/100},L=d.split(K),_.alphaArr=L,U&&(Object(a.vb)(o.fillhovercolor,o.fillhoveralpha,o.fillhoverangle,o.fillhoverratio,o.hoverfillcolor,o.hoverfillalpha,o.hoverfillratio,o.hoverfillangle)===H?(!I.hoverColorObject&&(I.hoverColorObject=se({color:I.hoverFillColor,alpha:I.hoverFillAlpha,angle:I.hoverFillAngle,ratio:I.hoverFillRatio})),x=I.hoverColorObject):(c=Object(a.vb)(o.fillhovercolor,o.hoverfillcolor,I.hoverFillColor),d=Object(a.vb)(o.fillhoveralpha,o.hoverfillalpha,I.hoverFillAlpha),g=Object(a.vb)(o.fillhoverangle,o.hoverfillangle,I.hoverFillAngle),h=Object(a.vb)(o.fillhoverratio,o.hoverfillratio,I.hoverFillRatio),x=se({color:c,alpha:d,angle:g,ratio:h})),_.hoverColor=x),P||(P=t.labelConfig={}),p=_.fontColor,u=_.fontFamily,m=_.fontBold,N=_.toolText,n=_.link,Z?(l=Z[0],s=Z[1]):(l=ee,s=Q),P.align=l,P.vAlign=s,P.bgColor=J,P.borderColor=J,P.fontColor=p,P.fontFamily=u,P.fontBold=m,P.toolText=N,P.link=n,"object"==typeof _.options)for(O=_.entityLabels=_.entityLabels||[],j=(w=_.labels||[]).length;j--;)O[j]||(O[j]={config:{}}),P=O[j].config,(Z=w[j].labelAlignment)?(l=Z[0],s=Z[1]):(l=ee,s=Q),P.align=l,P.vAlign=s,P.displayValue=F.getDisplayValue(t,w[j],_.options.isDataEnabled,!j,o),P.bgColor=J,P.borderColor=J,P.toolText=N,P.align=l,P.vAlign=s,P.bgColor=J,P.borderColor=J,P.fontColor=p,P.fontFamily=u,P.fontBold=m,P.toolText=N;else k={shortText:_.shortLabel,text:_.label},P.displayValue=F.getDisplayValue(t,k,!0,!0,o)}getDisplayValue(e,t,o,r,n){let i,l=this.getFromEnv("chart").config.entityOpts,s=e.config,c=s.cleanValue,d=s.formattedValue,g=l.labelSepChar;return o?r&&void 0!==n.displayvalue?i=n.displayvalue:(i=Object(a.vb)(l.includeNameInLabels?l.useShortName?t.shortText:t.text:""),l.includeValueInLabels&&null!==c&&(i=i===H?d:i+g+d)):i=s.label,i}static _sanitizeEntityOptions(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}_redefineEntities(e){let t,o,r,n,i,l,s,c,d,g,h,b,p=this,u=p.config,m={},f={},v=p.getFromEnv("chart").config.entities,x=u.useSNameAsId,y=0;for(t=e.length;t--;)if(r=(o=e[t]).internalid,n=o.newid?o.newid:r,i=o.sname,l=o.lname,b=v[r],r=Object(a.Kb)(r),n=(n=Object(a.Kb)(n))&&n.toLowerCase(),b){for(h in m[n]=c={origId:r},f[r]=!0,b)c[h]=b[h];c.shortLabel=i||b.shortLabel,c.label=l||b.label,c.showhovereffect=o.showhovereffect,c.fillhovercolor=o.fillhovercolor,c.fillhoveralpha=o.fillhoveralpha,c.fillhoverangle=o.fillhoverangle,c.fillhoverratio=o.fillhoverratio,c.borderhoverthickness=o.borderhoverthickness}for(s in(g=p.components.data)||(g=p.components.data={}),m)g[s=s.toLowerCase()]||(g[s]={config:{}}),g[s].config=m[s],y+=1;for(s in d=g,v)if(c=v[s],!f[s=Object(a.Kb)(s)]){for(h in x?(!(b=d[c.shortLabel.toLowerCase()])&&(b=d[c.shortLabel.toLowerCase()]={}),b.config={},b.origId=c.shortLabel):(!(b=d[s.toLowerCase()])&&(b=d[s.toLowerCase()]={}),b.config={},b.config.origId=s),c)b.config[h]=c[h];y+=1}u.entityCount=y}draw(){let e,t=this.config,o=this.getFromEnv("chart"),r=a.gb?200:10;this.config.ready=!1,t.BATCH_SIZE=r,t.labelBatchSize=a.gb?200:20,(e=this._batchRender())(0),o.config.entityFlag=!0,o.checkComplete()}_batchRender(){let e,t,o,r,a,n=this,i=n.config,l=n.getFromEnv("chart").config.entities.firstEntity,s=n.components.data,c=i.BATCH_SIZE,d=i.entityKeys=l?n._getKeys(l,s):Object.keys(s),g=i.entityLength=d.length,h=function(i){for(e=i,o=0;d[e]!==H;)if(t=s[d[e]],a=n.drawEntity(t,c),o+=a,t.config.drawn&&((r=e===g-1?t:s[d[e-1]])&&(r.config.drawn=!1,r.config.outlineStartIndex=H),e++),o>=c){n.addJob("entityDraw",h.bind(this,e),y.b.entitydraw);break}e===g&&(n._addEventListenersToEntities(0),n.initComplete())};return h}_addEventListenersToEntities(e){let t,o,r,a,n=this,i=n.components.data,l=n.config,s=l.BATCH_SIZE,c=l.entityKeys,d=l.entityLength,g=0;for(t=e;t<d;t++)if((r=(a=(o=i[c[t]]).config).options)&&!1===r.isDataEnabled||n.addMouseGestures(o),++g===s){n.addJob("_addEventListenersToEntities",n._addEventListenersToEntities.bind(this,t),y.b.entitydraw);break}}static _getKeys(e,t){let o=[e],r=e;for(;t[r];)r=t[r].nextId,o.push(r);return o}_getDefaultTooltip(e,t){let o,r,a=e.config.cleanValue,n=e.config.formattedValue,i=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(r=t.labels&&t.labels[0]))return H;o=(i.useSNameInTooltip?r.shortText:r.text)+(null===a?J:i.tooltipSepChar+n)}else o=(i.useSNameInTooltip?t.shortLabel:t.label)+(null===a?J:i.tooltipSepChar+n);return o}drawEntity(e,t){let o,r,n,i,l,s,c,d,g,h=this,b=h.getFromEnv("chart"),p=b.getFromEnv("animationManager"),u=e.config,m=a.gb||!X?"litepath":"path",f=b.config.entityOpts,v=u.outlines,x=h.getFromEnv("toolTipController"),y=this.getLinkedParent().getChildContainer("plot"),C=this.getLinkedParent().getChildContainer("plotShadow"),O=u.toolText,k=f.shadow,w=[],j={};if(h._configureEntityDrawingParams(e),n=(u=e.config).visibleEntityAttr,g=u.shadowOptions,o=u.outlineStartIndex===H?v.length:u.outlineStartIndex,e.graphics||(e.graphics={}),c=0,w=u.outlinePath||(u.outlinePath=[]),d=u.customStrokeWidthModifier,"object"==typeof u.options){for(;o--;)if(w=v[o].outline,i=!0===u.options.isDataEnabled?n:Object(a.R)(Object(a.R)({},n),ce(v[o].style,d)),(l=e.graphics.outlines)||(l=e.graphics.outlines=[]),l[o]||(l[o]={}),s=l[o].outline,i[m]=w,(s=l[o].outline=p.setAnimation({el:m,container:y,attr:i,component:h,label:"path"})).shadow(!!k&&g,C),x.enableToolTip(s,O),c++,u.outlineStartIndex=o,c===t)return c;return u.drawn=!0,c}for(;o--;)if(w=(r=v[o]).concat(w),c++,u.outlineStartIndex=o,c===t)return u.outlinePath=w,c;return e.graphics.outlines||(n[m]=w),Object.assign(j,n,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=p.setAnimation({el:e.graphics.outlines||m,container:y,attr:j,component:h,label:"path"}),u.drawn=!0,u.outlineStartIndex=0,u.outlinePath=[],e.graphics.outlines.shadow(!!k&&g,C),x.enableToolTip(e.graphics.outlines,O),c}_configureEntityDrawingParams(e){let t,o=this.getFromEnv("chart"),r=e.config,n=o.config.entityOpts,i=o.config.scalingParams,l=!X||a.gb,s=i.scaleFactor,c=i.strokeWidth,d=(l?o.baseScaleFactor:1)*c,g=1===n.scaleBorder,h=r.borderThickness,b=r.alphaArr,p=r.origConnectorThickness,u=r.hoverBorderThickness,m=r.visibleEntityAttr,f=m["fill-opacity"];r.shadowOptions={scalefactor:[s,s*o.config.baseScaleFactor],opacity:ae.apply(oe,b)/100,useFilter:0},r.fillOpacity=e.hidden?0:f,l?(h=r.entityBorderThickness=g?h*d:h/s,p/=s,t=g?s:i.sFactor,u&&(u=r.hoverBorderThickness=g?u*d:u/s)):(h=g?h*c:h,t=g?i.scaleFactor:o.baseScaleFactor),r.entityBorderThickness=h,r.connectorThickness=p,r.customStrokeWidthModifier=t,m["stroke-width"]=h,m.transform=a.gb||!X?"":i.transformStr}drawLabels(e){let t,o,r,a,n=this,i=e,l=n.getFromEnv("chart"),s=n.config,c=s.labelBatchSize,d=s.entityLength,g=[],h=0,b=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[h],p=0,u=0,m=l.getFromEnv("toolTipController"),f=l.config.annotationConfig;for(t in b||(a=new G.a,l.attachChild(a,"mapLabelAnnotations"),b=l.getChildren("mapLabelAnnotations")[h]),b.clear(),b._renderer&&(b._renderer=null),f.showbelow=0,i){if(n.drawLabel(i[t],g),++p===c){for(b.annotation.injectDependency("paper",l.getFromEnv("paper")),b.annotation.injectDependency("toolTipController",m),o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(r=b.addGroup(Object.assign(f,{id:"entityLabels"+h,items:g,animationLabel:"entityLabelGroup"}),n),l.config.labelsOnTop&&r.store.element.toFront(),o=0;o<r.items.length;o++)r.items[o].addEventListener("mouseover",g[o].onmouseover),r.items[o].addEventListener("mouseout",g[o].onmouseout),r.items[o].addEventListener("click",g[o].onclick);h++,(b=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[h])||(a=new G.a,l.attachChild(a,"mapLabelAnnotations"),b=l.getChildren("mapLabelAnnotations")[h]),b.clear(),b._renderer&&(b._renderer=null),p=0,g=[]}else if(u==d-1){for(b.annotation.injectDependency("paper",l.getFromEnv("paper")),b.annotation.injectDependency("toolTipController",m),o=0;o<g.length;o++)g[o].animationLabel="entityLabel";for(r=b.addGroup(Object.assign(f,{id:"entityLabels"+h,items:g,animationLabel:"entityLabelGroup"}),n),l.config.labelsOnTop&&r.store.element.toFront(),o=0;o<r.items.length;o++)r.items[o].addEventListener("mouseover",g[o].onmouseover),r.items[o].addEventListener("mouseout",g[o].onmouseout),r.items[o].addEventListener("click",g[o].onclick)}u++}n.drawLabelConnFn(0)}drawLabelConnFn(e){let t,o,r,a,n,i=this,l=i.config,s=i.components.data,c=l.BATCH_SIZE,d=l.entityKeys,g=d.length,h=0;for(o=e;o<g;o++){if("object"==typeof(a=(n=s[d[o]]).config).options)for(t=(r=a.labels)&&r.length||0;t--;)r[t].labelConnectors&&(i.drawLabelConnectors(n,r[t].labelConnectors,i),h++);else a.labelConnectors&&(i.drawLabelConnectors(n,a.labelConnectors,i),h++);if(h===c){i.addJob("drawLabelConnectors",i.drawLabelConnFn.bind(this,o),y.b.entitydraw);break}}}_getLabelObject(e,t,o){let r,a,n,i,l,s,c,d,g,h,b,p,u=this,m=u.getFromEnv("chart"),f=e.config,v=m.config.scalingParams,x=e.graphics&&e.graphics.outlines,y=f.fontSize,C=f.labelPadding,O=f.labels||[],k=f.entityLabels||[];return t===H?(r=e.labelConfig,a=f.labelPosition,n=f.labelAlignment):(b=O[t],i=(r=(p=k[t]).config).style=b.style,a=b.labelPosition,n=b.labelAlignment),a?(l=a[0],s=a[1]):(l=(c=x.getBBox()).x+c.width/2,s=c.y+c.height/2),n?(d=n[0],g=n[1],d===$?l-=C:d===q&&(l+=C),g===U?s-=C:g===Z&&(s+=C)):(d=ee,g=Q),h=parseFloat(y)/v.sFactor,!o&&i&&(i.color&&(r.fontColor=i.color),i["font-size"]&&(h=parseFloat(i["font-size"])/v.sFactor),i["font-family"]&&(r.fontFamily=i["font-family"]),i["font-weight"]!==H&&(r.fontBold="bold"===i["font-weight"])),r.x=l.toString(),r.y=s.toString(),r.wrap=1,r.type="text",r.fontSize=h,{x:l.toString(),y:s.toString(),wrapwidth:de[d](void 0,l+void 0)-C,wrapheight:ge[g](void 0,s+void 0)-C,wrap:1,type:"text",align:r.align,valign:r.vAlign,text:r.displayValue,tooltext:r.toolText,css:r.link!==H&&{cursor:"pointer",_cursor:"hand"},bgcolor:r.bgColor,bordercolor:r.borderColor,fillcolor:r.fontColor,fontsize:r.fontSize,font:r.fontFamily,bold:r.fontBold,onclick:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityClick(a[o].outline,t);else u.entityClick(a,t)},onmouseover:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityRollOver(a[o].outline,t);else u.entityRollOver(a,t)},onmouseout:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityRollOut(a[o].outline,t);else u.entityRollOut(a,t)},ontouchstart:function(t){let o,r,a=e.graphics.outlines;if(a instanceof Array)for(o=0,r=a.length;o<r;o++)u.entityRollOver(a[o].outline,t);else u.entityRollOver(a,t);u.entityRollOver(a,t)}}}drawLabel(e,t){let o,r,a,n=this,i=e.config;if(i.showLabel)if("object"==typeof i.options)for(r=(a=i.labels)&&a.length||0,o=i.options.isDataEnabled;r--;)t.push(n._getLabelObject(e,r,o,!r));else t.push(n._getLabelObject(e,H,!0,!0))}drawLabelConnectors(e,t,o){let r,n,l=e.config,s=this,c=s.getFromEnv("chart"),d=c.getFromEnv("animationManager"),g=c.config.scalingParams,h=o.getLinkedParent().getChildContainer("plot"),b=t&&t.length||0,p=l.showLabel;for(;b--;)n=t[b],r=e.graphics.connectorElem,p?e.graphics.connectorElem=r=d.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:n,opacity:1,transform:a.gb||!X?"":g.transformStr,stroke:Object(i.c)(l.connectorColor,l.connectorAlpha),"shape-rendering":te,"stroke-width":l.connectorThickness},container:h,component:s,label:"labelConnectors"}):r&&r.hide()}entityClick(e,t){let o=e.node.__entity,r=this.getFromEnv("chart"),a=r.config.scalingParams,n=o.graphics.outlines.getBBox(),i=r.getFromEnv("linkClickFN"),l=o.config,s=l.link;n.width*=a.scaleFactor,n.height*=a.scaleFactor,n.x=n.x*a.scaleFactor+a.translateX,n.y=n.y*a.scaleFactor+a.translateY,n.x2=n.x+n.width,n.y2=n.y+n.height,r.fireChartInstanceEvent("entityclick",l.eventArgs,t),s!==H&&i.call({link:s,entity:o,entityBox:n},!0)}entityRollOver(e,t){let o=e.node.__entity,r=o.config,a=this.getFromEnv("chart"),n=a.getFromEnv("animationManager"),i=r.hoverAttr;a.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(o.config.timer):r.useHoverColor&&r.isVisible&&!o.hidden&&i&&(a.config.hoverEntity=e,n.setAnimation({el:e,attr:i,component:this,state:"updating",label:"path"}),e.data("hovered",!0))}entityRollOut(e,t){let o,r=e.node.__entity,a=this,n=a.getFromEnv("chart"),i=n.getFromEnv("animationManager"),l=r.config.revertAttr;n.plotEventHandler(e,t,"entityRollOut"),r.config.timer=setTimeout(function(){!0!==(o=r.hidden)&&l&&(i.setAnimation({el:e,attr:l,component:a,state:"updating",label:"path"}),e.data("hovered",!1))},100)}addMouseGestures(e){let t,o,r,n,l,s=e.config,c=s.originalId,d=this,g=e.graphics,h=s.useHoverColor,b=s.hoverBorderThickness,p=s.hoverBorderColor,u=s.hoverBorderAlpha,m=s.entityBorderThickness,f=s.borderColor,v=s.borderAlpha,x=s.link,y=s.visibleEntityAttr,C=function(t){x!==H&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",s.eventArgs),t.data("groupId","groupId"+c),t.node.__entity=e,e._listenersBinded||t.click(d.entityClick.bind(d,t)).hover(d.entityRollOver.bind(d,t),d.entityRollOut.bind(d,t))};for(t in s.eventArgs={value:s.cleanValue,label:s.label,shortLabel:s.shortLabel,originalId:s.origId,id:s.id||s.origId},s.legacyEventArgs={value:s.value,lName:s.label,sName:s.shortLabel,id:s.originalId||s.id},h&&(s.hoverAttr={fill:Object(a.Ib)(s.hoverColor)},s.revertAttr={fill:Object(a.Ib)(s.fillColor),stroke:Object(a.Ib)(s.borderColor,s.borderAlpha)},s.revertAttr["fill-opacity"]=y["fill-opacity"],b!==m&&(s.hoverAttr["stroke-width"]=Object(a.xb)(b,m),s.revertAttr["stroke-width"]=m),(p!==f||u!==v)&&(s.hoverAttr.stroke=Object(i.c)(p,u),s.revertAttr.stroke=Object(i.c)(f,v))),g)if(g.hasOwnProperty(t))if(g[t]instanceof Array){for(o=0,n=(l=g[t]).length;o<n;o++)C(r=l[o].outline);e._listenersBinded=!0}else C(r=g[t]),e._listenersBinded=!0}getDataLimits(){let e=this.config;return{max:e.max,min:e.min}}initComplete(){let e=this.getFromEnv("chart"),t=this.components.data;this.drawLabels(t),e.config.entitiesReady=!0,e.checkComplete()}}var pe,ue=be,me=function(e,t,o,r,a){var n=Math.pow;return n(o-e,2)+n(r-t,2)<=n(a,2)},fe=Math.PI,ve=Math.cos,xe=Math.sin,ye=Math.max,Ce=Math.min,Oe=fe/180,ke=function(e,t,o,r,a,n){var i,l,s;return i=(r-t)*(a-o),l=(o-e)*(n-r),isNaN(i)&&(i=0),isNaN(l)&&(l=0),0===(s=i-l)?0:0<s?1:2},we=function(e,t,o,r,a,n){return!!(o<=ye(e,a)&&o>=Ce(e,a)&&r<=ye(t,n)&&r>=Ce(t,n))},je=function(e,t,o,r,a,n,i,l){var s=ke(e,t,o,r,a,n),c=ke(e,t,o,r,i,l),d=ke(a,n,i,l,e,t),g=ke(a,n,i,l,o,r);return!!(s!==c&&d!==g||0===s&&we(e,t,a,n,o,r)||0===c&&we(e,t,i,l,o,r)||0===d&&we(a,n,e,t,i,l)||0===g&&we(a,n,o,r,i,l))},Le=function(e,t,o,r,a,n,i){var l,s,c,d,g,h,b,p=0,u=!1;if(me(e,t,o,r,a)&&3<=n){for(s=i===pe?.5*fe:function(e){return e%360*Oe}(i),b=2*fe/n,c=o+a*ve(-s),h=r+a*xe(-s),l=0;l<n;l++){if(d=o+a*ve(-(s+=b)),g=r+a*xe(-s),je(c,h,d,g,e,t,1/0,t)){if(0===ke(c,h,e,t,d,g))return we(c,h,e,t,d,g);p++}c=d,h=g}u=0!=p%2}return u},Fe=(e,t)=>!e||e&&t&&t.i>e.i?t:e;class Se{constructor(e){this.configure(e)}configure(e){var t=this;t.validatorFn=e?t.shapeValidator():t.defaultValidator()}defaultValidator(){var e=Math.pow,t=this;return function(o){var r=t.mousePoint;return!!(o&&1>=e((o.x-r.x)/t.xLimit,2)+e((o.y-r.y)/t.yLimit,2))}}shapeValidator(){var e=this;return function(t){var o,r,a,n,i,l,s,c,d,g=e.mousePoint,h=t&&t.shapeInfo,b=!1,p=g.x,u=g.y;return"circle"===(o=h&&h.type)?(a=h.radius,b=me(p,u,t.x,t.y,a)):"arc"===o?(r=h.innerradius,a=h.radius,b=!me(p,u,t.x,t.y,r)&&me(p,u,t.x,t.y,a)):"polygon"===o?(a=h.radius,i=h.startAngle,n=h.sides,b=Le(p,u,t.x,t.y,a,n,i)):"rect"===o||"rectangle"===o?(l=t.x,c=t.y,s=l+(h.width||0),d=c+(h.height||0),b=p>=l&&p<=s&&u>=c&&u<=d):"default"===o&&(b=!1),b}}buildKdTree(e){return this.kdTree=function(e){function t(e,t,o){var r=e[t];e[t]=e[o],e[o]=r}var o,r,a,n=e&&e[0]&&e[0].r||5,i=Math.max,l=Math.floor,s=Math.sqrt,c=Math.min,d=Math.log,g=Math.exp,h=Math.pow;for(r=function(e,o,a,n){for(var h,b,p,u,m,f,v,x,y,C;n>a;){for(600<n-a&&(b=o-a+1,p=d(h=n-a+1),u=.5*g(2*p/3),m=.5*s(p*u*(h-u)/h)*(0>b-h/2?-1:1),f=i(a,l(o-b*u/h+m)),v=c(n,l(o+(h-b)*u/h+m)),r(e,o,f,v)),x=e[o],y=a,C=n,t(e,a,o),e[n].x>x.x&&t(e,a,n);y<C;){for(t(e,y,C),y++,C--;e[y].x<x.x;)y++;for(;e[C].x>x.x;)C--}e[a].x===x.x?t(e,a,C):t(e,++C,n),C<=o&&(a=C+1),o<=C&&(n=C-1)}},a=function(e,o,r,n){for(var h,b,p,u,m,f,v,x,y,C;n>r;){for(600<n-r&&(b=o-r+1,p=d(h=n-r+1),u=.5*g(2*p/3),m=.5*s(p*u*(h-u)/h)*(0>b-h/2?-1:1),f=i(r,l(o-b*u/h+m)),v=c(n,l(o+(h-b)*u/h+m)),a(e,o,f,v)),x=e[o],y=r,C=n,t(e,r,o),e[n].y>x.y&&t(e,r,n);y<C;){for(t(e,y,C),y++,C--;e[y].y<x.y;)y++;for(;e[C].y>x.y;)C--}e[r].y===x.y?t(e,r,C):t(e,++C,n),C<=o&&(r=C+1),o<=C&&(n=C-1)}},o=(e=e||[]).length;o--;)e[o].r>n&&(n=e[o].r),e[o].i=o,e[o].x=+e[o].x,e[o].y=+e[o].y;return{tree:0===e.length?{}:function e(t,o,n,i){var l,s={},c=i?"y":"x";return o===n?(s.point=t[o],s):1==n-o?(t[o][c]>t[n][c]?(s.point=t[o],s.left={point:t[n]}):(s.point=t[n],s.left={point:t[o]}),s):(l=o+n>>1,i?a(t,l,o,n):r(t,l,o,n),s.point=t[l],s.left=e(t,o,l-1,!i),s.right=e(t,l+1,n,!i),s)}(e,0,e.length-1,!1),search:function(e,t,o,r){function a(e,t,o,r){return s(h(e-o,2)+h(t-r,2))}function i(r,n){return"circle"===o?a(r,n,e,t)<=m:r>=m&&r<=f&&n>=v&&n<=x}function l(e,t,o){return e>=t&&e<=o}function c(o){var r=l(e,o.x1,o.x2)&&l(t,o.y1,o.y2),n=a(e,t,o.point.x,o.point.y);return g?void(r?y?o.point.i>g.point.i&&(g=o,y=r,C=n):(g=o,y=r,C=n):!y&&n<C&&(g=o,y=r,C=n)):(g=o,y=r,void(C=n))}function d(r,a){"circle"===o?m=r:(m=e-r||0,f=e+r||0,v=t-a||0,x=t+a||0)}var g,b,p,u=this.tree,m=e-n,f=e+n,v=t-n,x=t+n,y=!1,C=0;return r=r||{},p=function(e){e&&e.point&&(d(r.rx||e.point.r,r.ry||e.point.r),i(e.point.x,e.point.y)&&c(e),v<=e.point.y&&b(e.left),x>=e.point.y&&b(e.right))},(b=function(e){e&&e.point&&(d(r.rx||e.point.r,r.ry||e.point.r),i(e.point.x,e.point.y)&&c(e),m<=e.point.x&&p(e.left),f>=e.point.x&&p(e.right))})(u),g&&g.point||g}}}(e),this.tree=this.kdTree.tree,this}getNeighbour(e,t,o){var r=this,a=r.tree,n={x1:e.x-r.xLimit,x2:e.x+r.xLimit,y1:e.y-r.yLimit,y2:e.y+r.yLimit},i=r.validatorFn;return r.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,o,e.options):a?r._searchBtwnLimit(n,a,!0,i):void 0}_searchBtwnLimit(e,t,o,r){var a,n,i=o?"x":"y",l=o?e.x1:e.y1,s=o?e.x2:e.y2;if((a=t&&t.point&&t.point[i])!==pe)return r(t.point)&&(n=t.point),a>=l&&t.left&&(n=Fe(n,this._searchBtwnLimit(e,t.left,!o,r))),a<=s&&t.right&&(n=Fe(n,this._searchBtwnLimit(e,t.right,!o,r))),n}_setSearchLimit(e,t){this.xLimit=e,this.yLimit=t}}Se.prototype.constructor=Se;var Ae=Se;let Ee,Ie=window.navigator.userAgent,_e=/msie/i.test(Ie)&&!window.opera,Pe="",Te="top",Re="bottom",Be="right",Me="left",De="middle",Ge="center",Ve=.6,Ne=window.Math,We=Ne.min,He=Ne.max,ze="items",Ye=Math.PI/180,Xe="rgba(192,192,192,"+(_e?.002:1e-6)+")",Ke=function(e,t){let o=t?Object(a.R)(e.FCcolor,t,!1,!0):{FCcolor:e};return o.toString=a.Ib,o},Je=function(e,t){let o,r=e&&e.length||!1,a=t||"id",n={};if(!e)return e;for(;r--;)(o=e[r])[a]!==Ee&&(n[o[a].toLowerCase()]=o);return n};Object(s.a)({name:"mapsAnimation",type:"animationRule",extension:W});class Ue extends ue{constructor(){super(),this.components={},this.getLabelAlignment={top:function(e,t,o){return{x:e.toString(),y:(t-o).toString(),align:Ge,valign:Te}},left:function(e,t,o){return{x:(e-o).toString(),y:t.toString(),align:Be,valign:De}},right:function(e,t,o){return{x:(e+o).toString(),y:t.toString(),align:Me,valign:De}},bottom:function(e,t,o){return{x:e.toString(),y:(t+o).toString(),align:Ge,valign:Re}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:Ge,valign:De}}},this.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*We(t,e-t)}},this.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*We(t,e-t)},bottom:function(e,t){return e-t}}}getName(){return"markers"}getType(){return"dataset"}configureAttributes(e){if(e){this.JSONData=e;let t=this,o=t.getFromEnv("chart").config.markerOpts;t.calculateDataLimits(),o.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}}calculateMarkerRadiusLimits(){if(this.JSONData){let e=this,t=e.JSONData,o=e.config,r=e.getFromEnv("chart"),a=r.config.width,n=r.config.height,i=t.markermaxradius,l=t.markerminradius,s=Ue.getMarkerRadiusLimits(a,n,i,l);o.minRadius=s.min,o.maxRadius=s.max}}calculateDataLimits(){let e,t,o,r,a,n=this.getFromEnv("chart"),i=this.config,l=(n.jsonData.markers||{})[ze]||[],s=this.getFromEnv("number-formatter"),c=1/0,d=-1/0;for(a=0,o=l.length;a<o;a++)r=(e=l[a]).value,null!==(t=s.getCleanValue(r))&&(c=We(t,c),d=He(t,d));i.min=c,i.max=d}_parseMarkers(){let e,t,o,r,n,i,l,s,c=this,d=c.getFromEnv("chart"),g=d.jsonData.markers,h=g[ze],b=g.shapes,p=d.config.markerOpts,u=this.getFromEnv("number-formatter"),m=c.components.shapeObjs={},f=c.components.markerObjs={};if(h&&h.length){if(b&&b.length)for(t=b.length;t;t-=1)(s=(r=b[t-1]).id.toLowerCase())&&(m[s]=r);for(t=h.length;t--;)(s=(r=h[t]).id&&r.id.toLowerCase())&&((e=r.value)!==Ee&&""!==e&&(e=parseFloat(e)),(n=(o=Ue._initializeMarkerItem(s,r,null,d)).config.options.shapeid)&&"string"==typeof n&&(n=n.toLowerCase()),l=(i=o.config).options,i.cleanValue=u.getCleanValue(e),i.formattedValue=null===i.cleanValue?Ee:u.dataLabels(e),i.fillColor=Object(a.vb)(l.fillcolor,l.color,p.fillColor),i.fillAlpha=Object(a.vb)(l.fillalpha,l.alpha,p.fillAlpha),i.fillRatio=Object(a.vb)(l.fillratio,p.fillRatio),i.fillAngle=Object(a.vb)(l.fillangle,p.fillAngle),i.borderThickness=Object(a.xb)(l.borderthickness,p.borderThickness),i.borderColor=Object(a.vb)(l.bordercolor,p.borderColor),i.borderAlpha=Object(a.vb)(l.borderalpha,p.borderAlpha),i.labelPadding=l.labelpadding||p.labelPadding,o.dataset=c,r.__hideMarker&&(o._isHidden=!0),n&&(o.shapeObj=m[n]),f[s]=o)}}defineMarkersNShapes(){let e,t,o,r,n,i,l,s,c=this,d=c.getFromEnv("chart"),g=d.jsonData.markers,h=g.definition,b=this.getFromEnv("number-formatter"),p=d.config.markerOpts,u=Je(h)||{},m=Je(g.application)||{},f=g.shapes,v=c.components.shapeObjs=c.components.shapeObjs||(c.components.shapeObjs={}),x=c.components.markerObjs=c.components.markerObjs||(c.components.markerObjs={});if(h&&h.length){if(f&&f.length)for(r=f.length;r;r-=1)(s=(i=f[r-1]).id.toLowerCase())&&(v[s]=i);for(s in u)i=u[s],(n=x[s]=Ue._initializeMarkerItem(s,i,m[s],d)).dataset=c,l=n.config.options.shapeid,t=n.config,o=i.value,t.cleanValue=b.getCleanValue(o),e=t.options,t.formattedValue=null===t.cleanValue?Ee:b.dataLabels(o),t.fillColor=Object(a.vb)(e.fillcolor,e.color,p.fillColor),t.fillAlpha=Object(a.vb)(e.fillalpha,e.alpha,p.fillAlpha),t.fillRatio=Object(a.vb)(e.fillratio,p.fillRatio),t.fillAngle=Object(a.vb)(e.fillangle,p.fillAngle),t.borderThickness=Object(a.xb)(e.borderthickness,p.borderThickness),t.borderColor=Object(a.vb)(e.bordercolor,p.borderColor),t.borderAlpha=Object(a.vb)(e.borderalpha,p.borderAlpha),t.labelPadding=e.labelpadding||p.labelPadding,t.options.tooltext=Object(a.vb)(e.tooltext,p.tooltext),t.link=e.link,l&&(n.shapeObj=v[l.toLowerCase()])}}static getMarkerRadiusLimits(e,t,o,r){let a=We(e,t);return r=parseFloat(r),o=parseFloat(o),isNaN(r)||isNaN(o)?isNaN(r)?isNaN(o)?{min:.02*a,max:.07*a}:{min:parseInt(o/10,10),max:o}:{min:r,max:10*r}:r<o?{min:r,max:o}:{min:o,max:r}}getDataLimits(){let e=this.config;return{min:e.min,max:e.max}}static _initializeMarkerItem(e,t,o){let r,n={},i=n.config;return i||(i=n.config={}),i.id=e,i.definition=t,i.application=o,i.hasValue=null,i.value=null,i.options=null,i.label=null,i.markerShape=null,i.markerLabel=null,i.drawOptions={shape:null,label:null},i.drawComplete=!1,r=n.config.options=Object(a.R)({},i.definition),i.dataEnabled?!isNaN(r.value)&&""!==r.value&&(n.value=parseFloat(r.value),n.hasValue=!0):i.applyAll?i.options=Object(a.R)(r,i.application):o&&(i.options=Object(a.R)(r,i.application)),n}configureConnectors(){let e,t,o,r,n,i,l,s,c,d,g,h,b,p,u=this,m=u.getFromEnv("chart"),f=m.jsonData,v=u.components,x=f.markers||{},y=x.connector||x.connectors||[],C=v.markerObjs,O=y.length,k=u.components.connectors,w=function(e){return function(t){let o=this,r=o.getElement();r&&o.unfilteredConfig.hoverEffect&&r.attr(o.unfilteredConfig._hoverAttrs),m.fireChartInstanceEvent("connectorrollover",e,t)}},j=function(e){return function(t){let o=this,r=o.getElement();r&&o.unfilteredConfig.hoverEffect&&r.attr(o.unfilteredConfig._defaultAttrs),m.fireChartInstanceEvent("connectorrollout",e,t)}},L=function(e){return function(t){m.fireChartInstanceEvent("connectorClick",e,t)}},F=m.config.connectorOpts,S={};for(k=u.components.connectors=[],p=0;p<O;p++)((b=y[p]).from||b.to)&&(t=C[b.from.toLowerCase()],o=C[b.to.toLowerCase()],t&&o)&&(r=y[p].label,(S=k[p])||(S=k[p]={}),S.config||(e=S.config={}),S.graphics||(S.graphics={}),(e=S.config=Object(a.R)({},b)).fromMarker=t,e.toMarker=o,e.link=b.link,e.showTooltip=Object(a.xb)(b.showtooltip,F.showTooltip),n=e.tooltext=e.showTooltip?Object(a.vb)(b.tooltext,F.tooltext):Pe,i=e.thickness=Object(a.vb)(b.thickness,F.thickness),l=e.color=Object(a.vb)(b.color,F.color),s=e.alpha=Object(a.vb)(b.alpha,F.alpha),e.hoverEffect=Object(a.xb)(b.showhovereffect,F.showHoverEffect),c=Object(a.vb)(b.hovercolor,F.hoverColor,l),d=Object(a.vb)(b.hoveralpha,F.hoverAlpha,s),g=Object(a.vb)(b.hoverthickness,F.hoverThickness,i),e.dashed=Object(a.vb)(b.dashed,F.dashed),e.dashLen=Object(a.xb)(b.dashlen,F.dashlen),e.dashGap=Object(a.xb)(b.dashgap,F.dashgap),n&&(e.tooltext=n=Object(a.ub)(Object(a.tb)(n,[3,40,41,42,43],{label:r,fromId:t.config.definition.id,toId:o.config.definition.id,fromLabel:t.config.definition.label,toLabel:o.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:o.config.id,label:r},e._hoverAttrs={stroke:Ke({color:c,alpha:d}).toString(),"stroke-width":g},e._defaultAttrs={stroke:Ke({color:l,alpha:s}).toString(),"stroke-width":i},e.type="line",e.onclick=L(e.eventArgs),e.onmouseover=w(e.eventArgs),e.onmouseout=j(e.eventArgs),r&&(!(h=S.labelConfig)&&(h=S.labelConfig={}),h.type="text",h.text=r,h.align=Ge,h.valign=De,h.font=F.font,h.fillcolor=F.fontColor,h.bgcolor=F.labelBgColor,h.bordercolor=F.labelBorderColor,h.tooltext=e.tooltext))}draw(){let e,t,o,r,a,n,i,l=this,s=l.getFromEnv("chart"),c=l.config,d=s.getChildren("mapAnnotations")[0],g=l.components.markerObjs,h=s.config,b=h.markerOpts,p=h.scalingParams,u=s.config.annotationConfig,m=l.getFromEnv("toolTipController"),f=[],v=[],x={};for(r in this._drawConnectors(),l.imageLoadCount=0,l.imageCount=0,i=d.addGroup(Object.assign(u,{id:"markers",fillalpha:"100",items:f,scaleimages:1}),l),n=d.addGroup(Object.assign(u,{id:"markerLabels",items:v,scaleimages:1}),l),h.labelsOnTop&&s.getChildren("mapLabelAnnotations")&&s.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront(),l.components.markerGroup=i,l.components.markerLabelGroup=n,c.autoScale=b.autoScale?p.sFactor:1,g)e=null,(o=(t=g[r]).config).conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(o._annotationIndex=f.length,x[r]=t,t.markerShape=e.markerShape&&d.addItem(i.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},e.markerShape),!0,l),(a=t.markerShape&&t.markerShape.getElement())&&m.enableToolTip(a,t.config.tooltext),f.push(t.markerShape),t.markerLabel=e.markerLabel&&d.addItem(n.getId(),Object.assign({animationLabel:"markerItem"},e.markerLabel),!0,l),v.push(t.markerLabel));l.addJob("buildKdtree",l._buildKdTree.bind(l),y.b.kdTree)}_buildKdTree(){let e,t,o=this,r=o.components.kdArrayMap,a=o.components.markerGroup,n=[],i=a&&a.items,l=i&&i.length||0;for(t=0;t<l;t++)r[e=i[t].config.id]&&n.push(r[e]);o.components.kDTree||(o.components.kDTree=new Ae(!0)),o.components.kDTree._setSearchLimit(1/0,1/0),o.components.kDTree.buildKdTree(n)}_drawMarkerItem(){let e,t,o,r,n,l,s,c,d,g,h,b,p,u,m,f,v,x,y,C,O=this,k=O.dataset,w=k.getFromEnv("chart"),j=w.config,L=k.config,F=j.scalingParams,S=O.config,A=S.options,E=S.definition,I=j.markerOpts,_=I.dataLabels.style,P=A.shapeid,T=A.scale||1,R=A.label||Pe,B=w.config.scalingParams.scaleFactor*w.config.baseScaleFactor,M=(A.labelpos||Te).toLowerCase(),D=S.formattedValue===Ee?Ee:S.formattedValue,G=A.tooltext||I.tooltext,V=Object(a.xb)(E.radius,S.radius,I.radius)*T*L.autoScale||1e-4,N=S.fillColor,W=S.fillAlpha,H=S.fillRatio,z=S.fillAngle,Y=S.borderThickness,X=S.borderColor,K=S.borderAlpha,J=k.components.kdArrayMap||(k.components.kdArrayMap={}),U=O.config.id;if(S.autoScale=I.autoScale?B:1,P)return G=G?Object(a.ub)(Object(a.tb)(G,[1,2,3],{formattedValue:D,label:R},A)):D?R+I.tooltipSepChar+D:R,D!==Ee&&null!==D?R=R+I.labelSepChar+D:isNaN(T)?T=1:0>T?T=0:5<T&&(T=5),Object(a.R)(A,{x:A.x&&A.x.toString(),y:A.y&&A.y.toString(),fillcolor:N,fillalpha:W,fillratio:H,fillangle:z,borderthickness:Y,bordercolor:X,borderalpha:K,hovereffect:Object(a.vb)(I.showHoverEffect),radius:V&&V.toString(),link:A.link,showshadow:Object(a.xb)(A.showshadow,S.shadow),_markerLabel:R,_markerId:A.id,id:(A.id+Pe).toLowerCase()}),delete A.tooltext,S.tooltext=!!I.showTooltip&&G,m=+A.x*F.sFactor+F.translateX,f=+A.y*F.sFactor+F.translateY,V=A.radius,"triangle"===P?(Object(a.R)(A,{type:"polygon",sides:3,startangle:I.startAngle}),C="polygon",y=3):"diamond"===P?(Object(a.R)(A,{type:"polygon",sides:4,startangle:I.startAngle}),C="polygon",y=4):"arc"===P?(x=V*Ve,Object(a.R)(A,{type:"arc",startangle:0,endangle:360,innerradius:x}),C="arc"):"circle"===P?(A.type="circle",C="circle"):(h=k.getShapeArgs.call(O),I.dataEnabled&&I.valueToRadius&&A.radius!==Ee?delete h.radius:(!h.radius&&(h.radius=I.radius),h.radius*=T*S.autoScale),Object(a.R)(A,h),A.id=A._markerId&&A._markerId.toLowerCase(),x=h.innerradius,h.radius&&(V=h.radius),C=h.type&&h.type.toLowerCase(),y=h.sides||5,(V=+V)&&x&&V<x&&(u=V,A.radius=V=x,A.innerradius=x=u)),A.type=A.type&&A.type.toLowerCase(),Object(a.R)(A,{hoverfillcolor:Object(a.vb)(A.fillhovercolor,I.hoverFillColor,A.fillcolor),hoverfillalpha:Object(a.vb)(A.fillhoveralpha,I.hoverFillAlpha,A.fillalpha),hoverfillratio:Object(a.vb)(A.fillhoverratio,I.hoverFillRatio,A.fillratio),hoverfillangle:Object(a.vb)(A.fillhoverangle,I.hoverFillAngle,A.fillangle),hoverborderthickness:Object(a.xb)(A.borderhoverthickness,I.hoverBorderThickness,A.borderthickness),hoverbordercolor:Object(a.vb)(A.borderhovercolor,I.hoverBorderColor,A.bordercolor),hoverborderalpha:Object(a.vb)(A.borderhoveralpha,I.hoverBorderAlpha,A.borderalpha)}),b={alpha:A.fillalpha,color:A.fillcolor,angle:360-A.fillangle,ratio:A.fillratio},p={alpha:A.hoverfillalpha,color:A.hoverfillcolor,angle:360-A.hoverfillangle,ratio:A.hoverfillratio},A._defaultattrs={fill:Object(a.Ib)(b),"stroke-width":"0"===A.showborder?0:A.borderthickness,stroke:Object(i.c)(A.bordercolor,A.borderalpha)},A._hoverattrs={fill:Object(a.Ib)(p),"stroke-width":"0"===A.showborder?0:A.hoverborderthickness,stroke:Object(i.c)(A.hoverbordercolor,A.hoverborderalpha)},"image"===A.type?(A.borderthickness=A.borderthickness||0,A.onload=function(e){let t=this.config,o=e.width,r=e.height,a={},n=(+t.x-o/(2*F.sFactor))*F.sFactor,i=(+t.y-r/(2*F.sFactor))*F.sFactor;(a=J[U]||(J[U]={})).x=n+F.translateX,a.y=i+F.translateY,a.element=O,a.shapeInfo={type:"rect",width:o,height:r},o&&r&&this.getElement().attr({x:n,y:i,width:o,height:r}),k.imageLoadCount++,k.imageLoadCount===k.imageCount&&k._buildKdTree()},A.onerror=function(){k.imageLoadCount++,k.imageLoadCount===k.imageCount&&k._buildKdTree()},k.imageCount++):((v=J[U]||(J[U]={})).x=m,v.y=f,v.element=O,v.shapeInfo={type:C,sides:y,radius:+V+A.borderthickness/2,innerradius:x}),S.drawOptions.shape=A,I.showLabels?(g=A.labelpadding||I.labelPadding,t=(e=k._getLabelOptions(M,g,A)).align,o=e.valign,r=S._labelBaseWidth,n=S._labelBaseHeight,l=S._labelXOffset,s=S._labelYOffset,c=I.labelWrapWidth?I.labelWrapWidth:k.getWrapWidth[t](r,+e.x+l),d=I.labelWrapHeight?I.labelWrapHeight:k.getWrapHeight[o](n,+e.y+s),c>g&&(c-=g),d>g&&(d-=g),S.drawOptions.label=Object(a.R)({type:"text"},{text:R,tooltext:A.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:c,wrapheight:d,fontsize:_.fontSize/F.sFactor,font:_.fontFamily,fillcolor:_.fontColor}),{markerShape:A,markerLabel:S.drawOptions.label}):{markerShape:A}}getHoverFn(){let e=this.getFromEnv("chart");return function(){let t,o,r=this.data("marker"),n=r.markerShape,i=n.unfilteredConfig,l=i._markerEventArgs,s=n.getElement(),c=s.getBBox(),d=r.config;s&&i.hovereffect&&("circle"===n.config.type&&(o={color:i.hoverfillcolor,alpha:i.hoverfillalpha,angle:360-i.hoverfillangle,ratio:i.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===n.config.rawFillPattern},i._hoverattrs.fill=Object(a.Ib)(o)),t=Object(a.R)({},i._hoverattrs),"image"===s.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),s.attr(t)),l||(l=i._markerEventArgs={x:c.x,y:c.y,scaledX:c.x/n.groupConfig.scaleX,scaledY:c.y/n.groupConfig.scaleY,chartX:c.x+c.width/2,chartY:c.y+c.height/2,id:i.id,label:i.label}),Object(D.e)(d.options.id,"markerRollOver",l,e.getFromEnv("chartInstance"),d,Ee,Ee,Ee)}}getHoverOutFn(){let e=this.getFromEnv("chart");return function(){let t,o=this.data("marker"),r=o.markerShape,n=r.getElement(),i=o.config,l=r.unfilteredConfig;n&&r.unfilteredConfig.hovereffect&&("circle"===r.config.type&&(l._defaultattrs.fill=Object(a.Ib)({alpha:r.config.rawAlpha,color:r.config.rawColor,angle:360-r.config.rawAngle,ratio:r.config.rawRatio,radialGradient:"radial"===r.config.rawFillPattern})),t=Object(a.R)({},r.unfilteredConfig._defaultattrs),"image"===n.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),n.attr(t)),Object(D.e)(i.id,"markerRollOut",r.unfilteredConfig._markerEventArgs,e.getFromEnv("chartInstance"),Ee,Ee,Ee)}}getClickFn(){let e=this;return function(t){let o=this.data("marker"),r=o.config.options,a=e.getFromEnv("chart"),n=o.markerShape,i=n.config,l=this.getBBox(),s=i._markerEventArgs;s||(s=i._markerEventArgs={x:l.x,y:l.y,scaledX:l.x/n.groupConfig.scaleX,scaledY:l.y/n.groupConfig.scaleY,chartX:l.x+l.width/2,chartY:l.y+l.height/2,id:r.id,label:r.label}),a.fireChartInstanceEvent("markerClick",s,t)}}highlightPoint(e){let t,o,r,a,n,i,l,s,c,d,g=e.element,h=this,b=h.getFromEnv("chart"),p=b.graphics,u=h.getFromEnv("animationManager"),m=p.trackerElems||(p.trackerElems={}),f=e.shapeInfo,v=h.getFromEnv("toolTipController"),x=e.x,y=e.y,C=b.config.lastHoveredPoint,O=!1;return!1===e?((o=m[t=C&&C.shapeInfo.type])&&o.hide(),void(b.config.lastHoveredPoint=null)):(r={fill:Xe,stroke:Xe},"circle"===(t=f.type)&&(t="polygon"),o=m[t],"polygon"===t?(a=f.sides||1,n=f.startAngle,l=f.radius,!o&&(O=!0),o=p.trackerElems[t]=u.setAnimation({el:p.trackerElems[t]||"polypath",container:o,attr:Object.assign({polypath:[a,x,y,l,n]},r),component:h,label:"markers"})):"rect"===t?(i=f.width,c=f.height,!o&&(O=!0),o=p.trackerElems[t]=u.setAnimation({el:p.trackerElems[t]||"rect",container:o,attr:Object.assign({x:x,y:y,width:i,height:c},r),component:h,label:"markers"})):"arc"===t&&(s=g.markerShape.config.innerRadius,n=(360-g.markerShape.config.startAngle)*Ye,d=(360-g.markerShape.config.endAngle)*Ye,l=f.radius,!o&&(O=!0),o=p.trackerElems[t]=u.setAnimation({el:p.trackerElems[t]||"ringpath",container:o,attr:Object.assign({ringpath:[x,y,l,s,d,n]},r),component:h,label:"markers"})),b.config.lastHoveredPoint=e,O&&o.click(h.getClickFn()).hover(h.getHoverFn(),h.getHoverOutFn()),o.show().data("marker",g),void v.enableToolTip(o,g.config.tooltext))}_drawConnectors(){let e,t,o,r,a,n,i,l,s=this,c=s.getFromEnv("chart"),d=c.config.annotationConfig,g=s.components.connectors||(s.components.connectors=[]),h=g.length,b=c.config.scalingParams,p=c.config.connectorOpts,u=p.showLabels,m=c.getChildren("mapAnnotations")[0],f=[],v=[],x=[];for(x.push({id:"connectorLabels",fillalpha:"100",items:v}),x.push({id:"connectors",fillalpha:"100",items:f}),m.addGroup(Object.assign(d,x[1]),s),m.addGroup(Object.assign(d,x[0]),s),t=0;t<h;t++)g[t]&&(i=g[t].config.fromMarker.config,l=g[t].config.toMarker.config,o=i.options.x,r=i.options.y,a=l.options.x,n=l.options.y,g[t].config.x=o,g[t].config.y=r,g[t].config.tox=a,g[t].config.toy=n,f.push(g[t].config),(e=m.addItem("connectors",Object.assign({animationLabel:"markerItem"},g[t].config),!0,s)).addEventListener("mouseover",g[t].config.onmouseover),e.addEventListener("mouseout",g[t].config.onmouseout),e.addEventListener("click",g[t].config.onclick),g[t].labelConfig&&u&&(g[t].labelConfig.x=((+o+ +a)/2).toString(),g[t].labelConfig.y=((+r+ +n)/2).toString(),g[t].labelConfig.fontsize=p.fontSize/(b.scaleFactor*c.config.baseScaleFactor),v.push(g[t].labelConfig),m.addItem("connectorLabels",Object.assign({animationLabel:"markerItem"},g[t].labelConfig),!0,s)))}getShapeArgs(){let e,t=this.config,o=Object(a.R)({},this.shapeObj);return t.autoScale=1,o?("polygon"===o.type?3>o.sides?o.type="circle":o.startangle=t.startAngle:"arc"===o.type&&(e=(o.radius||t.markerRadius)*t.autoScale,o.radius=e,o.innerradius=o.innerradius&&o.innerradius*t.autoScale||e*Ve),o):null}_getLabelOptions(e,t,o,r,a){let n,i,l,s=e&&e.toLowerCase();return this.getLabelAlignment[s]||(s="center"),i=+o.x,l=+o.y,n=+(n=r===Ee||a===Ee?o.radius||0:/^(top|bottom)$/gi.test(s)&&.5*a||/^(left|right)$/gi.test(s)&&.5*r||0)+ +t,this.getLabelAlignment[s](i,l,n)}addMarkerItem(e){let t,o,r,n,i,l,s=this,c=s.getFromEnv("chart"),d=e,g=s.components.markerObjs,h=s.components.shapeObjs,b=s.components.markerGroup,p=s.components.markerLabelGroup,u=c.getChildren("mapAnnotations")[0],m=s.getFromEnv("number-formatter"),f=c.config.markerOpts;if(l=d.id.toLowerCase()){if(g[l])return;delete d.value,s.imageLoadCount=0,(t=Ue._initializeMarkerItem(l,d,null)).dataset=s,i=t.config.options.shapeid,r=t.config,n=d.value,r.cleanValue=m.getCleanValue(n),e=r.options,r.formattedValue=null===r.cleanValue?Ee:m.dataLabels(n),r.fillColor=Object(a.vb)(e.fillcolor,e.color,f.fillColor),r.fillAlpha=Object(a.vb)(e.fillalpha,e.alpha,f.fillAlpha),r.fillRatio=Object(a.vb)(e.fillratio,f.fillRatio),r.fillAngle=Object(a.vb)(e.fillangle,f.fillAngle),r.borderThickness=Object(a.xb)(e.borderthickness,f.borderThickness),r.borderColor=Object(a.vb)(e.bordercolor,f.borderColor),r.borderAlpha=Object(a.vb)(e.borderalpha,f.borderAlpha),r.labelPadding=e.labelpadding||f.labelPadding,r.options.tooltext=Object(a.vb)(e.tooltext,f.tooltext),r.link=e.link,i&&(t.shapeObj=h[i&&i.toLowerCase()]),g[l]=t,o=s._drawMarkerItem.call(t),b&&p&&(t.markerShape=o.markerShape&&u.addItem(b.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},o.markerShape),!0,s),t.markerLabel=o.markerLabel&&u.addItem(p.getId(),Object.assign({animationLabel:"markerItem"},o.markerLabel),!0,s)),s._buildKdTree()}}updateMarkerItem(e,t){let o,r,n,i,l=this,s=l.getFromEnv("chart"),c=s.getChildren("mapAnnotations")[0],d=l.components.markerObjs,g=s.config.markerOpts,h={},b=d[e];if(b){for(r in o=b.config.options,Object(a.R)(o,t),l.imageLoadCount=0,n=b.config,t)h[r.toLowerCase()]=t[r]&&t[r].toString();n.fillColor=Object(a.vb)(h.fillcolor,h.color,g.fillColor),n.fillAlpha=Object(a.vb)(h.fillalpha,h.alpha,g.fillAlpha),n.fillRatio=Object(a.vb)(h.fillratio,g.fillRatio),n.fillAngle=Object(a.vb)(h.fillangle,g.fillAngle),n.borderThickness=Object(a.xb)(h.borderthickness,g.borderThickness),n.borderColor=Object(a.vb)(h.bordercolor,g.borderColor),n.borderAlpha=Object(a.vb)(h.borderalpha,g.borderAlpha),n.labelPadding=h.labelpadding||g.labelPadding,n.options.tooltext=Object(a.vb)(h.tooltext,g.tooltext),n.link=h.link,i=l._drawMarkerItem.call(b).markerShape,l._buildKdTree(),c.update(e,i)}}_removeMarkerItem(e){let t,o,r=this.components,a=r.markerObjs,n=a[e],i=r.kdArrayMap;n&&(t=n.markerShape,o=n.markerLabel,t&&t.dispose(),o&&o.dispose(),delete i[e],this._buildKdTree()),delete a[e]}getElement(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)}}var Ze=Ue;Object(s.a)({name:"mapsAnimation",type:"animationRule",extension:W});var $e=class extends l.a{getType(){return"group"}getName(){return"mapGroup"}configure(){this._mapChildren(e=>{e.configure&&e.configure()})}createContainer(){let e,t=this,o=t.getLinkedParent(),r=t.getFromEnv("animationManager");e=o.getChildContainer().plotGroup,t.getChildContainer("plotShadow")||t.addChildContainer("plotShadow",r.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("plot")||t.addChildContainer("plot",r.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:t,label:"group"}))}_transformGroup(){let e=this,t=this.getFromEnv("chart"),o=t.getFromEnv("chartInstance"),r=e.getFromEnv("animationManager"),n=t.jsonData,i=e.getChildContainer("plot"),l=e.getChildContainer("plotShadow"),s=t.config.scalingParams;i.hide(),l.hide(),t.config.entitiesReady=!1,o.addEventListener("internal.mapdrawingcomplete",function(t){t.detachHandler(),a.gb&&(o.args.link&&o.args.clickedEntityBox&&n.chart.linkedcharttransition,i&&r.setAnimation({el:i,attr:{transform:s.transformStr},component:e,label:"group"}),l&&r.setAnimation({el:l,attr:{transform:s.transformStr},component:e,label:"group"})),i.show(),l.show()}),t.checkComplete()}draw(){this.createContainer(),this._transformGroup()}getDataLimits(e){let t,o=this,r=1/0,a=-1/0,n=0,i=function(e){a=Math.max(a,e.max),r=Math.min(r,e.min)};return o._mapChildren(o=>o.getState("removed")||!1===o.getState("visible")?void(e&&(t=o.getDataLimits(e),i(t))):(n++,t=o.getDataLimits(e),void i(t))),n?o.setState("visible",!0):o.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:a,min:r}}},qe=function(e){var t,o=e.getFromEnv("dataSource"),r=o.data||{},n=o.markers;Object(a.K)(e,$e,"mapGroup"),t=e.getChildren("mapGroup")[0],Object(a.O)(t,ue,"entities",1,[r]),n?Object(a.O)(t,Ze,"markers",1,[n]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},Qe=o(26);let et,tt=function(e,t,o){let r=e[0],a=e[1],n=e[2],i=r+(t[0]-r)*o,l=a+(t[1]-a)*o,s=n+(t[2]-n)*o;return{hex:("#000000"+(i<<16|l<<8|s).toString(16)).slice(-6),rgb:[i,l,s]}};var ot=class extends l.a{constructor(){super();let e=this;e.mapByCategory=!1,e.colorArr=[],e.noValidRange=!0,e.sortLegend=!1}__setDefaultConfig(){super.__setDefaultConfig(),this.config.defaultObj={code:"CCCCCC",alpha:"100"}}getType(){return"colorComponent"}getName(){return"colorBucket"}configure(e){if(!e)return;let t,o,r,n,i,l,s,c,d,g,h,b=this,p=b.mapByCategory,u=e.numberFormatter,m=e.colorRange||{},f=Object(a.R)([],m.color),v=this.getLinkedParent(),x=b.getFromEnv("dataSource"),y=Math.min(Math.max(Object(a.xb)(x.chart.palette,0)-1,0),4),C=v.defaultPaletteOptions&&v.defaultPaletteOptions.paletteColors[y],O=Object(a.xb)(u.getCleanValue(m.maxvalue),1/0),k=Object(a.xb)(u.getCleanValue(m.minvalue),-1/0),w=b.colorArr;if(e.mapByCategory!==et&&(p=b.mapByCategory=!!+e.mapByCategory),(f=p?f.filter(e=>e.code||e.color):f.filter(e=>e.minvalue||e.maxvalue)).forEach(e=>{e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(c=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=c),e.minvalue?e.maxvalue?(g=u.getCleanValue(e.minvalue),d=u.getCleanValue(e.maxvalue),e.rangeLabel=u.dataLabels(g)+"-"+u.dataLabels(d)):(g=u.getCleanValue(e.minvalue),e.maxvalue=d=O,e.rangeLabel=d===1/0?">"+u.dataLabels(g):u.dataLabels(g)+"-"+u.dataLabels(d)):(e.minvalue=g=k,d=u.getCleanValue(e.maxvalue),e.rangeLabel=g===-1/0?"<"+u.dataLabels(d):u.dataLabels(g)+"-"+u.dataLabels(d))}),f.sort((e,t)=>+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue),f&&(t=f.length)){for(w.length=0,o=0;o<t;o+=1)s=f[o],r=Object(a.vb)(s.color,s.code,C&&C[o]),n=Object(a.vb)(s.alpha),l=Object(a.vb)(s.bordercolor),i=Object(a.vb)(s.borderalpha,100),d=Object(a.xb)(s.maxvalue),g=Object(a.xb)(s.minvalue),h=Object(a.vb)(s.label,s.displayvalue,s.rangeLabel),(r&&d>=g||p&&h)&&w.push({code:r,alpha:n||"100",oriAlpha:n,maxvalue:d,minvalue:g,label:Object(a.ub)(h),labelId:h.toLowerCase(),bordercolor:l,borderAlpha:i,name:s.name});b.sortedColorArr=b.colorArr.slice(0)}else b.noValidRange=!0,b.colorArr=[],b.sortedColorArr=[]}getColorObj(e){if(e===et)return{outOfRange:!0};let t,o=this,r=o.sortedColorArr,n=o.gradient?1:0,i=r[n];if(o.mapByCategory){for(e=Object(a.ub)(e).toLowerCase()||e.toString().toLowerCase();i;){if(i.labelId===e||i.maxvalue>=e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:n,legendItemId:i.legendItemId};i=r[n+=1]}return{outOfRange:!0}}if(o.gradient){if(o.scaleMin<=e&&o.scaleMax>=e){for(;i&&i.maxvalue<e;)i=r[n+=1];return t=(e-i.minvalue)/i.range,{code:tt(r[n-1].codeRGB,i.codeRGB,t).hex}}return{outOfRange:!0}}for(;i;){if(e<i.minvalue)return 0==n?{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:n,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha}:{code:r[n-1].code,alpha:r[n-1].alpha||"100",oriAlpha:r[n-1].oriAlpha,seriesIndex:n,name:r[n-1].name,label:r[n-1].label,outOfRange:!0,bordercolor:r[n-1].bordercolor,borderalpha:r[n-1].borderAlpha};if(e>i.maxvalue&&n==r.length-1)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:n,name:i.name,label:i.label,outOfRange:!0,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};if(i.maxvalue>=e&&i.minvalue<=e)return{code:i.code,alpha:i.alpha||"100",oriAlpha:i.oriAlpha,seriesIndex:n,name:i.name,label:i.label,bordercolor:i.bordercolor,borderalpha:i.borderAlpha};i=r[n+=1]}return r.length?void 0:{outOfRange:!0}}getColorRangeArr(e,t){var o,r,n,i,l,s,c,d,g=this.colorArr,h=[];if(!this.defaultAsigned&&(e>t&&(o=e,e=t,t=o),e<t&&(i=this.getColorObj(e),s=this.getColorObj(t),i&&s))){for(l=e,r=i.seriesIndex,n=s.seriesIndex;r<=n;r+=1)(c=Object(a.R)({},g[r])).minvalue!==l&&(c.minvalue=l),h.push(c),d=c,l=c.maxvalue;d&&(d.maxvalue=t)}return h}};let rt,at=",",nt=(e,t,o)=>{var r,a,n=Math.round,l=e.value,s=e.code,c=Object(i.a)(s),d=t.value,g=t.code,h=Object(i.a)(g);return r=d-l,a=[n(c[0]+(h[0]-c[0])/r*(o-l)),n(c[1]+(h[1]-c[1])/r*(o-l)),n(c[2]+(h[2]-c[2])/r*(o-l))],Object(i.b)(a)};var it=class extends l.a{constructor(){super(),this.colorRange={},this.valueRatio={},this.data={},this.mapByPercent=void 0}getType(){return"colorComponent"}getName(){return"gradientColorRange"}configure(e){if(!e)return;let t,o,r,a=this;for(a.data=e,a.appender="",r=a.colorRange=e.colorRange.sort(function(e,t){return e.value-t.value}),a.valueRatio=rt,a.values=[],t=0,o=r.length;t<o;t++)a.values.push(r[t].value)}getValueRatio(){var e,t,o=this.colorRange,r=o.length,a=this.valueRatio,n=o[r-1].value,i=o[0].value,l=0;if(a)return a;for(a=this.valueRatio=[],e=0;e<r;e++)t=(o[e].value-i)/(n-i),a.push(100*(t-l)),l=t;return a}getCumulativeValueRatio(){var e,t,o=this.colorRange,r=o.length,a=o[0].value,n=o[r-1].value,i=[];for(t=0;t<r;t++)e=o[t],i.push((e.value-a)/(n-a)*100);return i}getBoxFill(e){var t,o,r,n,i=this.colorRange,l=i.length,s=[];for(n=e?90:0,o=0;o<l;o++)t=i[o],s.push(t.code);return r={FCcolor:{alpha:"100,100,100",angle:n,color:s.join(at),ratio:this.getValueRatio().join(at)}},Object(a.Ib)(r)}getColorByValue(e){var t,o,r,a,n=this.values,i=this.colorRange;if(e!==rt&&null!==e){for(o=0,t=n.length;o<t;o++){if(e===n[o]){a=i[o].code;break}if(!o&&e<n[o]){r=!0;break}if(o===t-1&&e>n[o]){r=!0;break}if(e>n[o]&&e<n[o+1]){a=nt(i[o],i[o+1],e);break}}return r?void 0:a}}};function lt(e){return Object(i.j)(e||ct)||ct}let st="rgba(192,192,192,"+(a.mb?.002:1e-6)+")",ct="#000000",dt=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(a.Ib)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:st,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:st,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var r,n,l,s,c,d,g,h,b,p,u,m,f=Math.max,v=Math.min,x={},y=e.getFromEnv("number-formatter"),C=e.getFromEnv("dataSource"),O=C.dataset,k=C.data;if(o=o||{},!t)return!1;for("maps"!==e.defaultDatasetType||void 0!==o.min&&void 0!==o.max?"HeatMap"===e.getName()&&(void 0===o.min||void 0===o.max)&&(o={min:1/0,max:-1/0},O.forEach(e=>{e.data&&e.data.forEach(e=>{o.min=v(o.min,Object(a.xb)(e.value,o.min)),o.max=f(o.max,Object(a.xb)(e.value,o.max))})})):(o={min:1/0,max:-1/0},k&&k.forEach(e=>{o.min=v(o.min,Object(a.xb)(e.value,o.min)),o.max=f(o.max,Object(a.xb)(e.value,o.min))})),x.mapByPercent=u=!!Object(a.xb)(t.mapbypercent,0),r=t.color||[],void 0===t.minvalue&&(t.minvalue=void 0===o.min?0:u?0:o.min),void 0===t.maxvalue&&(t.maxvalue=void 0===o.max?100:u?100:o.max),(t.maxvalue===t.minvalue||o.min===1/0||o.max===-1/0)&&(t.minvalue=0,t.maxvalue=100),m=!1,c=0,g=r.length;c<g;c++)if(r[c].maxvalue){m=!0;break}for(m||(r=[]),l=t.code,h=x.colorRange=[],x.gradient=!!Object(a.xb)(t.gradient,1),r.length?l=lt(l):(l?(s=lt(l),l=lt()):s=function(e){return Object(i.h)(e,1)}(l=lt()),r.push({code:s,maxvalue:t.maxvalue,label:void 0})),function(t){var o,r,a,n=e.getFromEnv("number-formatter");for(o=0,r=t.length;o<r;o++)(a=t[o].maxvalue)&&(t[o].maxvalue=n.getCleanValue(a))}(r),r=r.sort(function(e,t){return e.maxvalue-t.maxvalue}),b=p=t.minvalue&&y.getCleanValue(t.minvalue),p=(void 0!==b||null!==b)&&(u?b+"%":y.legendValue(b)),h.push({code:Object(a.P)(l),value:b,displayValue:p,label:t.startlabel}),c=0,g=r.length;c<g;c++)d=lt((n=r[c]).code||n.color),b=p=n.maxvalue,!isNaN(parseInt(b,10))&&(p=(void 0!==b||null!==b)&&(u?b+"%":y.legendValue(b)),h.push({code:Object(a.P)(d),value:b,displayValue:p,label:n.label||n.displayvalue}));return h[h.length-1].label=t.endlabel||n.label,x},getDefaultConf:function(e){return t[e]}}}();var gt=class extends l.a{constructor(){super(),this.datasource={},this.config.legendItemIds=[]}configure(){let e,t,o,r=this,n=this.getFromEnv("chart"),i="maps"===n.defaultDatasetType,l="TreeMap"===n.getName(),s=this.getFromEnv("dataSource").chart.mapbycategory,c=n.getFromEnv("number-formatter"),d=n.config.showLegend,g=n.getChildren("colorRange")&&n.getChildren("colorRange")[0];n.addToEnv("colorManager",r),r.datasource=n.getFromEnv("dataSource"),e=r.datasource.colorrange,g&&g.remove({instant:!0}),d||(r.config.legendItemIds=[]),"gradient"==(t=i?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":l?"gradient":e.gradient&&"0"!=e.gradient&&!+s?"gradient":"icon")?(dt.init({chart:n}),o=dt.legacyDataParser(e),Object(a.K)(n,it,"colorRange",1,[o]),g=n.getChildren("colorRange")[0],n.addToEnv("colorRange",g),o||(g._dontPlot=!0),r.config.legendItemIds=[],r._configureGradientLegend(g)):"icon"===t?(Object(a.K)(n,ot,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(a.xb)(s,0),defaultColor:"cccccc",numberFormatter:c}]),n.addToEnv("colorRange",n.getChildren("colorRange")[0]),d&&r._addLegendItems()):"none"===t&&(n.deleteFromEnv("colorManager"),r.config.legendItemIds=[])}_configureGradientLegend(e){let t=this,o=t.getFromEnv("chart").getFromEnv("gLegend");o&&(o.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,o){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:o,component:"gradientlegend"})},o))}_addLegendItems(){let e,t,o,r,n,l=this,s=l.config,c=l.getFromEnv("chart"),d=c.getChildren("legend")[0],g=c.getFromEnv("colorRange").colorArr,h=g.length;for(r=0;r<h;r++)n={label:Object(a.vb)(g[r].label,g[r].displayvalue),datasetObj:g[r],index:r},t=Object(i.h)(g[r].code,40),e={FCcolor:{color:g[r].code+","+g[r].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(o=d.getItem(s.legendItemIds[r]))||(s.legendItemIds.push(d.createItem(l)),(o=d.getItem(s.legendItemIds[r])).addEventListener("click",o.itemClickFn)),o.removeLegendState("hidden"),g[r].legendItemId=o&&o.getId(),o.configure(n),o.setStateCosmetics("default",{symbol:{fill:Object(a.Ib)(e),rawFillColor:g[r].code}});for(r=h;r<s.legendItemIds.length;r++)d.disposeItem(s.legendItemIds[r]);s.legendItemIds.splice(h)}legendInteractivity(e){let t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})}getColor(e){let t=this,o=t.datasource.colorrange;return!+t.datasource.chart.mapbycategory&&+o.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}getValueRatio(){return this.getFromEnv("colorRange").getValueRatio()}getCumulativeValueRatio(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}getBoxFill(e){return this.getFromEnv("colorRange").getBoxFill(e)}getColorByValue(e){return this.getFromEnv("colorRange").getColorByValue(e)}getColorObj(e){return this.getFromEnv("colorRange").getColorObj(e)}};var ht=function(e){!function(e){let t=e.getChildren("colorManager");e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),t[0].configure()):(t=new gt,e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()):(t&&(t[0].config.legendItemIds=[]),e.deleteFromEnv("colorManager"))}(e)};let bt,pt,ut,mt,ft={},vt="rgba(192,192,192,"+(a.mb?.002:1e-6)+")",xt=!1,yt=!0,Ct="%",Ot=",",kt="#000000",wt={}.hasOwnProperty,jt="M",Lt="L";function Ft(e,t){return function e(t,o){var r,a;for(a in t)wt.call(t,a)&&(r=t[a],o[a]===bt?o[a]=r:"object"==typeof r&&null!==r&&e(r,o[a]))}(e,t),t}function St(e){return Object(i.j)(e||kt)||kt}function At(e){var t,o=e.fontSize+"";return o?(t=o.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function Et(e){return!(e!==bt&&void 0!==e&&null!==e&&!isNaN(e))}ft.CAPTION="CAPTION",ft.LEGEND_BODY="LEGEND_BODY",ft.AXIS_LABEL="LEGEND_LABEL",ft.LEGEND_AXIS="LEGEND_AXIS",ft.RANGE="RANGE",ft.AXIS_VALUE="AXIS_VALUE",pt=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(a.Ib)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:vt,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:vt,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,o){var r,n,l,s,c,d,g,h,b,p,u,m,f={},v=e.getFromEnv("number-formatter");if(!t)return!1;for(f.mapByPercent=u=!!Object(a.xb)(t.mapbypercent,0),r=t.color||[],t.minvalue===bt&&(t.minvalue=o.min===bt?0:u?0:o.min),t.maxvalue===bt&&(t.maxvalue=o.max===bt?100:u?100:o.max),m=!1,c=0,g=r.length;c<g;c++)if(r[c].maxvalue){m=!0;break}for(m||(r=[]),l=t.code,h=f.colorRange=[],f.gradient=!!Object(a.xb)(t.gradient,1),r.length?l=St(l):(l?(s=St(l),l=St()):s=function(e){return Object(i.h)(e,1)}(l=St()),r.push({code:s,maxvalue:t.maxvalue,label:bt})),function(t){var o,r,a,n=e.getFromEnv("number-formatter");for(o=0,r=t.length;o<r;o++)(a=t[o].maxvalue)&&(t[o].maxvalue=n.getCleanValue(a))}(r),r=r.sort(function(e,t){return e.maxvalue-t.maxvalue}),b=p=t.minvalue&&v.getCleanValue(t.minvalue),p=(b!==bt||null!==b)&&(u?b+Ct:v.legendValue(b)),h.push({code:Object(a.P)(l),value:b,displayValue:p,label:t.startlabel}),c=0,g=r.length;c<g;c++)d=St((n=r[c]).code||n.color),b=p=n.maxvalue,!isNaN(parseInt(b,10))&&(p=(b!==bt||null!==b)&&(u?b+Ct:v.legendValue(b)),h.push({code:Object(a.P)(d),value:b,displayValue:p,label:n.label||n.displayvalue}));return h[h.length-1].label=t.endlabel||n.label,f},getDefaultConf:function(e){return t[e]}}}();class It{constructor(e){this.carpet=e}draw(e){return this.carpet.draw(e)}getLogicalSpace(e,t){return this.carpet.getLogicalSpace(e,t)}dispose(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}class _t{constructor(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=bt,this.group=bt,this._lSpace=bt,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}configure(e){this.conf=e}getName(){return"LegendCarpet"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}removeCompositions(e){delete this.compositionsByCategory[e]}getBoundingBox(e){var t,o,r=this.conf,a=r.spreadFactor,n=e.refSide,i=e.alignment,l=e.refOffset,s=e.x,c=e.y;return"bottom"===this.conf.legendPosition?(t=r.width=n*a,o=e.maxOtherSide,i&&(s===bt||null===s)&&(s=(l+n)/2-t/2)):(o=r.height=n*a,t=e.maxOtherSide,i&&(c===bt||null===c)&&(c=(l+n)/2-o/2)),{width:t,height:o,x:s,y:c}}getPostCalcDecisionsH(e,t){var o,r=this.conf.padding,a=0;for(o in this.moveInstructions={},t)a+=t[o].height||0;e.height=a+2*r.v}getLogicalSpace(e,t){var o,r,a,n,i,l=this._lSpace,s=["CAPTION","LEGEND_BODY"],c=this.conf.padding,d=this.compositionsByCategory,g=0,h={},b=0;if(l&&!t)return l.isImpure=!0,l;(Et((l=this._lSpace=r=this.getBoundingBox(e)).x)||Et(l.y)||Et(l.height)||Et(l.width))&&(this.autoRecalculate=!0),(a=Ft(r,{})).height-=2*c.v,a.width-=2*c.h,a.x+=c.h,a.y+=c.v;for(let r=0;r<s.length;r++)(o=d[s[r]])&&((i=Ft(a,{})).y+=g,g=a.height*o.conf.spreadFactor,i.height=g+b,n=o.getLogicalSpace(Ft(i,{}),e,t),b=i.height-n.height,h[s[r]]=n,g=n.height);return this.getPostCalcDecisions(r,h),this._lSpace=r,r}setupDragging(){var e=this.group,t=0,o=0,r=0,n=0;e.css({cursor:"move"}),e.drag(function(a,i){t=a,o=i,e.attr({transform:"t"+(r+t)+","+(n+o)})},function(){r+=t,n+=o},a.Gb)}draw(e){var t,o,r,a=this.conf,n=["CAPTION","LEGEND_BODY"],i=this.compositionsByCategory,l=e.animationManager,s=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),r=this._lSpace,this.group=t=l.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:mt,container:s,label:"carpetGroup"}),this.node=l.setAnimation({el:this.node||"rect",attr:r,css:a.style,component:mt,container:t,label:"rect"});for(let s=0;s<n.length;s++)(o=i[n[s]])&&o.draw(a.captionAlignment,r,{animationManager:l,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return a.allowDrag&&this.setupDragging(),this.node}getPostCalcDecisions(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}getPostCalcDecisionsV(e,t){var o,r,a,n=this.conf.padding,i=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(r in this.getPostCalcDecisionsH(e,t),t)i=i<(o=t[r].width)?o:i;for(r in e.width=i+2*n.h,t)(a=i-(o=t[r].width))&&(l[r]="t"+a/2+",0")}}class Pt{constructor(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=bt,this.bound=bt,this._lSpace=bt,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){let e=arguments[1];return e.x+e.width/2}}}configure(e,t){this.rawText=e,this.conf=t}getName(){return"LegendCaption"}getType(){return"caption"}getLogicalSpace(e,t,o){var r,a,n,i,l=this.conf.padding,s=this._lSpace,c=this.rawText,d=t.gLegend.getFromEnv("chartConfig");return s&&!o?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:bt,smartText:bt}},r=t.smartLabel,c?((a=Ft(e,{})).height-=2*l.v,a.width-=2*l.h,a.x+=l.h,a.y+=l.v,r.useEllipsesOnOverflow(d.useEllipsesWhenOverflow),At(i=Ft(this.conf.style,{})),r.setStyle(this._metaStyle=i),n=r.getSmartText(c,a.width,a.height),a.height=n.height,a.width=n.width,e.height=n.height+2*l.v,e.width=n.width+2*l.h,s.node.smartText=n,s.node.logicArea=a,s.bound=e,e):s.bound)}draw(){var e,t,o,r,a,n,i,l,s,c,d,g=this.conf,h=g.bound||{};return 3<=arguments.length?(i=arguments[0],l=arguments[1],s=arguments[2]):2<=arguments.length&&(i=arguments[0],s=arguments[1]),e=s.parentLayer,d=s.animationManager,this.group=t=d.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:g.style,component:mt,container:e}),this.getLogicalSpace(l,s),c=(a=this._lSpace).node,r=a.bound,this.bound=o=d.setAnimation({el:this.bound||"rect",attr:r,css:h.style,container:t,component:mt}),n="string"==typeof i?this.LegendCaption[i.toUpperCase()].x(c.smartText,l||c.logicArea):i,this.node=d.setAnimation({el:this.node||"text",attr:{text:c.smartText.text,x:n,y:c.logicArea.y+c.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:g.style.fill},container:t,component:mt}),{group:t,bound:o,node:this.node}}dispose(){this.group.remove(),this.bound.remove(),this.node.remove()}}class Tt{constructor(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this._id="GL_BODY",this.bound=bt,this.group=bt,this.compositionsByCategory={},this._lSpace=bt,this.SC_STACK=[ft.AXIS_LABEL,ft.LEGEND_AXIS,ft.AXIS_VALUE],this.DARW_STACK=[ft.AXIS_VALUE,ft.LEGEND_AXIS,ft.AXIS_LABEL]}configure(e,t,o){this.colorRange=e,this.conf=t,this.childTextConf=o,this.compositionsByCategory={}}getName(){return"LegendBody"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}getSpaceTaken(e){return"bottom"===this.conf.legendPosition?e.height:e.width}getLogicalSpace(e,t,o){var r,a,n,i,l,s,c,d=this._lSpace,g=this.conf.padding,h=this.compositionsByCategory,b=0;if(d&&!o)return d.isImpure=!0,d;for(d=this._lSpace={bound:{height:0,width:0},node:{logicArea:bt}},(i=Ft(e,{})).height-=2*g.v,i.width-=2*g.h,i.x+=g.h,i.y+=g.v,l=this.getCompositionPlotAreaFor(i),t.colorRange=this.colorRange,s=0,c=this.SC_STACK.length;s<c;s++)(r=h[this.SC_STACK[s]])&&(a=l(n,r.conf.spreadFactor),n=r.getLogicalSpace(Ft(a,{}),t,o),b+=this.getSpaceTaken(n));return this.updateEffectivePlotArea(e,i,b),d.node.logicArea=i,d.bound=e,e}draw(){var e,t,o,r,a,n,i,l,s,c,d=this.childTextConf,g=this.conf.bound.style||{},h=this.compositionsByCategory;for(3<=arguments.length?(n=arguments[1],l=arguments[2]):2<=arguments.length&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(n,l),i=this._lSpace,this.group=a=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:d.style,container:t,component:mt}),this.bound=o=e.setAnimation({el:this.bound||"rect",attr:i.bound,css:g,container:a,component:mt}),l.colorRange=this.colorRange,l.parentLayer=a,s=0,c=this.DARW_STACK.length;s<c;s++)(r=h[this.DARW_STACK[s]])&&r.draw(l);return l.moveInstructions&&a.attr({transform:l.moveInstructions}),{bound:o,group:a}}getCompositionPlotAreaFor(e){var t,o="bottom"===this.conf.legendPosition;return t=Ft(e,{}),function(r,a){return r=r||{},o?(t.y+=r.height||0,t.height=e.height*a):(t.x+=r.width||0,t.width=e.width*a),t}}updateEffectivePlotArea(e,t,o){var r=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=o,e.height=o+2*r.v):(t.width=o,e.width=o+2*r.h)}}class Rt{constructor(e){this.conf=e,this.node=[],this._id="GL_LABELS"}configure(e){this.conf=e}getType(){return"label"}getName(){return"LegendLabel"}getEffectivePlotArea(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e}getLogicalSpace(e,t,o){var r,a,n,i,l,s,c,d,g,h,b,p,u,m,f,v,x,y,C,O,k,w,j,L=Math.max,F="bottom"===this.conf.legendPosition,S=this._lSpace,A=this.conf,E=A.padding,I=[],_=t.gLegend.getFromEnv("chartConfig"),P=[];if(S&&!o)return S.isImpure=!0,S;for(r=t.colorRange,a=t.smartLabel,h=r.getCumulativeValueRatio(),n=r.colorRange,u=(S=this._lSpace={bound:{height:0,width:0},node:{logicArea:bt,smartTexts:[]}}).node.smartTexts,d=Ft(e,{}),f=this.getEffectivePlotArea(d),j=F?f.width:f.height,a.useEllipsesOnOverflow(_.useEllipsesWhenOverflow),w=Ft(A.style,{}),At(this._metaStyle=w),a.setStyle(w),v=a.getSmartText("W"),i=0,l=n.length;i<l;i++)(g=n[i].label)?P.push({oriIndex:i,label:g}):u[i]=bt;if(0===(l=P.length))return{height:0,width:0};for(p=b=1<l?(h[P[l-1].oriIndex]-h[P[0].oriIndex])/2*j/100:L(h[P[0].oriIndex],100-h[P[0].oriIndex])/2*j/100,F?((O=a.getSmartText(P[0].label,p,f.height)).x=h[P[0].oriIndex]*f.width/100,s=O.x+O.width):((O=a.getSmartText(P[0].label,p,f.width)).y=h[P[0].oriIndex]*f.height/100,s=O.y+O.width),I.push(O.height),u[P[0].oriIndex]=O,F?((O=a.getSmartText(P[l-1].label,p,f.height)).x=h[P[l-1].oriIndex]*f.width/100,c=O.x-O.width):((O=a.getSmartText(P[l-1].label,p,f.width)).y=h[P[l-1].oriIndex]*f.height/100,c=O.y-O.width),I.push(O.height),u[P[l-1].oriIndex]=O,C=s,i=1;i<l-1;i++)g=P[i].label,k=P[i].oriIndex,O=bt,x=i+1===l-1?c:h[P[i+1].oriIndex]*j/100,y=h[P[i].oriIndex]*j/100,(b=Math.min(y-C,x-y))>2*v.width&&(F?(O=a.getSmartText(g,b,f.height)).x=h[k]*f.width/100:(O=a.getSmartText(g,b,f.width)).y=h[k]*f.height/100,C=b,I.push(O.height)),u[P[i].oriIndex]=O;return m=L.apply(Math,I),F?(f.height=m,e.height=m+2*E.v):(f.width=m,e.width=m+2*E.v),S.node.logicArea=f,S.bound=e,e}draw(){var e,t,o,r,a,n,i,l,s,c,d,g,h="bottom"===this.conf.legendPosition,b=this.conf,p=b.bound&&b.bound.style||{stroke:"none"},u={};2<=arguments.length&&arguments[1]?(r=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),g=i.animationManager,e=i.parentLayer,this.getLogicalSpace(r,i),s=(n=this._lSpace).node.logicArea,c=n.node.smartTexts,this.group=o=g.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:mt}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:n.bound,css:p,container:o,component:mt});for(let e=0;e<this.node.length;e++)this.node[e].remove();for(this.node=[],l=0,d=c.length;l<d;l++)(a=c[l])&&(h?(u.y=s.y+a.height/2,u.x=l===d-1?s.x+a.x-a.width/2:l?s.x+a.x:s.x+a.x+a.width/2):(u.x=s.x+a.height/2,u.y=l===d-1?s.y+a.y-a.width/2:l?s.y+a.y:s.y+a.y+a.width/2),this.node.push(g.setAnimation({el:"text",attr:{text:a.text,x:u.x,y:u.y,lineHeight:this._metaStyle.lineHeight,fill:b.style.fill,transform:h?"R0":"R270,"+u.x+","+u.y},container:o,component:mt})));return{group:o,bound:t,node:this.node}}}class Bt{constructor(e){this.conf=e,this._id="FL_AXIS",this.node=bt,this.group=bt,this.shadow=bt,this.markerLine=bt,this.compositionsByCategory={}}configure(e){this.conf=e}getName(){return"LegendAxis"}getType(){return"axis"}addCompositions(e,t){this.compositionsByCategory[t]=e}getLogicalSpace(){var e,t,o,r,a,n,i="bottom"===this.conf.legendPosition,l=arguments[0],s=arguments[2],c=this._lSpace,d=this.conf,g=d.padding,h=d.legendAxisHeight,b=this.compositionsByCategory,p=0;return c&&!s?(c.isImpure=!0,c):(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:bt}},(a=Ft(l,{})).height-=2*g.v,a.width-=2*g.h,a.x+=g.h,a.y+=g.v,e=h/2+d.line.offset,t=h/2,(r=b[ft.RANGE])&&(n=r.sliders.false.conf.outerCircle.rFactor*h,t+=p=Math.max(n/2-h/2,0)),i?(a.y+=p,a.height=o=t+e+p,l.height=o+2*g.v):(a.x+=p,a.width=o=t+e+p,l.width=o+2*g.v),c.node.logicArea=a,c.bound=l,l)}getDrawableAxisArea(e){var t=this.conf,o="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:o?e.width:t.legendAxisHeight,height:o?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}}preDrawingRangeParamV(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}preDrawingRangeParamH(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}preDrawingRangeParam(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}getScaleMarkerPathStrH(e,t){var o,r,a,n,i,l=Ft(e,{}),s=this.conf.line,c="",d="";for(l.x+=l.r,l.width-=2*l.r,i=l.y+l.height,o=0,r=t.length;o<r;o++)a=t[o],n=l.x+a*l.width/100,c+=jt+n+Ot+(i-s.grooveLength)+Lt+n+Ot+(i+s.offset);return c+(d+=jt+l.x+Ot+(i+s.offset)+Lt+(l.x+l.width)+Ot+(i+s.offset))}getColorGradientH(e){return{axis:e.getBoxFill(),shadow:Object(a.Ib)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}draw(){var e,t,o,r,a,n,i,l,s,c,d,g,h,b,p=this.conf,u=p.bound||{},m=p.line,f=u.style||{},v=this.compositionsByCategory;for(o in 2<=arguments.length?(t=arguments[0],g=arguments[1]):1<=arguments.length&&(g=arguments[0]),h=g.animationManager,e=g.parentLayer,a=(r=g.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,g),d=this._lSpace,this.group=i=h.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:mt}),this.bound=h.setAnimation({el:this.bound||"rect",attr:d.bound,css:f,component:mt,container:i}),c=this.getDrawableAxisArea(d.node.logicArea),s=this.getColorGradient(r),p.style.fill=s.axis,p.shadow.style.fill=s.shadow,this.node=h.setAnimation({el:this.node||"rect",attr:c,css:p.style,container:i,component:mt}),this.shadow=h.setAnimation({el:this.shadow||"rect",attr:c,css:p.shadow.style,container:i,component:mt}),b=this.getScaleMarkerPathStr(c,a),this.path=h.setAnimation({el:this.path||"path",attr:{path:b},css:m.style,container:i,component:mt}),v)n=v[o],o===ft.RANGE&&(g[(l=this.preDrawingRangeParam(c)).prop]=l[l.prop],g.key=l.prop,g.rCalcBase=l.calculationBase,g.parentLayer=i,n.draw(l.rangeStart,l.rangeEnd,g))}getScaleMarkerPathStr(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}getColorGradient(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}getScaleMarkerPathStrV(e,t){var o,r,a,n,i,l=Ft(e,{}),s=this.conf.line,c="",d="";for(l.y+=l.r,l.height-=2*l.r,n=l.x+l.width,o=0,a=t.length;o<a;o++)r=t[o],i=l.y+r*l.height/100,c+=jt+(n-s.grooveLength)+Ot+i+Lt+(n+s.offset)+Ot+i;return c+(d+=jt+(n+s.offset)+Ot+l.y+Lt+(n+s.offset)+Ot+(l.y+l.height))}getColorGradientV(e){return{axis:e.getBoxFill(!0),shadow:Object(a.Ib)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}}class Mt{constructor(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.node=bt,this.tracker=bt,this.currPos=0,this.swing=[]}configure(e,t,o){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=o,this.currPos=0,this.swing=[]}getType(){return"slider"}getName(){return"Slider"}updateSwingRange(e,t){this.swing[+e]=t}draw(e,t,o,r){var a,n,i,l,s,c,d=Math.ceil,g=r.parentLayer,h=r.animationManager,b=this.conf,p=b.outerCircle,u=b.innerCircle,m=d(p.rFactor*r.rCalcBase/2),f=d(u.rFactor*r.rCalcBase/2),v=m-f,x=this.sliderIndex;return b.outerRadius=m,b.innerRadius=f,this._scaleVal=t,u.style["stroke-width"]=v,f+=i=d(p.style["stroke-width"]/2),a=this.node=h.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:g,component:mt}),"x"===r.key?(l=o,s=e,s+=x?-f:+f):(l=e,s=o,l+=x?-f:+f),this.oCircle=h.setAnimation({el:this.oCircle||"circle",attr:{cx:l,cy:s,r:m},css:p.style,container:a,component:mt}),this.iCircle=h.setAnimation({el:this.iCircle||"circle",attr:{cx:l,cy:s,r:f},css:u.style,container:a,component:mt}),c=this.tracker=h.setAnimation({el:this.tracker||"circle",attr:{cx:l,cy:s,r:m+5,fill:vt,stroke:vt,cursor:"pointer"},container:a,component:mt}),a.attr({transform:"x"===r.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),ut.enableToolTip(c,t),this._dragAPI=n=this.getDragAPI("x"===r.key),c.undrag(),c.drag(n.dragging,n.dragStart,n.dragEnd),{translateAscending:m+i}}getDragAPI(e){var t,o,r,a,n=this,i=n.node,l=n.sliderIndex,s=n.rangeGroup,c=n.conf.innerRadius;return{dragging:function(d){var g,h,b,p,u;return d.stopPropagation(),d.preventDefault(),b=e?d.data[1]:d.data[0],l?(g=t[0]-t[1]+c,h=0):(g=0,h=t[1]-t[0]-c),(u=n.currPos+b)<g?b+=g-u:u>h&&(b-=u-h),i.attr({transform:e?"t0,"+(n.currPos+b):"t"+(n.currPos+b)+",0"}),o=b,r&&clearTimeout(r),r=setTimeout(function(){s.updateWhenInRest(n,n.currPos+b)},100),p=s.updateWhenInMove(n,n.currPos+b),n.tracker.data("__FC_tooltipText",p),a=!0,!0},dragStart:function(e){e.stopPropagation(),e.preventDefault(),t=n.swing,a=!1,s.dragStarted(n)},dragEnd:function(){var e;s.dragCompleted(n,a,n.currPos+o),a&&(r&&clearTimeout(r),r=setTimeout(function(){s.updateWhenInRest(n,n.currPos)},100),n.currPos+=o,e=t[+l]+n.currPos,s.updateRange(n,e))}}}dispose(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}class Dt{constructor(e){var t={};this._id="GL_SG1",this.conf=e,t.conf=e,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,t.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[xt]=new Mt(xt,t,this._id+"_0"),this.sliders[yt]=new Mt(yt,t,this._id+"_1")}configure(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[xt].configure(xt,t,this._id+"_0"),this.sliders[yt].configure(yt,t,this._id+"_1")}getType(){return"slider"}getName(){return"SliderGroup"}initRange(e,t){var o=e.sliderIndex;this.extremes[+o]=t}updateRange(e,t){var o=e.sliderIndex;this.sliders[!o].updateSwingRange(o,t)}reset(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[xt].configure(xt,e,this._id+"_0"),this.sliders[yt].configure(yt,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}draw(e,t,o){var r,a,n,i,l,s=Math.ceil,c=this.sliders,d=c[!1],g=c[!0],h=o.colorRange,b=h.colorRange,p=h.data.mapByPercent,u=o.gLegend.getFromEnv("number-formatter");return this._fcChart=o.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,o,r){this.getValueFormPixel=function(a){return e+(t-e)/(r-o)*a}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(o,r){var a,n,i=this.extremes;return a=o.sliderIndex?i[1]-i[0]+r:r,n=this.getValueFormPixel(a),n=t?parseFloat(n).toFixed(2)+Ct:e.legendValue(n)}},this._drawParams=[e,t,o],this.updateWhenInMove(u,p),a=d.conf.outerCircle,n=s(d.conf.innerCircle.rFactor*o.rCalcBase/2),n+=s(a.style["stroke-width"]/2),this.extremes[0]=e+n,this.extremes[1]=t-n,i=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:b[0].value,this.max=this.max?this.max:b[b.length-1].value,l=b[b.length-1].value-b[0].value,d.currPos=i*(this.min-b[0].value)/l,g.currPos=i*(this.max-b[0].value)/l-i,d.draw(e,p?u.legendPercentValue(this.min):u.legendValue(this.min),o[o.key],o),r=g.draw(t,p?u.legendPercentValue(this.max):u.legendValue(this.max),o[o.key],o),d.swing=this.extremes.slice(0),g.swing=this.extremes.slice(0),d.swing[1]+=g.currPos,g.swing[0]+=d.currPos,this.getValueFormPixel(b[0].value,b[b.length-1].value,this.extremes[0],this.extremes[1]),r}updateWhenInRest(e,t){var o,r,a=this.sliders,n=this.extremes,i=e.sliderIndex;i?(o=a[!i].currPos,r=n[1]-n[0]+t):(o=t,r=n[1]-n[0]+a[!i].currPos),this.min=+this.getValueFormPixel(o).toFixed(2),this.max=+this.getValueFormPixel(r).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}dragStarted(e){var t=this.sliders,o=this.extremes,r=e.conf,a=this._fcChart;a.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(o[1]-o[0]+t.true.currPos)}],legendPointerHeight:r.outerRadius,legendPointerWidth:r.innerRadius,outerRadius:r.outerRadius,innerRadius:r.innerRadius},[a.id])}dragCompleted(e,t,o){var r,a,n=this.sliders,i=this.extremes,l=e.conf,s=this.getValueFormPixel(n.false.currPos),c=this.getValueFormPixel(i[1]-i[0]+n.true.currPos),d=this._fcChart;e.sliderIndex?(r=s,a=this.getValueFormPixel(i[1]-i[0]+o)):(r=this.getValueFormPixel(o),a=c),t&&d.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:s,previousMaxValue:c,minValue:r,maxValue:a},[d.id]),d.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:r},{value:a}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[d.id])}dispose(){this.sliders[xt].dispose(),this.sliders[yt].dispose()}}class Gt extends Rt{constructor(){super(arguments[0]),this._id="GL_VALUES",this.node=[]}configure(e){this.conf=e}getName(){return"LegendValues"}getType(){return"legend"}getLogicalSpace(e,t,o){var r,a,n,i,l,s,c,d,g,h,b,p,u,m,f,v,x,y,C,O,k,w,j,L,F,S=Math.min,A=Math.max,E="bottom"===this.conf.legendPosition,I=this._lSpace,_=this.conf,P=_.padding,T=t.gLegend.getFromEnv("chartConfig"),R=[],B=[];if(I&&!o)return I.isImpure=!0,I;for(r=t.colorRange,a=t.smartLabel,n=r.colorRange,c=r.getCumulativeValueRatio(),F=(I=this._lSpace={bound:{height:0,width:0},node:{logicArea:bt,smartTexts:[]}}).node.smartTexts,(O=Ft(e,{})).height-=2*P.v,O.width-=2*P.h,O.x+=P.h,O.y+=P.v,a.useEllipsesOnOverflow(T.useEllipsesWhenOverflow),L=Ft(_.style,{}),At(this._metaStyle=L),a.setStyle(L),j=a.getSmartText("W"),s=n.length,E?(b=d=(c[s-1]-c[0])/2*O.width/100,w=n[0].displayValue,(i=a.getSmartText("string"!=typeof w&&w!==bt&&w.toString()||w,b,O.height)).x=c[0]*O.width/100,p=i.x+i.width,R.push(i.height)):(b=d=(c[s-1]-c[0])/2*O.height/100,(i=a.getSmartText(n[0].displayValue,O.width,b)).y=c[0]*O.height/100,f=i.y+i.width,B.push(i.width)),F[0]=i,E?((i=a.getSmartText(n[s-1].displayValue,b,O.height)).x=c[s-1]*O.width/100,m=i.x-i.width,R.push(i.height),u=p):((i=a.getSmartText(n[s-1].displayValue,O.width,b)).y=c[s-1]*O.height/100,x=i.y-i.height,B.push(i.width),v=f),F[s-1]=i,l=1;l<s-1;l++)i=bt,k=n[l].displayValue,E?(g=l+1===s-1?m:c[l+1]*O.width/100,(d=S((h=c[l]*O.width/100)-u,g-h))>1.5*j.width&&((i=a.getSmartText(k,2*d,O.height)).x=c[l]*O.width/100,u=d,R.push(i.height))):(g=l+1===s-1?x:c[l+1]*O.height/100,(d=S((h=c[l]*O.height/100)-v,g-h))>2*j.height&&((i=a.getSmartText(k,O.width,2*d)).y=c[l]*O.height/100,v=d,B.push(i.width))),F[l]=i;return E?(y=A.apply(Math,R),O.height=y,e.height=y+2*P.v):(C=A.apply(Math,B),O.width=C,e.width=C+2*P.h),I.node.logicArea=O,I.bound=e,e}draw(){var e,t,o,r,a,n,i,l,s,c,d,g,h,b=this.conf,p="bottom"===b.legendPosition,u=b.bound&&b.bound.style||{stroke:"none"},m={};2<=arguments.length&&arguments[1]?(r=arguments[0],i=arguments[1]):1<=arguments.length&&(i=arguments[0]),h=i.animationManager,e=i.parentLayer,l=i.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(r,i),n=(a=this._lSpace).node.logicArea,d=a.node.smartTexts,this.group=o=h.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:mt}),this.bound=t=h.setAnimation({el:this.bound||"rect",attr:a.bound,css:u,container:o,component:mt});for(let e=0;e<this.node.length;e++)this.node[e].remove();for(this.node=[],s=0,c=l.length;s<c;s++)(g=d[s])&&(p?(m.y=n.y+g.height/2,m.x=s===c-1?n.x+g.x-g.width/2:s?n.x+g.x:n.x+g.x+g.width/2):(m.x=n.x+g.width/2,m.y=s===c-1?n.y+g.y-g.height/2:s?n.y+g.y:n.y+g.y+g.height/2),this.node.push(h.setAnimation({el:"text",attr:{text:g.text,x:m.x,y:m.y,lineHeight:this._metaStyle.lineHeight,fill:b.style.fill},container:o,component:mt})));return{group:o,bound:t}}}var Vt=class extends l.a{getType(){return"gradientLegend"}getName(){return"gLegend"}constructor(){super(),mt=this,this.enabled=!1,this.drawOptions={},this.components={}}setColorRange(e){let t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}configureAttributes(){var e,t,o,r,n,l,s,c,d,g,h=this,b=h.getFromEnv("chart"),p=h.getFromEnv("dataSource").chart,u=h.conf={},m=p.outcnvbasefont,f=p.outcnvbasefontsize,v=p.outcnvbasefontcolor,x=b.config.dataLabelStyle;pt.init({chart:b}),h.data=h.getFromEnv("dataSource").colorrange,h._dontPlot||(h.drawOptions={smartLabel:h.getFromEnv("smartLabel"),gLegend:h},h._dontPlot=!1,h._recalculateLogicalSpace=!0,ut=h.getFromEnv("toolTipController"),u.caption=Object(a.vb)(p.legendcaption),u.legendPosition=Object(a.vb)(p.legendposition,"bottom").toLowerCase(),u.showLegend=Object(a.xb)(p.showlegend,1),u.interactiveLegend=Object(a.xb)(p.interactivelegend,1),u.showLegendLabels=Object(a.xb)(p.showlegendlabels,1),e=p.legenditemfontcolor||v,t=p.legenditemfont||m,o=p.legenditemfontsize||f,r=Object(a.xb)(p.legenditemfontbold,0),n=p.legendcaptionfontcolor||v,l=p.legendcaptionfont||m,s=p.legendcaptionfontsize||f,c=Object(a.xb)(p.legendcaptionfontbold,1),g=(d=p.legendaxisbordercolor?Object(a.ib)(Object(a.P)(p.legendaxisbordercolor)):bt)?Object(a.xb)(p.legendaxisborderalpha,100)/100:bt,u.axisTextItemConf={style:{fill:e?Object(i.c)(Object(a.vb)(e)):x.color,fontFamily:t?Object(a.vb)(t):x.fontFamily,fontSize:o?Object(a.xb)(o):x.fontSize.match(/\d+/)[0],fontWeight:r?"bold":x.fontWeight}},u.legendCaptionConf={style:{fill:n?Object(i.c)(Object(a.vb)(n)):x.color,fontFamily:l?Object(a.vb)(l):x.fontFamily,fontSize:s?Object(a.xb)(s):x.fontSize.match(/\d+/)[0],fontWeight:c?"bold":x.fontWeight,fontStyle:"normal"}},u.legendAxisConf={legendAxisHeight:11,style:{stroke:d,"stroke-opacity":g},line:{style:{stroke:Object(i.c)(Object(a.vb)(p.legendscalelinecolor,"FFF8E9"),Object(a.xb)(p.legendscalelinealpha,100)),"stroke-width":Object(a.xb)(p.legendscalelinethickness)}}},u.sliderGroupConf={showTooltip:Object(a.xb)(p.showtooltip,1),outerCircle:{rFactor:Object(a.xb)(p.sliderdiameterfactor),style:{stroke:Object(i.c)(Object(a.vb)(p.legendpointerbordercolor,"757575"),Object(a.xb)(p.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(a.xb)(p.sliderholediameterfactor),style:{stroke:Object(i.c)(Object(a.vb)(p.legendpointercolor,"FFFFFF"),Object(a.xb)(p.legendpointeralpha,100))}}},u.legendCarpetConf={spreadFactor:Object(a.xb)(p.legendspreadfactor),allowDrag:!!Object(a.xb)(p.legendallowdrag,0),captionAlignment:Object(a.vb)(p.legendcaptionalignment,"center"),style:{fill:Object(i.c)(Object(a.vb)(p.legendbgcolor,"e4d9c1"),Object(a.xb)(p.legendbgalpha,100)),stroke:Object(i.c)(Object(a.vb)(p.legendbordercolor,"c4b89d"),Object(a.xb)(p.legendborderalpha,100)),"stroke-width":Object(a.xb)(p.legendborderthickness,1)}})}postConfigureInit(){var e,t,o,r,a,n,i,l,s,c,d,g=this,h=g.conf;g.elem={},h.interactiveLegend?(r=Ft(pt.getDefaultConf("sliderGroupConf"),h.sliderGroupConf),this.sGroup?((o=g.elem.sGroup=this.sGroup).configure(r),g.elem.sGroup.gLegend=g):(this.sGroup=g.elem.sGroup=o=new Dt(r),o.configure(r),g.elem.sGroup.gLegend=g)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(r=Ft(pt.getDefaultConf("legendCarpetConf"),h.legendCarpetConf)).legendPosition=h.legendPosition,d=pt.getDefaultConf("legendBodyConf"),"bottom"===h.legendPosition?(g.drawOptions.refSideKey="canvasWidth",g.drawOptions.refOffsetKey="canvasLeft",a=Ft(pt.getDefaultConf("axisTextItemConf"),h.axisTextItemConf),d.legendPosition="bottom",(c=Ft(pt.getDefaultConf("legendAxisConf"),h.legendAxisConf)).legendPosition="bottom",a.legendPosition="bottom"):(g.drawOptions.refSideKey="canvasHeight",g.drawOptions.refOffsetKey="canvasTop",a=Ft(pt.getDefaultConf("axisTextItemConf"),h.axisTextItemConf),d.legendPosition="right",(c=Ft(pt.getDefaultConf("legendAxisConf"),h.legendAxisConf)).legendPosition="right",a.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new _t,this.components.LegendBody=new Tt,this.components.LegendAxis=new Bt,this.components.LegendValues=new Gt,h.showLegendLabels&&(this.components.LegendLabels=new Rt)),t=this.components.LegendAxis,l=this.components.LegendValues,e=this.components.LegendCarpet,n=this.components.LegendBody,h.showLegendLabels&&(i=this.components.LegendLabels),this.components.LegendCarpet.configure(r),this.components.LegendValues.configure(a),this.components.LegendAxis.configure(c),this.components.LegendBody.configure(g.drawOptions.colorRange,d,a),h.showLegendLabels&&i.configure(a),h.caption?(s=Ft(pt.getDefaultConf("legendCaptionConf"),h.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(h.caption,s):(this.componentCaption=new Pt).configure(h.caption,s),e.addCompositions(this.componentCaption,ft.CAPTION)):(e.removeCompositions(ft.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),o&&t.addCompositions(o,ft.RANGE),i&&n.addCompositions(i,ft.AXIS_LABEL),n.addCompositions(t,ft.LEGEND_AXIS),n.addCompositions(l,ft.AXIS_VALUE),e.addCompositions(n,ft.LEGEND_BODY),g.elem.gl=new It(e)}getValueRange(){var e,t,o=this.elem&&this.elem.sGroup,r=o.sliders,a=o.extremes;return e=r.false.currPos,t=a[1]-a[0]+r.true.currPos,[{min:o.getValueFormPixel(e),max:o.getValueFormPixel(t)}]}_dispose(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},super._dispose()}getCalculatedLogicalSpace(){return this._logicalArea}setCalculatedLogicalSpace(e){this._logicalArea=e}getLogicalSpace(e){var t,o,r,a=this,n=a.conf,i={height:0,width:0},l=a.drawOptions,s=a.getFromEnv("chartConfig");return a._recalculateLogicalSpace?a._dontPlot?i:(a._recalculateLogicalSpace=!1,a.postConfigureInit(),n.showLegend?(o=l.refSideKey,r=l.refOffsetKey,a.drawOptions.refSide=s[o],a.drawOptions.refOffset=s[r],a.drawOptions.maxOtherSide=e||a.drawOptions.maxOtherSide,a.elem.gl&&(t=a.elem.gl.getLogicalSpace(a.drawOptions,!0),a.elem.gl&&a.setCalculatedLogicalSpace(t)),a.getCalculatedLogicalSpace()):i):(o=l.refSideKey,r=l.refOffsetKey,a.drawOptions.refSide=s[o],a.drawOptions.refOffset=s[r],a.drawOptions.maxOtherSide=e||a.drawOptions.maxOtherSide,t=a.elem.gl.getLogicalSpace(a.drawOptions,!0),a.setCalculatedLogicalSpace(t),a.getCalculatedLogicalSpace()||i)}resetLegend(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()}allocatePosition(){var e,t,o,r,a,n,i=this.getFromEnv("chart"),l=i.config,s=this.conf||{},c=s.legendPosition,d=l.canvasLeft,g=l.canvasTop,h=l.canvasWidth,b=l.canvasHeight,p=l.marginBottom,u=l.marginRight;i.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),o=s.width=e.width,r=s.height=e.height,"bottom"===c?(a=d+(0>(t=h-o)?0:t/2),n=l.height-e.height-p-(l.actionBarHeight||0)):(n=g+(0>(t=b-r)?0:t/2),a=l.width-e.width-u),s.xPos=a,s.yPos=n)}draw(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,o=this.conf||{},r=e.hasGradientLegend;!e.config.gLegendEnabled||t&&r&&this.drawLegendComponent(o.xPos,o.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}drawLegendComponent(e,t,o){var r,a=this,n=a.conf;return a._dontPlot?void 0:n.showLegend?(a.drawOptions.animationManager=o.animationManager,a.drawOptions.parentGroup=o.parentGroup,a.drawOptions.x=e,a.drawOptions.y=t,a.drawOptions.maxOtherSide=a.drawOptions.maxOtherSide||o.maxOtherSide,r=a.elem.gl.draw(a.drawOptions).getBBox(),n.xPos=r.x,n.yPos=r.y,n.height=r.height,n.width=r.width,void(a.enabled=!0)):void(a.enabled=!1)}};var Nt=function(e){!function(e){let t,o=e.getFromEnv("dataSource").colorrange,r=e.getFromEnv("dataSource").chart.mapbycategory,n="maps"===e.defaultDatasetType,i="TreeMap"===e.getName(),l=e.getFromEnv("legend"),s=e.getFromEnv("gLegend");"gradient"==(t=o&&e.config.showLegend?n?o.gradient&&+o.gradient?"gradient":o.color?"icon":"none":i?o.gradient&&"0"!=o.gradient?"gradient":"none":o.gradient&&"0"!=o.gradient&&!+r?"gradient":"icon":"none")?(e.deleteFromEnv("legend"),l&&l.remove(),Object(a.K)(e,Vt,"gLegend",1),(s=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",s)):"icon"===t?(e.deleteFromEnv("gLegend"),s&&s.remove(),Object(a.K)(e,P,"legend",1,{showLegend:!0}),(l=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",l)):"none"===t&&(e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),s&&s.remove(),l&&l.remove())}(e)};let Wt,Ht=Object(V.c)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},B),zt="0,100",Yt={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},Xt={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){let e,t,o,r,a,n,i,l=this.jsVars.instanceAPI.getDatasets()||[],s=l.length,c=[];for(e=0;e<s;e++)if("entities"===(i=(o=l[e]||[]).getName())){t=o;break}for(e in s=(r=t.components.data).length,r)r.hasOwnProperty(e)&&(n=(a=r[e]||{}).config||{},c.push({id:n.id,originalId:n.originalId||n.id,label:n.label,shortlabel:n.shortLabel,value:n.value,formattedValue:n.formattedValue,toolText:n.toolText}));return c},getMapAttribute:function(){return Object(D.f)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){let e=this;return Object(D.f)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){let t,o,r,a,n=this.jsVars.instanceAPI.getDatasets()||[],i=n.length;for(t=0;t<i;t++)if("markers"===(a=(o=n[t]||[]).getName())){r=o;break}r&&!r.addMarkerItem(e)&&Object(D.f)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){let o,r,a,n,i=this.jsVars.instanceAPI.getDatasets()||[],l=i.length;for(o=0;o<l;o++)if("markers"===(n=(r=i[o]||[]).getName())){a=r;break}a&&e&&(e=(e+Ut).toLowerCase(),a.updateMarkerItem(e,t))},removeMarker:function(e){let t,o,r,a,n=this.jsVars.instanceAPI.getDatasets()||[],i=n.length;for(t=0;t<i;t++)if("markers"===(a=(o=n[t]||[]).getName())){r=o;break}e&&(e=(e+Ut).toLowerCase(),r._removeMarkerItem(e))}},Kt="none",Jt=", ",Ut="",Zt="bottom",$t="circle",qt=window.Math,Qt=qt.min,eo=qt.max,to=function(e,t){let o=Object(a.bb)(t.getFromEnv("chart-container"),e),r=o.chartX,n=o.chartY,i=t.config,l=i.canvasLeft,s=i.canvasTop,c=i.canvasLeft+i.canvasWidth,d=i.canvasHeight+i.canvasTop;return o.insideCanvas=!1,o.originalEvent=e,r>l&&r<c&&n>s&&n<d&&(o.insideCanvas=!0),o};class oo extends l.a{constructor(e,t){for(var o in super(),this.subpalette="",this.key="",this.index=t,e)this.subpalette=Ht[e[o]],this[o]=this.subpalette instanceof Array?this.subpalette[t]:this.subpalette,this.key=o}}class ro extends R{constructor(){super(),this.friendlyName="Map",this.revision=1,this.hasCanvas=!0,this.standaloneInit=!1,this.defaultDatasetType="maps",this.defaultSeriesType="geo",this.fireGroupEvent=!0,this.legendposition="right",this.hasGradientLegend=!0,this.isMap=!0,this.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[zt,zt,zt,zt,zt],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},this.colorPaletteMap=Yt,this.eiMethods=Xt,this.registerFactory("legend",Nt,["canvas"]),this.registerFactory("axis",()=>{},["canvas"]),this.registerFactory("colormanager-decider",ht,["legend"]),this.registerFactory("dataset",qe,["colormanager-decider"]),this.registerFactory("canvas",Qe.a)}_checkInvalidSpecificData(){return this.config.invalid=!1,!1}__setDefaultConfig(){var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}static getName(){return"maps"}static getType(){return"chartAPI"}getName(){return this.config.name||"GEO"}getType(){return"chartAPI"}configureAttributes(e){let t,o=this,r=o.getChildren("colorPalette")&&o.getChildren("colorPalette")[0];t=e.chart=e.chart||e.graph||e.map||{},o.jsonData=e,Object(a.K)(o,G.a,"mapAnnotations"),r||(r=new oo(this.colorPaletteMap,(0<t.palette&&6>t.palette?t.palette:Object(a.xb)(o.paletteIndex,1))-1),o.attachChild(r,"colorPalette")),o.config.skipCanvasDrawing=!0,super.configureAttributes(e),o._parseBackgroundCosmetics()}parseChartAttr(e){let t,o,r,n,i,l=this,s=l.jsonData,c=s.chart||s.map,d=s.markers,g=new oo(this.colorPaletteMap,(0<c.palette&&6>c.palette?c.palette:Object(a.xb)(l.paletteIndex,1))-1),h=Object(a.vb)(c.entitybordercolor,c.bordercolor,g.plotbordercolor),b=Object(a.vb)(c.entityfillcolor,c.fillcolor,g.plotfillcolor),p=Object(a.vb)(c.entityfillalpha,c.fillalpha,g.plotfillalpha),u=Object(a.vb)(c.entityfillratio,c.fillratio,g.plotfillratio),m=Object(a.vb)(c.entityfillangle,c.fillangle,g.plotfillangle),f=Object(a.vb)(c.nullentityfillcolor,c.nullentitycolor,b),v=Object(a.xb)(c.usevaluesformarkers,s.markers&&s.markers.items&&s.markers.items.length,!(s.markers&&s.markers.application&&s.markers.application.length&&s.markers.definition&&s.markers.definition.length));super.parseChartAttr(e),(t=l.config).origMarginTop=Object(a.xb)(c.charttopmargin,c.maptopmargin,11),t.origMarginLeft=Object(a.xb)(c.chartleftmargin,c.mapleftmargin,11),t.origMarginBottom=Object(a.xb)(c.chartbottommargin,c.mapbottommargin,11),t.origMarginRight=Object(a.xb)(c.chartrightmargin,c.maprightmargin,11),t.labelsOnTop=Object(a.xb)(c.entitylabelsontop,1),o=(i=t.style).inCancolor,r=i.inCanfontFamily,n=i.inCanfontSize,t.entityOpts={baseScaleFactor:t.baseScaleFactor,dataLabels:{style:{fontFamily:r,fontSize:n,lineHeight:i.inCanLineHeight,color:i.inCancolor}},fillColor:b,fillAlpha:p,fillRatio:u,fillAngle:m,borderColor:h,borderAlpha:Object(a.vb)(c.entityborderalpha,c.borderalpha,l.borderAlpha,"100"),borderThickness:Object(a.xb)(c.showentityborder,c.showborder,1)?Object(a.xb)(c.entityborderthickness,c.borderthickness,1):0,scaleBorder:Object(a.xb)(c.scaleentityborder,c.scaleborder,0),hoverFillColor:Object(a.vb)(c.entityfillhovercolor,c.hoverfillcolor,c.hovercolor,g.plothoverfillcolor),hoverFillAlpha:Object(a.vb)(c.entityfillhoveralpha,c.hoverfillalpha,c.hoveralpha,g.plothoverfillalpha),hoverFillRatio:Object(a.vb)(c.entityfillhoverratio,c.hoverfillratio,c.hoverratio,g.plothoverfillratio),hoverFillAngle:Object(a.vb)(c.entityfillhoverangle,c.hoverfillangle,c.hoverangle,g.plothoverfillangle),hoverBorderThickness:Object(a.vb)(c.entityborderhoverthickness,c.hoverborderthickness),hoverBorderColor:Object(a.vb)(c.entityborderhovercolor,h,g.plotbordercolor),hoverBorderAlpha:Object(a.vb)(c.entityborderhoveralpha,g.plotborderalpha),nullEntityColor:f,nullEntityAlpha:Object(a.vb)(c.nullentityfillalpha,c.nullentityalpha,p),nullEntityRatio:Object(a.vb)(c.nullentityfillratio,c.nullentityratio,u),nullEntityAngle:Object(a.vb)(c.nullentityfillangle,c.nullentityangle,m),connectorColor:Object(a.vb)(c.labelconnectorcolor,c.connectorcolor,o),connectorAlpha:Object(a.vb)(c.labelconnectoralpha,c.connectoralpha,"100"),connectorThickness:Object(a.xb)(c.labelconnectorthickness,c.borderthickness,1),showHoverEffect:Object(a.xb)(c.showentityhovereffect,c.usehovercolor,c.showhovereffect,1),hoverOnNull:Object(a.xb)(c.hoveronnull,c.entityhoveronnull,1),labelPadding:Object(a.xb)(c.labelpadding,5),showLabels:Object(a.xb)(c.showlabels,1),labelsOnTop:Object(a.xb)(c.entitylabelsontop,1),includeNameInLabels:Object(a.xb)(c.includenameinlabels,1),includeValueInLabels:Object(a.xb)(c.includevalueinlabels,0),useSNameInTooltip:Object(a.xb)(c.usesnameintooltip,0),useShortName:Object(a.xb)(c.usesnameinlabels,1),labelSepChar:Object(a.vb)(c.labelsepchar,Jt),showTooltip:Object(a.xb)(c.showentitytooltip,c.showtooltip,1),tooltipSepChar:Object(a.vb)(c.tooltipsepchar,", "),tooltext:c.entitytooltext,hideNullEntities:Object(a.xb)(c.hidenullentities,0),showHiddenEntityBorder:Object(a.xb)(c.showhiddenentityborder,1),showNullEntityBorder:Object(a.xb)(c.shownullentityborder,1),hiddenEntityColor:Object(a.vb)(c.hiddenentitycolor,c.hiddenentityfillcolor,c.hiddenentityalpha||c.hiddenentityfillalpha?f:"ffffff"),hiddenEntityAlpha:Object(a.vb)(c.hiddenentityalpha,c.hiddenentityfillalpha,.001),shadow:Object(a.xb)(c.showshadow,l.defaultPlotShadow,g.shadow)},t.markerOpts={dataLabels:{style:{fontFamily:Object(a.vb)(c.markerfont,r),fontSize:Object(a.xb)(c.markerfontsize,parseInt(n,10)),fontColor:Object(a.vb)(c.markerfontcolor,o)}},showTooltip:Object(a.xb)(c.showmarkertooltip,c.showtooltip,1),showLabels:Object(a.xb)(c.showmarkerlabels,c.showlabels,1),showHoverEffect:Object(a.xb)(c.showmarkerhovereffect,1),labelPadding:Object(a.vb)(c.markerlabelpadding,"5"),labelWrapWidth:Object(a.xb)(c.markerlabelwrapwidth,0),labelWrapHeight:Object(a.xb)(c.markerlabelwrapheight,0),fillColor:Object(a.vb)(c.markerfillcolor,c.markerbgcolor,g.markerfillcolor),fillAlpha:Object(a.vb)(c.markerfillalpha,g.markerfillalpha),fillAngle:Object(a.vb)(c.markerfillangle,g.markerfillangle),fillRatio:Object(a.vb)(c.markerfillratio,g.markerfillratio),fillPattern:Object(a.vb)(c.markerfillpattern,g.markerbgpattern),hoverFillColor:c.markerfillhovercolor,hoverFillAlpha:c.markerfillhoveralpha,hoverFillRatio:c.markerfillhoverratio,hoverFillAngle:c.markerfillhoverangle,borderThickness:Object(a.vb)(c.markerborderthickness,1),borderColor:Object(a.vb)(c.markerbordercolor,g.markerbordercolor),borderAlpha:Object(a.xb)(c.markerborderalpha,g.markerborderalpha),hoverBorderThickness:c.markerborderhoverthickness,hoverBorderColor:c.markerborderhovercolor,hoverBorderAlpha:c.markerborderhoveralpha,radius:Object(a.xb)(c.markerradius&&Object(a.Kb)(c.markerradius),7),shapeId:Object(a.vb)(c.defaultmarkershape,$t),labelSepChar:Object(a.vb)(c.labelsepchar,Jt),tooltipSepChar:Object(a.vb)(c.tooltipsepchar,", "),autoScale:Object(a.xb)(c.autoscalemarkers,0),tooltext:Object(a.vb)(d&&d.tooltext,c.markertooltext),dataEnabled:v,valueToRadius:Object(a.xb)(c.markerradiusfromvalue,1),valueMarkerAlpha:Object(a.vb)(c.valuemarkeralpha,"75"),hideNull:Object(a.xb)(c.hidenullmarkers,0),nullRadius:Object(a.xb)(c.nullmarkerradius,c.markerradius,7),adjustViewPort:Object(a.xb)(c.adjustviewportformarkers,0),startAngle:Object(a.xb)(c.markerstartangle,90),maxRadius:Object(a.xb)(c.maxmarkerradius,0),minRadius:Object(a.xb)(c.minmarkerradius,0),applyAll:Object(a.xb)(c.applyallmarkers,0),shadow:Object(a.xb)(c.showmarkershadow,c.showshadow,0)},t.connectorOpts={showHoverEffect:Object(a.xb)(c.showconnectorhovereffect,1),thickness:Object(a.xb)(c.connectorthickness,c.markerconnthickness,"2"),color:Object(a.vb)(c.connectorcolor,c.markerconncolor,g.markerbordercolor),alpha:Object(a.vb)(c.connectoralpha,c.markerconnalpha,"100"),hoverThickness:Object(a.xb)(c.connectorhoverthickness,c.connectorthickness,c.markerconnthickness,"2"),hoverColor:Object(a.vb)(c.connectorhovercolor,c.connectorcolor,c.markerconncolor,g.markerbordercolor),hoverAlpha:Object(a.vb)(c.connectorhoveralpha,c.connectoralpha,c.markerconnalpha,"100"),dashed:Object(a.xb)(c.connectordashed,c.markerconndashed,0),dashLen:Object(a.xb)(c.connectordashlen,c.markerconndashlen,3),dashGap:Object(a.xb)(c.connectordashgap,c.markerconndashgap,2),font:Object(a.vb)(c.connectorfont,c.markerconnfont,r),fontColor:Object(a.vb)(c.connectorfontcolor,c.markerconnfontcolor,o),fontSize:Object(a.xb)(c.connectorfontsize,c.markerconnfontsize,parseInt(n,10)),showLabels:Object(a.xb)(c.showconnectorlabels,c.showmarkerlabels,c.showlabels,1),labelBgColor:Object(a.vb)(c.connectorlabelbgcolor,c.markerconnlabelbgcolor,g.plotfillcolor),labelBorderColor:Object(a.vb)(c.connectorlabelbordercolor,c.markerconnlabelbordercolor,g.markerbordercolor),shadow:Object(a.xb)(c.showconnectorshadow,c.showmarkershadow,c.showshadow,0),showTooltip:Object(a.xb)(c.showconnectortooltip,c.showmarkertooltip,c.showtooltip,1),tooltext:Object(a.vb)(d&&d.connectortooltext,c.connectortooltext),hideOpen:Object(a.xb)(c.hideopenconnectors,1)},t.adjustViewPortForMarkers=Object(a.xb)(c.adjustviewportformarkers,v)}_attachMouseEvents(){let e=this,t=e.getFromEnv("eventListeners"),o=e.getFromEnv("chart-container");M.a.unlisten(o,a.hb?"touchstart":"mousemove",ro.searchMouseMove),t.push(M.a.listen(o,"touchstart mousemove",ro.searchMouseMove,e))}static searchMouseMove(e){let t,o=e.data,r=o.config,a={};!o.getFromEnv("chart-container")||(t=to(e,o))&&t.insideCanvas&&(r.lastMouseEvent=e,a={x:t.chartX,y:t.chartY},o._searchNearestNeighbour(a))}_searchNearestNeighbour(e){let t,o=this,r=o.getDatasets()[1];if(r){if(!r.components.kDTree)return;(t=r.getElement(e))?o.config.lastHoveredPoint!==t&&r.highlightPoint(t):r.highlightPoint(!1)}}_createLayers(){super._createLayers(),this._attachMouseEvents()}_parseBackgroundCosmetics(){let e,t=this,o=t.getChildren("background")[0].config,r=t.getChildren("colorPalette")[0],n=t.getFromEnv("chart-attrib");e=o.showBorder=Object(a.xb)(n.showcanvasborder,1),o.borderWidth=e?Object(a.xb)(n.canvasborderthickness,1):0,o.borderRadius=o.borderRadius=Object(a.xb)(n.canvasborderradius,0),o.borderDashStyle=o.borderDashStyle=Object(a.xb)(n.borderdashed,0)?Object(a.W)(Object(a.xb)(n.borderdashlen,4),Object(a.xb)(n.borderdashgap,2)):Kt,o.borderAlpha=Object(a.vb)(n.canvasborderalpha,r.borderAlpha),o.borderColor=o.borderColor=Object(i.c)(Object(a.vb)(n.canvasbordercolor,r&&r.borderColor),o.borderAlpha)}_getBackgroundCosmetics(){let e=this,t=e.getFromEnv("chart-attrib")||e.jsonData.map,o=e.getChildren("colorPalette")[0];return{FCcolor:{color:Object(a.vb)(t.bgcolor,t.canvasbgcolor,o.bgcolor),alpha:Object(a.vb)(t.bgalpha,t.canvasbgalpha,o.bgalpha),angle:Object(a.vb)(t.bgangle,t.canvasbgangle,o.bgangle),ratio:Object(a.vb)(t.bgratio,t.canvasbgratio,o.bgratio)}}}_parseCanvasCosmetics(){super._parseCanvasCosmetics();let e=this,t=e.config,o=e.getFromEnv("chart-attrib")||e.jsonData.map,r=e.getChildren("canvas")[0].config;t.origMarginTop=Object(a.xb)(o.maptopmargin,11),t.origMarginLeft=Object(a.xb)(o.mapleftmargin,11),t.origMarginBottom=Object(a.xb)(o.mapbottommargin,11),t.origMarginRight=Object(a.xb)(o.maprightmargin,11),t.origCanvasLeftMargin=Object(a.xb)(o.canvasleftmargin,0),t.origCanvasRightMargin=Object(a.xb)(o.canvasrightmargin,0),t.origCanvasTopMargin=Object(a.xb)(o.canvastopmargin,0),t.origCanvasBottomMargin=Object(a.xb)(o.canvasbottommargin,0),r.canvasBorderRadius=Object(a.xb)(o.canvasborderradius,0),r.origCanvasTopPad=Object(a.xb)(o.canvastoppadding,0),r.origCanvasBottomPad=Object(a.xb)(o.canvasbottompadding,0),r.origCanvasLeftPad=Object(a.xb)(o.canvasleftpadding,0),r.origCanvasRightPad=Object(a.xb)(o.canvasrightpadding,0)}preliminaryScaling(){let e,t,o,r=this.jsonData,a=r.markers&&r.markers.items||[],n=a&&a.length||0,i=1/0,l=1/0,s=-1/0,c=-1/0;for(;n--;)e=+(o=a[n]).x,t=+o.y,i=Qt(i,e),l=Qt(l,t),s=eo(s,e),c=eo(c,t);return{x:i,y:l,x1:s,y1:c}}getScalingParameters(e,t,o,r){let a,n,i=e/t,l=o/(e*this.config.baseScaleFactor),s=r/(t*this.config.baseScaleFactor),c=0,d=0;return l>s?(c+=(o-r*i)/2,n=200/(t*(a=s))):(d+=(r-o/i)/2,n=200/(e*(a=l))),{scaleFactor:a,strokeWidth:n,translateX:c,translateY:d}}calculateMarkerBounds(e,t,o){let r,a,n,i,l,s,c,d,g,h,b,p,u,m,f=this,v=f.config,x=v.markerOpts,y=f.getDatasets(),C=f.getDataLimits(),O=C.dataMin,k=C.dataMax,w=x.hideNull,j=x.nullRadius,L=x.valueToRadius,F=1/0,S=1/0,A=-1/0,E=-1/0;for(s=0,g=y.length;s<g;s++)"markers"===(c=(d=y[s]).getName())&&(r=d);if(r)for(s in r.calculateMarkerRadiusLimits(),n=(a=r.config||{}).minRadius,i=a.maxRadius,l=r.components&&r.components.markerObjs||{})u=(v=(m=l[s]).config).definition||{},null!==v.cleanValue?(L&&u.radius===Wt&&(v.radius=n+(i-n)*(v.cleanValue-O)/(k-O)),p=+v.radius,h=(+u.x+t)*e,b=(+u.y+o)*e,F=Qt(F,h-p),S=Qt(S,b-p),A=eo(A,h+p),E=eo(E,b+p)):w?v.__hideMarker=!0:null===v.radius&&(v.radius=j);return{x:F,y:S,x1:A,y1:E}}_spaceManager(){let e,t,o,r,n,i,l,s,c,d=this,g=d.config,h=d.getChildren("legend")&&d.getChildren("legend")[0],b=h&&h.config.legendPos,p=d.getFromEnv("chart-attrib"),u=g.showBorder,m=g.origMarginLeft,f=g.origMarginTop,v=d.config.baseWidth,x=d.config.baseHeight,y={},C=0,O=0,k=g.markerOpts,w=g.borderWidth=u?Object(a.xb)(p.borderthickness,1):0;d._allocateSpace({top:w,bottom:w,left:w,right:w}),d._allocateSpace(d._manageActionBarSpace&&d._manageActionBarSpace(.225*g.availableHeight)||{}),s="right"===b?.3*g.canvasWidth:.3*g.canvasHeight,g.showLegend&&d._manageLegendSpace(s),e=b===Zt?.225*g.canvasHeight:.225*g.canvasWidth,c=d._manageChartMenuBar(e),o=g.canvasWidth,r=g.canvasHeight,k.dataEnabled?(g.adjustViewPortForMarkers?((y=d.preliminaryScaling()).x1>v&&(v=y.x1),0>y.x&&(v+=-y.x,C=-y.x),y.y1>x&&(x=y.y1),0>y.y&&(x+=-y.y,O=-y.y),t=d.getScalingParameters(v,x,o,r),i=r,l=o,0>(y=d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,C,O)).x&&(m+=-y.x,o+=y.x),0>y.y&&(f+=-y.y,r+=y.y),y.x1>l&&(o-=y.x1-l),y.y1>i&&(r-=y.y1-i)):(t=d.getScalingParameters(v,x,o,r),d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,C,O)),m+=C*(t=d.getScalingParameters(v,x,o,r)).scaleFactor*d.config.baseScaleFactor,f+=O*t.scaleFactor*d.config.baseScaleFactor):t=d.getScalingParameters(v,x,o,r),d.config.scalingParams=t,n=t.scaleFactor,t.translateX+=m,t.translateY=t.translateY+f+c.top||0,t.sFactor=n*d.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",n,",",n,",0,0"].join(""),d.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(n?n*d.config.baseScaleFactor:1),yscale:100*(n?n*d.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}},d.getChildren("mapAnnotations")[0].clear(),d.getChildren("mapAnnotations")[0].configureAttributes()}getDataLimits(){let e,t,o,r=this.getDatasets(),a=r.length,n=1/0,i=-1/0;for(o=0;o<a;o++)t=(e=r[o]).getDataLimits(),n=Qt(n,t.min),i=eo(i,t.max);return{dataMin:n,dataMax:i}}getEntityPaths(e){let t,o={},r=this.config.entities;if(e){for(t in r)o[t]=r[t];return o}return r}checkComplete(){let e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}var ao=ro;o.d(t,"Maps",function(){return ao});t.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:e=>e.addDep(ao)}}}]);