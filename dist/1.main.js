(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{35:function(e,t){e.exports=function(e,t,a){for(var i=0,n=a.length;i<n;){if(e(t,a[i]))return!0;i+=1}return!1}},36:function(e,t,a){var i=a(35),n=a(22)(function(e,t,a){for(var n=[],o=0,r=t.length;o<r;)i(e,t[o],a)||i(e,t[o],n)||n.push(t[o]),o+=1;return n});e.exports=n},37:function(e,t,a){var i=a(38),n=a(19)(function(e,t){for(var a=[],n=0,o=e.length;n<o;)i(e[n],t)||i(e[n],a)||(a[a.length]=e[n]),n+=1;return a});e.exports=n},38:function(e,t,a){var i=a(39);e.exports=function(e,t){return i(t,e,0)>=0}},39:function(e,t,a){var i=a(40);e.exports=function(e,t,a){var n,o;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(n=1/t;a<e.length;){if(0===(o=e[a])&&1/o===n)return a;a+=1}return-1}if(t!=t){for(;a<e.length;){if("number"==typeof(o=e[a])&&o!=o)return a;a+=1}return-1}return e.indexOf(t,a);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,a);case"object":if(null===t)return e.indexOf(t,a)}for(;a<e.length;){if(i(e[a],t))return a;a+=1}return-1}},40:function(e,t,a){var i=a(19),n=a(41),o=i(function(e,t){return n(e,t,[],[])});e.exports=o},41:function(e,t,a){var i=a(42),n=a(35),o=a(43),r=a(29),l=a(44),s=a(45),c=a(47);function d(e,t,a,o){var r=i(e),l=i(t);function s(e,t){return h(e,t,a.slice(),o.slice())}return!n(function(e,t){return!n(s,t,e)},l,r)}function h(e,t,a,i){if(l(e,t))return!0;var n=c(e);if(n!==c(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(n){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===o(e.constructor))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!l(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!l(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var g=a.length-1;g>=0;){if(a[g]===e)return i[g]===t;g-=1}switch(n){case"Map":return e.size===t.size&&d(e.entries(),t.entries(),a.concat([e]),i.concat([t]));case"Set":return e.size===t.size&&d(e.values(),t.values(),a.concat([e]),i.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var b=s(e);if(b.length!==s(t).length)return!1;var m=a.concat([e]),p=i.concat([t]);for(g=b.length-1;g>=0;){var u=b[g];if(!r(u,t)||!h(t[u],e[u],m,p))return!1;g-=1}return!0}e.exports=h},42:function(e,t){e.exports=function(e){for(var t,a=[];!(t=e.next()).done;)a.push(t.value);return a}},43:function(e,t){e.exports=function(e){var t=String(e).match(/^function (\w*)/);return null==t?"":t[1]}},44:function(e,t,a){var i=a(19)(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t});e.exports=i},45:function(e,t,a){var i=a(21),n=a(29),o=a(46),r=!{toString:null}.propertyIsEnumerable("toString"),l=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],s=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),c=function(e,t){for(var a=0;a<e.length;){if(e[a]===t)return!0;a+=1}return!1},d=i("function"!=typeof Object.keys||s?function(e){if(Object(e)!==e)return[];var t,a,i=[],d=s&&o(e);for(t in e)!n(t,e)||d&&"length"===t||(i[i.length]=t);if(r)for(a=l.length-1;a>=0;)n(t=l[a],e)&&!c(i,t)&&(i[i.length]=t),a-=1;return i}:function(e){return Object(e)!==e?[]:Object.keys(e)});e.exports=d},46:function(e,t,a){var i=a(29),n=Object.prototype.toString;e.exports=function(){return"[object Arguments]"===n.call(arguments)?function(e){return"[object Arguments]"===n.call(e)}:function(e){return i("callee",e)}}},47:function(e,t,a){var i=a(21)(function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)});e.exports=i},48:function(e,t,a){"use strict";a.r(t);var i=a(26),n=a(0);var o=class extends i.a{_spaceManager(){var e,t,a,i,o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y=this,C=y.config,O=y.getChildren("xAxis")&&y.getChildren("xAxis")[0],L=y.getChildren("yAxis")&&y.getChildren("yAxis")||[],w=C.legendposition,k=C.xDepth,j=C.yDepth,S=C.canvasBgDepth,A=C.canvasBaseDepth,F=C.canvasBasePadding,B=y.getChildren("canvas")[0],T=B.config.canvasBorderWidth,E=C.realTimeConfig&&C.realTimeConfig.showRTValue,P=C.borderWidth,_=C.canvasMarginTop,D=C.canvasMarginBottom,I=C.canvasMarginLeft,M=C.canvasMarginRight,V=C.minCanvasHeight,z=C.minCanvasWidth,R=C.minChartWidth,N=C.minChartHeight,G=C.height,W=C.width,H=!1,Y=!1,X=C.origCanvasTopMargin,Z=C.origCanvasBottomMargin,K=C.origCanvasLeftMargin,U=C.origCanvasRightMargin,J=[];for(C.canvasWidth-2*P<R&&(m=(C.canvasWidth-R)/2),C.canvasHeight-2*P<N&&(b=(C.canvasHeight-N)/2),y._allocateSpace({top:b||P,bottom:b||P,left:m||P,right:m||P}),d=0,i=L.length;d<i;d++)a=L[d],e=.7*C.availableWidth,v=a&&a.placeAxis(e)||{},J.push({axisIndex:d,spaceTaken:v}),a&&y._allocateSpace(v);C.yAxisSpaceAllocation=J,y._allocateSpace(y._manageActionBarSpace&&y._manageActionBarSpace(.225*C.availableHeight)||{}),y._manageLegendSpace&&C.showLegend&&y._manageLegendSpace(void 0),t=w===n.q?.6*C.availableHeight:.6*C.availableWidth,j&&(y._allocateSpace({bottom:j}),C.shift=k+F+A),S&&y._allocateSpace({right:S}),C.canvasWidth-2*T<z&&(u=(C.canvasWidth-z)/2),y._allocateSpace({left:u||T,right:u||T}),z>W-I-M&&(Y=!0,o=C.canvasWidth-z,x=I+M,I=C.canvasMarginLeft=o*I/x,M=C.canvasMarginRight=o*M/x),s=I>C.canvasLeft?I-C.canvasLeft:0,c=M>W-C.canvasRight?M+C.canvasRight-W:0,y._allocateSpace({left:s,right:c}),Y&&(x=K+U,(g=C.canvasWidth)>z&&(s=(o=g-z)*K/x,c=o*U/x),y._allocateSpace({left:s,right:c})),C.actualCanvasMarginRight=c,C.actualCanvasMarginBottom=l,y._manageChartMenuBar(t),t=.2*C.availableHeight,y._getSumValueSpace&&y._allocateSpace(y._getSumValueSpace(t)),t=.3*C.availableHeight,C.realtimeEnabled&&(E?y._allocateSpace(y._realTimeValuePositioning(t)):y._hideRealTimeValue()),y._resetViewPortConfig&&y._resetViewPortConfig(),y._setAxisScale&&y._setAxisScale(),t=.6*C.availableHeight,C.xAxisSpaceAllocation=f=O&&O.placeAxis(t),O&&y._allocateSpace(f),C.canvasHeight-2*T<V&&(p=(C.canvasHeight-V)/2),y._allocateSpace({top:p||T,bottom:p||T}),y._allocateSpace({bottom:A}),V>G-_-D&&(H=!0,o=C.canvasHeight-V,x=_+D,_=C.canvasMarginTop=o*_/x,D=C.canvasMarginBottom=o*D/x),r=_>C.canvasTop?_-C.canvasTop:0,l=D>G-C.canvasBottom?D+C.canvasBottom-G:0,y._allocateSpace({top:r,bottom:l}),H&&(x=X+Z,(h=C.canvasHeight)>V&&(r=(o=h-V)*X/x,l=o*Z/x),y._allocateSpace({top:r,bottom:l})),C.actualCanvasMarginTop=r,C.actualCanvasMarginLeft=s,B.setDimension({top:C.canvasTop,left:C.canvasLeft,width:C.canvasWidth,height:C.canvasHeight})}_postSpaceManagement(){var e,t=this,a=t.config,i=t.getChildren(),n=i.xAxis&&i.xAxis[0],o=i.legend&&i.legend[0],r=a.xDepth,l=t.getChildren("canvas");for(t.setAxisDimention&&t.setAxisDimention(),n&&t._allocateXAxisLabelSpace(n),n&&n.shiftLabels(-r,0),o&&o.postSpaceManager(),e=0;e<(l&&l.length);e++)l[e].setCanvasPadding();t.setAxisDimention&&t.setAxisDimention()}},r=a(4),l=a(1);let s=(e,t)=>e<t?t:e;var c=class extends r.a{getType(){return"axis"}__setDefaultConfig(){super.__setDefaultConfig(),this.components={labels:[]};let e=this.config;e.setAdaptiveMin=0,e.adjustDiv=1,e.axisNameWidth=n.D,e.rotateAxisName=0,e.useEllipsesWhenOverflow=1,e.divLineColor=n.D,e.divLineAlpha=n.D,e.divLineThickness=n.D,e.divLineIsDashed=n.D,e.divLineDashLen=n.D,e.divLineDashGap=n.D,e.showAlternateGridColor=n.D,e.alternateGridColor=n.D,e.alternateGridAlpha=n.D,e.showZeroPlane=1,e.zeroPlaneAlpha=80,e.showZeroPlaneValue=1,e.showZeroPlaneOnTop=1,e.showAxisLine=n.D,e.axisLineThickness=n.D,e.axisLineAlpha=n.D,e.tickLength=0,e.trendlineToolText=n.D,e.trendlineColor="333333",e.trendlineThickness=1,e.trendlineAlpha=n.D,e.showTrendlinesOnTop=0,e.trendlinesAreDashed=0,e.trendlinesDashLen=5,e.trendlinesDashGap=2,e.isTrendZone=n.D,e.showTrendlines=1,e.showTrendlineLabels=1,e.showLabels=1,e.maxLabelHeight=n.D,e.rotateLabels=n.D,e.slantLabel=0,e.showAxisValues=1,e.showTooltip=1,e.isActive=!0,e.drawLabels=!0,e.drawOnlyCategoryLine=!1,e.drawLabelsOpposit=!1,e.drawPlotlines=!0,e.drawAxisLine=!0,e.drawPlotBands=!0,e.drawAxisName=!0,e.drawAxisNameOpposit=!1,e.axisNameAlignCanvas=!1,e.drawAxisNameFromBottom=!1,e.drawTrendLines=!0,e.drawTrendLabels=!0,e.drawTick=!0,e.drawTickMinor=!0,e.animateAxis=!0,e.drawAxisLineWRTCanvas=!0,e.isRelativeAxisInverse=!1,e.axisIndex=0,e.uniqueClassName=0,e.viewPortRatio={},e.canvas={},e.axisRange={},e.drawnStaggerLines=n.D,e.axisDimention={},e.forceZeroTick=!0,e.isZeroTickForced=!1,e.extremeLabels={firstLabel:{},lastLabel:{}},e._setRangeAgain=!1,e._defaultForceDecimal=n.D,e._defaultDecimalPrecision=n.D,e.rangeChanged=!1,e.dimensionChanged=!1,e.apparentScrollPos=0,e.visibleMin=n.D,e.visibleMax=n.D,e.setPadding=!1,e.trendLimits=n.D}configureAttributes(e){var t,a,i,o,r=Math.abs,c=this,d=c.config,h=c.getFromEnv("chart"),g=c.getFromEnv("dataSource"),b=h.config.is3D,m=g.chart,p=c.getFromEnv("number-formatter");t=d.rawAttr=e,d.referenceInfo=[],d.parsedTrendLabels=[],d.parsedVlineInfo=[],d.trendLines=t.trendlines,d.vTrendLines=t.vtrendlines,Object(n.vb)(t,d),d.axisName=Object(n.xb)(t.axisName),d.axisValuePadding=d.axisNamePadding||Object(n.Bb)(t.axisValuePadding,4),d.axisNamePadding=d.axisNamePadding||Object(n.Bb)(t.axisNamePadding,5),d.maxLabelWidthPercent=Object(n.Bb)(t.maxLabelWidthPercent),d.maxLabelWidthPercent=r(d.maxLabelWidthPercent),d.minLabelWidthPercent=r(Object(n.Bb)(t.minLabelWidthPercent)),d.numDivLines=Object(n.Bb)(t.numDivLines,4),d.numDivLines=s(d.numDivLines,0),d.categoryNumDivLines=Object(n.Bb)(t.numDivLines,0),d.axisValuePadding=s(d.axisValuePadding,0),d.isReverse=Object(n.Bb)(t.isReverse,0),d.isOpposit=Object(n.Bb)(t.isOpposit,0),d.isVertical=Object(n.Bb)(t.isVertical,0),d.categoryDivLinesFromZero=1,d.axisMinValue=p.getCleanValue(t.axisMinValue),d.axisMaxValue=p.getCleanValue(t.axisMaxValue),d.zeroPlaneColor=Object(n.zb)(t.zeroPlaneColor,t.divLineColor),d.zeroPlaneThickness=Object(n.zb)(t.zeroPlaneThickness,t.divLineThickness),d.axisLineColor=Object(l.c)(t.axisLineColor,t.axisLineAlpha),d.tickAlpha=Object(n.Bb)(t.tickAlpha,d.axisLineAlpha),d.tickColor=Object(l.c)(Object(n.zb)(t.tickColor,t.axisLineColor),d.tickAlpha),d.tickWidth=Object(n.Bb)(t.tickWidth,d.axisLineThickness),d.maxZoomLimit=Object(n.Bb)(m.maxzoomlimit,h.maxzoomlimit,1e3),d.showVLines=Object(n.Bb)(m.showvlines,1),d.showVLinesOnTop=Object(n.Bb)(m.showvlinesontop,0),d.showVLineLabels=Object(n.Bb)(m.showvlinelabels,this.showVLineLabels,1),d.showVLineLabelBorder=Object(n.Bb)(m.showvlinelabelborder,1),d.rotateVLineLabels=Object(n.Bb)(m.rotatevlinelabels,0),d.vLineColor=Object(n.zb)(m.vlinecolor,"333333"),d.vLineLabelColor=Object(n.zb)(m.vlinelabelcolor),d.vLineThickness=Object(n.zb)(m.vlinethickness,1),d.vLineAlpha=Object(n.Bb)(m.vlinealpha,80),d.vLineLabelBgColor=Object(n.zb)(m.vlinelabelbgcolor,"ffffff"),d.vLineLabelBgAlpha=Object(n.Bb)(m.vlinelabelbgalpha,b?50:100),d.staggerLines=Math.max(Object(n.Bb)(m.staggerlines,2),2),d.staggerLines=s(d.staggerLines,1),d.trendlineValuesOnOpp=Object(n.zb)(t.trendlineValuesOnOpp,t.trendlineValuesOnOpp,0),d.labelDisplay=Object(n.zb)(t.labelDisplay,"auto").toLowerCase(),d.labelStep=Object(n.Bb)(t.labelStep,1),d.labelStep=Math.round(d.labelStep),d.labelStep=s(d.labelStep,1),d.startPad=0,d.endPad=0,d._oriLabelStep=d.labelStep,d.showLimits=Object(n.Bb)(t.showLimits,d.showAxisValues),d.showUpperLimit=t.showLimits,d.showDivLineValues=Object(n.Bb)(t.showDivLineValues,d.showAxisValues),d.showCanvasBorder=h.getChildren("canvas")[0].config.showCanvasBorder?1:0,d.axisBreak=t.axisBreaks,d.isBreak=!!d.axisBreak,d.isBreak&&c._processAxisBreak(),a=(a=Object(n.ab)(t.axisNameBorderColor,n.b))?Object(l.c)(a,Object(n.Bb)(t.axisNameBorderAlpha,t.axisNameAlpha,100)):n.b,d.name=d.name||{},d.name.style={fontFamily:Object(n.zb)(t.axisNameFont,t.outCanfontFamily),fontSize:Object(n.zb)(t.axisNameFontSize,Object(n.ub)(t.outCanfontSize))+n.y,color:Object(l.c)(Object(n.zb)(t.axisNameFontColor,t.outCancolor),Object(n.Bb)(t.axisNameFontAlpha,t.axisNameAlpha,100)),fontWeight:Object(n.Bb)(t.axisNameFontBold,1)?"bold":n.n,fontStyle:Object(n.Bb)(t.axisNameFontItalic)?"italic":n.n,border:a||t.axisNameBgColor?Object(n.Bb)(t.axisNameBorderThickness,1)+"px solid":n.D,borderColor:a,borderThickness:Object(n.Bb)(t.axisNameBorderThickness,1),borderPadding:Object(n.Bb)(t.axisNameBorderPadding,2),borderRadius:Object(n.Bb)(t.axisNameBorderRadius,0),backgroundColor:t.axisNameBgColor?Object(l.c)(t.axisNameBgColor,Object(n.Bb)(t.axisNameBgAlpha,t.axisNameAlpha,100)):n.b,borderDash:Object(n.Bb)(t.axisNameBorderDashed,0)?Object(n.Y)(Object(n.Bb)(t.axisNameBorderDashLen,4),Object(n.Bb)(t.axisNameBorderDashGap,2)):n.j},d.name.style.lineHeight=Object(n.Jb)(d.name.style),i=(i=Object(n.ab)(m.trendvaluebordercolor,n.b))?Object(l.c)(i,Object(n.Bb)(m.trendvalueborderalpha,m.trendvaluealpha,100)):n.b,d.trend=d.trend||{},d.trend.trendStyle={fontFamily:Object(n.zb)(m.trendvaluefont,t.outCanfontFamily),color:Object(n.zb)(m.trendvaluefontcolor,t.trendlineColor,t.outCancolor,"333333"),fontSize:Object(n.Ab)(m.trendvaluefontsize,Object(n.ub)(t.outCanfontSize))+n.y,fontWeight:Object(n.Bb)(m.trendvaluefontbold)?"bold":n.n,fontStyle:Object(n.Bb)(m.trendvaluefontitalic)?"italic":n.n,border:i||m.trendvaluebgcolor?Object(n.Bb)(m.trendvalueborderthickness,1)+"px solid":"",borderColor:i,borderThickness:Object(n.Bb)(m.trendvalueborderthickness,1),borderPadding:Object(n.Bb)(m.trendvalueborderpadding,2),borderRadius:Object(n.Bb)(m.trendvalueborderradius,0),backgroundColor:m.trendvaluebgcolor?Object(l.c)(m.trendvaluebgcolor,Object(n.Bb)(m.trendvaluebgalpha,m.trendvaluealpha,100)):n.b,borderDash:Object(n.Bb)(m.trendvalueborderdashed,0)?Object(n.Y)(Object(n.Bb)(m.trendvalueborderdashlen,4),Object(n.Bb)(m.trendvalueborderdashgap,2)):n.j},d.trend.trendStyle.lineHeight=Object(n.Jb)(d.trend.trendStyle),d.labels=d.labels||{},d.lines=d.lines||{},d.band=d.band||{},o=(o=Object(n.ab)(m.labelbordercolor,n.b))?Object(l.c)(o,Object(n.Bb)(m.labelborderalpha,m.labelalpha,100)):n.b,d.labels.style={fontFamily:Object(n.zb)(t.labelFont,t.outCanfontFamily),fontSize:Object(n.Bb)(t.labelFontSize,Object(n.ub)(t.outCanfontSize))+n.y,fontWeight:Object(n.Bb)(t.labelFontBold)?"bold":n.n,fontStyle:Object(n.Bb)(t.labelFontItalic)?"italic":n.n,color:Object(l.c)(Object(n.zb)(t.labelFontColor,t.outCancolor),Object(n.Bb)(t.labelFontAlpha,100)),labelLink:m.labellink,border:o||m.labelbgcolor?Object(n.Bb)(m.labelborderthickness,1)+"px solid":"",borderColor:o,borderThickness:Object(n.Bb)(m.labelborderthickness,1),borderPadding:Object(n.Bb)(m.labelborderpadding,2),borderRadius:Object(n.Bb)(m.labelborderradius,0),backgroundColor:m.labelbgcolor?Object(l.c)(m.labelbgcolor,Object(n.Bb)(m.labelbgalpha,m.labelalpha,100)):n.b,borderDash:Object(n.Bb)(m.labelborderdashed,0)?Object(n.Y)(Object(n.Bb)(m.labelborderdashlen,4),Object(n.Bb)(m.labelborderdashgap,2)):n.j},d.labels.style.lineHeight=Object(n.Jb)(d.labels.style),d.numberFormatterFn=Object(n.zb)(t.numberFormatterFn),d.apparentScrollPos=t.apparentScrollPos||d.apparentScrollPos,d.axisRange={},d.dataLimit={},d.axisEndLabelDisplaySpace={left:0,right:0,top:0,bottom:0},d.isConfigured=!0,d._defaultForceDecimal=n.D,d._defaultDecimalPrecision=n.D,d.lines.isDraw=Object(n.Bb)(t.lines&&t.lines.isDraw,1),d.band.isDraw=Object(n.Bb)(t.band&&t.band.isDraw,1)}createContainer(e,t,a){let i=this.getFromEnv("animationManager");return this.addContainer(e,i.setAnimation({container:a,attr:t,el:this.getContainer(e)||"group",component:this,label:"group"}))}createGroup(e,t,a,i="group"){return this.getFromEnv("animationManager").setAnimation({container:a,attr:t,el:this.config[e]||"group",component:this,label:i})}getValuePadding(){var e=this.config;return{left:e.startPad,right:e.endPad}}draw(){var e,t,a,i,n=this,o=n.config,r=n.getFromEnv("chart").config,l=o.isVertical,s=r.viewPortConfig,c=n.getChildren().limitUpdater,d=o.viewPortRatio||{};n._createContainer(),a=s.y*s.scaleY,i=s.x*s.scaleX,d.scaleX&&d.scaleY&&(d.scaleX!==s.scaleX||d.scaleY!==s.scaleY)?(d.scaleX=s.scaleX,d.scaleY=s.scaleY,n._drawComponents()):(l?(t=a-s.y*s.scaleY,o.axisContainer.transform("t0,"+t),o.axisLabelContainerTop.transform("t0,"+t)):(e=i-s.x*s.scaleX,o.axisContainer.transform("t"+e+",0"),o.axisLabelContainerTop.transform("t"+e+",0")),n._drawComponents()),n.addExtEventListener("internal.animationComplete",function(){c&&c.forEach(e=>{e.draw()})},n.getFromEnv("chartInstance")),n.addToEnv("prevScale",n.getScale().copy())}setScale(e){this.config.scale=e}getScale(){return this.config.scale}getLimit(){let e=this.config.axisRange;return{min:e.min,max:e.max,tickInterval:e.tickInterval}}getVisibleConfig(){let e=this.config;return{minValue:e.visibleMin,maxValue:e.visibleMax}}setAxisConfig(e){var t,a=this.config;for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t])}getAxisConfig(e){var t=this.config;return e?t[e]:t}getVisibleLength(){var e=this.getVisibleConfig();return Math.abs(e.maxValue-e.minValue)}getAxisEndLabelDisplaySpace(){return this.config.axisEndLabelDisplaySpace||{}}getTicksLen(){let e=this.config.tickValues;return e&&e.tickValue.length||0}};const d=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"axis"}],h=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}],g={"text.appearing":h,"path.appearing":h,"rect.appearing":h},b={"text.appearing":d,"path.appearing":d,"rect.appearing":d,"scroller.appearing":d};var m={"initial.axis.numeric":b,"initial.axis.category":b,"initial.axis.log":b,"update.axis.numeric":g,"update.axis.category":g,"update.axis.log":g};var p=function(e,t){let a=(t=+t)-(e=+e);return t=>a*t+e},u=(e,t)=>e.filter(e=>0>t.indexOf(e)),f=a(36),v=a.n(f),x=a(3),y=a(37),C=a.n(y);let O={wrtVisible:!0},L=function(e,t){var a,i,o,r,l,s,c,d={labelfont:["fontFamily"],labelfontcolor:["fontColor"],labelfontsize:["fontSize",function(e){return e?Object(n.Bb)(e)+"px":n.D}],labelfontbold:["fontWeight",function(e){return e?"bold":"normal"}],labelfontitalic:["fontStyle",function(e){return e?"italic":"normal"}],labelfontalpha:["fontAlpha"]},h=t.getFromEnv("dataSource").categories,g=h&&h[0]||{},b=function(e){return e},m=!1,p={};for(a in g)"category"===a||a in e||(i=g[a],e[a]=i);for(a in d)l=(r=d[a])[0],s=r[1]||b,i=e[a],o=e[l.toLowerCase()],(i!==n.D||o!==n.D)&&((c=s(i))!==n.D||(c=s(o))!==n.D)&&(p[l]=c,m=!0),m&&(e.style=p)},w="crisp",k="butt",j="eventArgs",S="_trend",A="_tick",F="_label",B=function(e,t){var a,i,n=Math.round,o=!1,r=t%2;return e[1]===e[4]&&(i=n(a=e[1]),e[1]=e[4]=r?i>a?i-.5:i+.5:i,o=!0),e[2]===e[5]&&(i=n(a=e[2]),e[2]=e[5]=r?i>a?i-.5:i+.5:i,o=!0),{path:e,isCrisped:o}},T=e=>(t,a)=>!!(e.minValue<=t&&e.maxValue>=t||e.minValue<=a&&e.maxValue>=a),E=e=>t=>!!(e.minValue<=t&&e.maxValue>=t),P={wrtVisible:!0},_=function(e){for(var t=0,a=e.length;t<a;t++)if(e[t].label||e[t].oriLabel)return t};Object(x.a)({name:"cartesianAxisAnimation",type:"animationRule",extension:m});class D extends c{constructor(){super(),this.config.referenceInfo=[],this.config.prevTicks=[],this.config.prevIntervalArr=[],this.config.prevTrendLabels=[],this.config.prevCategoryIntervalArr=[]}placeAxis(e){var t,a=this,i=a.getScale(),n=a.getFromEnv("chart"),o=a.getLinkedItem("scrollBar"),r=a.config.isVertical,l=a.config.isOpposit,s=a.config.isReverse,c=n.config,d={};return o&&((t=o.getLogicalSpace())&&(r?(n.config.shift=t.width+o.config.conf.padding,d[l?"right":"left"]=n.config.shift):(n.config.shift=t.height+o.config.conf.padding,d[l?"top":"bottom"]=n.config.shift),n._allocateSpace(d))),r?(s?i.setRange([c.canvasBottom,c.canvasTop]):i.setRange([c.canvasTop,c.canvasBottom]),a._placeVerticalAxis(e)):(s?i.setRange([c.canvasRight,c.canvasLeft]):i.setRange([c.canvasLeft,c.canvasRight]),a._placeHorizontalAxis(e))}_placeVerticalAxis(e){var t,a,i,o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y=Math.min,C=Math.max,O=this,L=O.config,w=O.getFromEnv("chart"),k=w.config,j=w.getFromEnv("smartLabel"),S=L.axisRange,A=L.minLabelWidthPercent,F=L.name,B=L.isOpposit,T=O.getFromEnv("number-formatter"),E=k.canvasHeight,P=L.labelPadding=Object(n.Bb)(L.rawAttr.axisValuePadding,4),_=Object(n.Bb)(L.rawAttr.axisNamePadding,5),D=L.useEllipsesWhenOverflow,I=L.name.style,M=L.trend.trendStyle,V=L.axisName,z=L.trendLines,R=L.drawLabelsOpposit,N=L.drawAxisNameOpposit,G=0,W=0,H=0,Y=0,X=0,Z=0,K={left:0,right:0},U="",J="",q=0,$=-1;if(A&&($=A/100*k.width),L.oriCanvasHeight=E,0>P&&(L.labelPadding=2),f=L.drawTick&&L.tickLength?L.axisLineThickness+L.tickLength:L.axisLineThickness,L.showAxisLine?(L.labelPadding=Object(n.Bb)(P,2)+f,0>L.labelPadding&&(L.labelPadding=(0>L.axisLineThickness?0:f)+2),e-=L.axisLineThickness):(L.labelPadding=Object(n.Bb)(P,2),0>L.labelPadding&&(L.labelPadding=2)),d=S.max,h=S.min,L.name.rotation=0,L.labels.step=L.labelStep,L.labels.isDraw=1,L.labels.drawNormalVal=L.showDivLineValues,L.labels.drawLimitVal=L.showLimits,q=+(q=I.lineHeight).replace(/px/i,""),V&&q<e&&(e-=q),1!==L.showLimits&&1!==L.showDivLineValues&&(L.labels.isDraw=0),((b=L.drawLabels?O._getVMaxLabelDimention(e-L.labelPadding):{width:0,height:0}).width+L.labelPadding>e&&!L.tickValues||0===b.width)&&(L.labels.isDraw=0),L.labels.isDraw&&(L.labelMaxW=b.width>$?b.width:$,L.labelMaxH=b.height,H=G=L.labelMaxW+L.labelPadding),L.drawTrendLines&&L.drawTrendLabels&&z&&z.length){for(o=L.isPercent?T.percentValue:L.isVertical?T.yAxis:T.xAxis,j.useEllipsesOnOverflow(k.useEllipsesWhenOverflow),j.setStyle({fontSize:M.fontSize,fontFamily:M.fontFamily,lineHeight:M.lineHeight,fontWeight:M.fontWeight}),t=0,a=z.length;t<a;t+=1)for(c=0,m=z[t].line&&z[t].line.length;c<m;c+=1)p=z[t].line[c],v=T.getCleanValue(Object(n.zb)(p.startvalue,p.value,0)),x=Object(n.Bb)(p.endvalue,v),v<=d&&v>=h&&x<=d&&x>=h&&(L.isOpposit&&(p.valueonright=1),s=1===(u=Object(n.Bb)(p.valueonright,0))?p.endvalue||p.startvalue:p.startvalue||p.endvalue,(g=Object(n.xb)(p.origText||p.displayvalue||s||""))===s&&(g=""+o.call(T,g)),u?g.length>J.length&&(J=g):g.length>U.length&&(U=g));for(Z=(b=j.getOriSize(J)).width+L.labelPadding,X=(b=j.getOriSize(U)).width+L.labelPadding,B?(Z>H&&Z>e&&(Z=e),X>e-(H=C(H,Z+L.labelPadding))&&(X=y(X,e-H))):(X>H&&X>e&&(X=e),Z>e-(H=C(H,X+L.labelPadding))&&(Z=y(Z,e-H))),t=0,a=z.length;t<a;t+=1)for(c=0,m=z[t].line&&z[t].line.length;c<m;c+=1)p=z[t].line[c],v=T.getCleanValue(Object(n.zb)(p.startvalue,p.value,0)),x=Object(n.Bb)(p.endvalue,v),g=1==+p.valueonright?p.origText||p.displayvalue||""+x||"":p.origText||p.displayvalue||""+v||"",((g=Object(n.xb)(""+g))===p.endvalue||g===p.startvalue)&&(g=""+o.call(T,g)),p.origText=g,l=(u=Object(n.Bb)(p.valueonright,0))?j.getSmartText(g,Z,w.canvasHeight,D):j.getSmartText(g,H,w.canvasHeight,D),(i=L.parsedTrendLabels[W++])&&(i.attr.text=p.displayvalue=l.text,L.isOpposit&&(i.valueOnRight=1,i.attr["text-anchor"]=n.v)),l.tooltext?(p.valueToolText=l.tooltext,i&&(i.valueToolText=p.valueToolText)):(delete p.valueToolText,i&&delete i.valueToolText)}return e+=q,!L.drawAxisName||0>=e-H-Z||""===V?(F.isDraw=!1,F.value=""):(j.setStyle({fontSize:I.fontSize,fontFamily:I.fontFamily,lineHeight:I.lineHeight,fontWeight:I.fontWeight}),F.isDraw=!0,L.rotateAxisName?(L.name.rotation=B?90:270,r=j.getSmartText(V,E,e-H-Z),F.value=V,L.nameMaxW=y(r.height),Y=L.nameMaxW+_):(r=j.getSmartText(V,e-H-Z,E),F.value=V,L.nameMaxW=y(r.width,e-H),L.nameMaxH=r.height,0<=L.axisNameWidth&&(L.nameMaxW=y(L.nameMaxW,L.axisNameWidth)),Y=L.nameMaxW+_)),B?(R?(K.left+=C(G,X),K.right+=Z):(K.left+=X,K.right+=C(G,Z)),N?(L.axisNamePadding=K.left+_,K.left+=Y):(L.axisNamePadding=K.right+_,K.right+=Y)):(R?(K.left+=X,K.right+=C(G,Z)):(K.left+=C(G,X),K.right+=Z),N?(L.axisNamePadding=K.right+_,K.right+=Y):(L.axisNamePadding=K.left+_,K.left+=Y)),F.isDraw&&L.axisNamePadding+L.nameMaxW>e&&(L.axisNamePadding=e-L.nameMaxW,Y=L.nameMaxW+L.axisNamePadding-H),K}_placeHorizontalAxis(e){var t,a,i,o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y=this,C=y.config,O=y.getFromEnv("chart"),L=O.config,w=O.getFromEnv("smartLabel"),k=C.axisRange,j=C.name,S=C.isOpposit,A=O.getFromEnv("number-formatter"),F=C.drawLabelsOpposit,B=C.drawAxisNameOpposit,T=0,E=L.canvasWidth,P=C.labelPadding=Object(n.Bb)(C.rawAttr.axisValuePadding,4),_=Object(n.Bb)(C.rawAttr.axisNamePadding,5),D=C.useEllipsesWhenOverflow,I=C.name.style,M=C.trend.trendStyle,V=C.axisName,z=C.vTrendLines,R=0,N=0,G=0,W={top:0,bottom:0},H=0,Y=0;if(0>P&&(C.labelPadding=2),f=C.drawTick&&C.tickLength?C.axisLineThickness+C.tickLength:C.axisLineThickness,C.showAxisLine?(C.labelPadding=Object(n.Bb)(P,2)+f,0>C.labelPadding&&(C.labelPadding=(0>C.axisLineThickness?0:f)+2),e-=C.axisLineThickness):(C.labelPadding=Object(n.Bb)(P,2),0>C.labelPadding&&(C.labelPadding=2)),s=k.max,c=k.min,C.labels.rotation=0,C.labels.step=C.labelStep,C.labels.isDraw=1,C.labels.drawNormalVal=C.showDivLineValues,C.labels.drawLimitVal=C.showLimits,Y=+(Y=I.lineHeight).replace(/px/i,""),V&&Y<e&&(e-=Y),C.rotateLabels&&"stagger"!==C.labelDisplay&&"none"!==C.labelDisplay&&(C.labelDisplay="rotate"),1!==C.showLimits&&1!==C.showDivLineValues&&(C.labels.isDraw=0),p=C.drawLabels?y._getHMaxLabelDimention(e-C.labelPadding):{width:0,height:0},C.labels.rotation?p.width+C.labelPadding>e&&!C.tickValues&&(C.labels.isDraw=0):p.height+C.labelPadding>e&&!C.tickValues&&(C.labels.isDraw=0),C.labels.isDraw&&(C.labels.rotation?(C.labelMaxW=p.height,C.labelMaxH=p.width,T=p.width+C.labelPadding):(C.labelMaxW=p.width,C.labelMaxH=p.height,T=p.height+C.labelPadding),R=T),g=(R=Math.max(R,C.labelPadding))<=e?e-R:e,C.drawTrendLines&&C.drawTrendLabels&&z&&C.isActive)for(u=C.isPercent?y.getFromEnv("number-formatter").percentValue:C.isVertical?y.getFromEnv("number-formatter").yAxis:y.getFromEnv("number-formatter").xAxis,w.useEllipsesOnOverflow(L.useEllipsesWhenOverflow),w.setStyle({fontSize:M.fontSize,fontFamily:M.fontFamily,lineHeight:M.lineHeight,fontWeight:M.fontWeight}),a=0,i=z.length;a<i;a+=1)for(l=0,h=z[a].line&&z[a].line.length;l<h;l+=1)b=z[a].line[l],v=A.getCleanValue(Object(n.zb)(b.startvalue,b.value,0)),x=Object(n.Bb)(b.endvalue,v),v<=s&&v>=c&&x<=s&&x>=c&&(t=1===Object(n.Bb)(b.valueonright,0)?b.endvalue||b.startvalue:b.startvalue||b.endvalue,(d=Object(n.xb)(b.origText||b.displayvalue||t||""))===t&&(d=""+u.call(O.getFromEnv("number-formatter"),d)),b.origText=d,0>g-((m=w.getSmartText(d,O.canvasWidth,M.lineHeight,D)).height+2)?b.displayvalue="":((o=C.parsedTrendLabels[N++])&&(o.attr.text=b.displayvalue=m.text),H=H<m.height?m.height:H),m.tooltext?(b.valueToolText=m.tooltext,o&&(o.valueToolText=b.valueToolText)):(delete b.valueToolText,o&&delete o.valueToolText));return g-=H,R+=H,g+=Y,e+=Y,!C.drawAxisName||0>=g||""===V?(j.isDraw=!1,j.value=""):(w.setStyle({fontSize:I.fontSize,fontFamily:I.fontFamily,lineHeight:I.lineHeight,fontWeight:I.fontWeight}),j.isDraw=!0,r=w.getSmartText(V,E,g),j.value=V,C.nameMaxW=E,C.nameMaxH=r.height,G=r.height+_,C.axisNamePadding=_+R,C.axisNamePadding+r.height>e&&(C.axisNamePadding=e-r.height,G=r.height+C.axisNamePadding-R)),S?(F?W.bottom+=T+H:(W.top+=T,W.bottom+=H),C.trendBottomPadding=W.bottom-H+2,B?W.bottom+=G:W.top+=G):(F?(W.top+=T,W.bottom+=H):W.bottom+=T+H,C.trendBottomPadding=W.bottom-H+2,B?W.top+=G:W.bottom+=G),W}_parseCategoryPlotLine(){var e,t,a,i=this,o=i.config,r=o.axisRange,s=o.tickValues.tickValue,c=Object(l.c)(o.divLineColor,o.divLineAlpha),d=o.divLineThickness,h=o.divLineIsDashed?Object(n.Y)(o.divLineDashLen,o.divLineDashGap,d):n.j,g=E(i.getVisibleConfig()),b=o._allTicks,m=b.length;if(e={stroke:c,"stroke-width":d,"stroke-dasharray":h},(!s[0]||s[0].x===n.D&&s[0].y===n.D)&&o.lines.isDraw&&o.categoryNumDivLines)for(t=0;t<m;++t)g(a=b[t])&&a!==r.min&&a!==r.max&&i.setReferenceInfo({from:a,type:"line",layer:1,attr:e})}_drawComponents(){var e=this,t=e.config;t.drawAxisName&&e._drawAxisName(),t.drawAxisLine&&e._drawAxisLine(),t.tickValues?t.drawLabels&&e._drawCategory():t.drawLabels&&e._drawLabel(),t.drawTrendLines&&e.drawTrendLabel(),e._drawScrollBar()}drawTrendLabel(){let e,t,a,i,o,r,l,s,c,d,h,g,b,m,p,u,f=this,x=f.config,y=x.parsedTrendLabels,C=f.getFromEnv("animationManager"),O=this.getFromEnv("toolTipController"),L=x.axisTrendLabelContainer,w=x.isOpposit,k=x.labelPadding,j=x.vTrendLines,A=x.trendLines,F=x.axisDimention,B=f.getVisibleConfig(),T=B.minValue,E=B.maxValue,_=!0;for(p=0,u=y.length;p<u;p++)y[p].id=p+S;for(j?i=w?F.opposite-(x.trendBottomPadding||0):F.y+(x.trendBottomPadding||0):(i=w?F.opposite+(k||0):F.x-(k||0),o=w?F.x+(k||0):F.opposite+(k||0)),p=0,u=(b=v()((e,t)=>e.attr.text===t.attr.text,x.prevTrendLabels,y)).length;p<u;p++)(g=f.getGraphicalElement(b[p].id))&&f.removeGraphicalElement(g);if(x.prevTrendLabels=Object(n.T)([],y),x.drawTrendLabels)for(p=0,u=y.length;p<u;p++)t=y[p],a=f.getGraphicalElement(p+S),l=+t.from,c=+t.to,_=!0,(m=!isNaN(c))?(T>(s=l+(c-l)/2)||E<s)&&(_=!1):(T>l||E<l)&&(_=!1),_?(j?(d=f.getPixel(l,P),h=c?f.getPixel(c,P):0,r=Object(n.Bb)(t.isTrendZone,x.isTrendZone,1),m&&c!=l&&r?(t.attr.x=d+(h-d)/2,t.attr.y=i):(t.attr.x=c?h:d,t.attr.y=i)):A&&(d=f.getPixel(l,P),h=c?f.getPixel(c,P):0,e=Object(n.Bb)(t.valueOnRight,0),r=Object(n.Bb)(t.isTrendZone,x.isTrendZone,0),m&&c!=l&&r?(t.attr.x=e?o:i,t.attr.y=d+(h-d)/2):(t.attr.x=e?o:i,t.attr.y=c&&e?h:d)),a=f.addGraphicalElement(p+S,C.setAnimation({container:L,el:a||"text",attr:t.attr,css:t.css,data:{value:s||l},component:f,label:"text"})),x.showTooltip&&t.valueToolText?O.enableToolTip(a,t.valueToolText):O.disableToolTip(a)):a&&f.removeGraphicalElement(a);else for(p=0,u=y.length;p<u;p++)(g=f.getGraphicalElement(y[p].id))&&f.removeGraphicalElement(g)}_drawAxisName(){var e,t,a,i,o,r,l=Math.max,s=this,c=s.config,d=this.getFromEnv("toolTipController"),h=s.getLinkedItem("canvas").getEffectiveDimensions(),g=s.getFromEnv("animationManager"),b=h.left,m=h.top,p=h.width,u=h.height,f=m+u,v=s.getFromEnv("chart").config,x=c.name.style,y=c.name.value,C=c.isOpposit,O=c.isVertical,L=s.getFromEnv("smartLabel"),w=c.axisNameContainer,k=c.axisNamePadding,j=c.nameMaxH,S=c.nameMaxW,A=c.axisDimention,F=O?A.x:A.y,B=A.opposite,T=s.getGraphicalElement("axisName"),E=Object(n.Bb)(c.name.rotation,O?90:270),P=s.getFromEnv("paper"),_={fontFamily:x.fontFamily,fontSize:x.fontSize,lineHeight:x.lineHeight,fontWeight:x.fontWeight,fontStyle:x.fontStyle};c.name.isDraw?(e={fontFamily:x.fontFamily,fill:x.color,"vertical-align":"middle","font-size":x.fontSize,"line-height":x.lineHeight},L.useEllipsesOnOverflow(v.useEllipsesWhenOverflow),L.setStyle({fontSize:x.fontSize,fontFamily:x.fontFamily,lineHeight:x.lineHeight,fontWeight:x.fontWeight}),c.drawAxisNameOpposit&&(C=!C,F=B),O?(k=l(k,function(e,t){var a=Math.max;let i=0;return e.relativeAxis&&e.relativeAxis.config&&e.relativeAxis.config.axisNamePadding&&(i=a(e.relativeAxis.config.axisNamePadding,i)),e.isOpposit&&t.canvasMarginRight&&(i=a(i,t.canvasMarginRight-t.marginLeft-e.nameMaxW)),!e.isOpposit&&t.canvasMarginLeft&&(i=a(i,t.canvasMarginLeft-t.marginRight-e.nameMaxW)),i}(c,v)),i=c.axisNameAlignCanvas||v.captionalignment&&"left"===v.captionalignment?u:l(u,c.oriCanvasHeight||0),E?(a=(t=L.getSmartText(y,i,S)).tooltext,o=t.width):(a=(t=L.getSmartText(y,S,i)).tooltext,o=t.height),r=c.drawAxisNameFromBottom?f-o/2:o>u?v.height/2:m+u/2,e.text=t.text,e.x=C?(F||b+p)+k+S/2:(F||b)-k-S/2,e.y=r):(a=(t=L.getSmartText(y,p,j)).tooltext,C&&v.canvasMarginTop&&(k=l(k,v.canvasMarginTop-v.marginTop-j)),!C&&v.canvasMarginBottom&&(k=l(k,v.canvasMarginBottom-v.marginBottom-j)),e.text=t.text,e.x=b+p/2,e.y=C?(F||m)-k-j/2:(F||f)+k+j/2),e["text-bound"]=""===t.text?[]:[x.backgroundColor,x.borderColor,x.borderColor?x.borderThickness:0,x.borderPadding,x.borderRadius,x.borderDash],e.transform=P.getSuggestiveRotation(O?E:0,e.x,e.y),T=s.addGraphicalElement("axisName",g.setAnimation({css:_,el:T||"text",attr:e,container:w,component:s,label:"text"})),c.showTooltip?d.enableToolTip(T,a):d.disableToolTip(T)):T&&s.removeGraphicalElement(T)}_drawAxisLine(){const e="axisLine";var t,a,i,o,r,l,s,c,d,h,g,b,m,p,f,v,x,y,C=this,O=C.config,L=O.isVertical,j=O.isOpposit,S=C.getFromEnv("chart"),F=C.getLinkedItem("canvas").getEffectiveDimensions(),T=C.getFromEnv("animationManager"),E=F.top,_=F.left,D=E+F.height,I=_+F.width,M=O.axisDimention,V=L?M.x:M.y,z=O.drawAxisLineWRTCanvas,R=S.getFromEnv("dataSource").chart,N=O.axisAxisLineContainerBottom,G=C.getGraphicalElement("axisLine"),W=[];if(o=1===Object(n.Bb)(R.showyaxisline,R.showyaxisline)?Object(n.Bb)(R.yaxislinethickness,R.pyaxislinethickness,1):0,O.showAxisLine){if(L?(j?r=(V=z?I:V)+O.axisLineThickness/2:r=(V=z?_:V)-O.axisLineThickness/2,i=(v=B(["M",r,D,"L",r,E],O.axisLineThickness)).path):(j?r=(V=z?E:V)-O.axisLineThickness/2:r=(V=z?D:V)+O.axisLineThickness/2,i=(v=B(["M",_-o,r,"L",I,r],O.axisLineThickness)).path),c={path:i,stroke:O.axisLineColor,"stroke-linecap":k,"stroke-width":O.axisLineThickness,"shape-rendering":v.isCrisped?w:n.D},O.drawTick&&O.tickLength)for(t={stroke:O.tickColor,"stroke-width":O.tickWidth},l=L?j?r+O.tickLength:r-O.tickLength:j?r-O.tickLength:r+O.tickLength,f=0,y=(x=O.tickValues?O.tickValues.tickValue.map(e=>L?e.y:e.x):O.ticks).length;f<y;f+=1)m=`${b=x[f]}${A}`,h=C.getGraphicalElement(m),s=C.getPixel(b,P),t.path=B(L?["M",r,s,"L",l,s]:["M",s,r,"L",s,l],O.tickWidth).path,d=T.setAnimation({el:h||"path",attr:t,data:{value:b,path:t.path},container:N,component:C,label:"path"}),h||C.addGraphicalElement(m,d),W.push(m);a=T.setAnimation({el:G||"path",attr:c,container:N,component:C,label:"path"}),G||C.addGraphicalElement(e,a),W.push(e)}for(f=0,y=(p=u(O.prevTicks,W)).length;f<y;f++)(g=C.getGraphicalElement(p[f]))&&C.removeGraphicalElement(g);O.prevTicks=W}_parseCategory(){var e,t,a,i,o,r,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j,S,A,F,B,T=Math.abs,E=this,_=E.config,D=_.axisDimention||{},I=E.getFromEnv("chart"),M=I.getFromEnv("smartLabel"),V=E.components,z=V.labels,R=E.getLinkedItem("canvas").getEffectiveDimensions(),N=I.config,G=_.isOpposit,W=_.labels,H=W.style,Y=_.isVertical,X=R.top,Z=R.left,K=X+R.height,U=Z+R.width,J=_.labelPadding,q=Y?D.x:D.y,$=D.opposite,Q=I.getFromEnv("dataSource").categories,ee={},te=_.tickValues.tickValue,ae=_.axisRange.min,ie=_.drawnStaggerLines,ne=(_.labelStep!==_.labels.step||1!==E.getZoom())&&"stagger"===_.labelDisplay;if(_.labels.isDraw)for(Y&&(j=T(E.getPixel(0,P)-E.getPixel(0+_.axisRange.tickInterval,P)),_.labelMaxH>j&&(O=Math.ceil(_.labelMaxH/j)),O>_.labels.step&&(_.labels.step=O)),ne&&(k=2*T(E.getPixel(ae,P)-E.getPixel(ae+_.labels.step,P))*_.sWidthAdjstFactor-1),A=(i=_.labels.rotation)?_.labelMaxH:_.labelMaxW,F=i?_.labelMaxW:_.labelMaxH,_.drawLabelsOpposit&&(G=!G,q=$),Q&&Q[0]&&"auto"!==_.xAxisLabelMode&&(ee.fontFamily=Q[0].font,ee.fontSize=Q[0].fontsize,ee.color=Q[0].fontcolor),_.ParentCss=m={fontFamily:Object(n.zb)(ee.fontFamily,H.fontFamily),fontSize:Object(n.zb)(ee.fontSize,H.fontSize),fontWeight:Object(n.zb)(H.fontWeight),fontStyle:Object(n.zb)(H.fontStyle)},m.lineHeight=Object(n.Jb)(m),y=E._getCategoryArr(),V.labelIndexArr=[],e=0,C=y.length;e<C;e+=1)t=te[B=y[e].index],v=y[e].value,V.labelIndexArr.push(B),d=Object(n.zb)(t.font,t.labelfont),h=Object(n.zb)(t.fontsize,t.labelfontsize),g=Object(n.zb)(t.fontbold,t.labelfontbold)?Object(n.Bb)(t.fontbold,t.labelfontbold,0)?"bold":n.n:n.D,b=Object(n.zb)(t.fontitalic,t.labelfontitalic)?Object(n.Bb)(t.fontitalic,t.labelfontitalic,0)?"italic":n.n:n.D,u=Object(l.c)(Object(n.zb)(t.fontcolor,t.labelfontcolor,ee.color,H.color),Object(n.Bb)(t.labelalpha,_.rawAttr.labelFontAlpha,I.config.singleseries?n.D:t.alpha,100)),d||h||g||b?(c={},d&&(c.fontFamily=d),h&&(c.fontSize=h),g&&(c.fontWeight=g),b&&(c.fontStyle=b),c.lineHeight=h?Object(n.Jb)(c):m.lineHeight):c=n.D,(c||m)&&(-1!==(r=(c||m).lineHeight).indexOf("px")&&(o=r.replace(/px/i,""),o=parseFloat(o))),!1===t.appliedSmartLabel&&(M.setStyle(t._ovrStyle||m),S=M.getSmartText(t.oriLabel||t.label,A,F),t.oriLabel=t.oriLabel||t.label,t.label=S.text,t.labelTooltext=S.labelTooltext,t.appliedSmartLabel=!0),f=E.getPixel(v,P),Y?(a=t.label||"",s=+t.labelPadding||0,p={fill:u,"line-height":o,opacity:1,"text-anchor":G?n.v:n.r,text:a,cursor:!N.singleseries&&t.link||t.labellink||H.labelLink?n.p:"",x:G?(q||U)+J:(q||Z)-J,y:s?f+s:f}):(a=t.label||"",s=+t.labelPadding||0,p={fill:u,"line-height":o,opacity:1,text:a,cursor:!N.singleseries&&t.link||t.labellink||H.labelLink?n.p:"",x:f,y:G?(X||q)-J:(q||K)+J},i?(p["text-anchor"]=G?n.v:n.r,p["vertical-align"]="middle"):(p["text-anchor"]=n.t,p["vertical-align"]=G?n.q:n.w),ne?((L=t.labelCount%ie)&&(!(o=t.style.lineHeight)&&(o=_.labels.style.lineHeight),w=o.replace(/px/i,"")*L,p.y=G?p.y-w:p.y+w),M.setStyle(t._ovrStyle||m),S=M.getSmartText(t.oriLabel||t.label,k,F),t.oriLabel=t.oriLabel||t.label,p.text=t.label=S.text,t.labelTooltext=S.labelTooltext,t.appliedSmartLabel=!0):s&&(G?p.y-=s:p.y+=s)),x={label:t.label,lineHeight:r,border:Object(n.Bb)(t.borderthickness,t.labelborderthickness)?Object(n.Bb)(t.borderthickness,t.labelborderthickness,1)+"px solid":"",borderColor:t.bordercolor||t.labelbordercolor?Object(l.c)(t.bordercolor||t.labelbordercolor,Object(n.Bb)(t.borderalpha,t.labelborderalpha,t.alpha,t.labelalpha,100)):n.b,borderThickness:Object(n.Bb)(t.borderthickness,t.labelborderthickness),borderPadding:Object(n.Bb)(t.borderpadding,t.labelborderpadding),borderRadius:Object(n.Bb)(t.borderradius,t.labelborderradius),backgroundColor:t.bgcolor||t.labelbgcolor?Object(l.c)(t.bgcolor||t.labelbgcolor,Object(n.Bb)(t.bgalpha,t.labelbgalpha,t.alpha,t.labelalpha,_.rawAttr.labelFontAlpha,100)):n.b,borderDash:Object(n.Bb)(t.borderdashed,t.labelborderdashed,0)?Object(n.Y)(Object(n.Bb)(t.borderdashlen,t.labelborderdashlen,4),Object(n.Bb)(t.borderdashgap,t.labelborderdashgap,2)):0===Object(n.Bb)(t.borderdashed,t.labelborderdashed)?n.j:H.borderDash},p["text-bound"]=t.label?[Object(n.zb)(x.backgroundColor,H.backgroundColor),Object(n.zb)(x.borderColor,H.borderColor),Object(n.zb)(x.borderThickness,H.borderThickness),Object(n.zb)(x.borderPadding,H.borderPadding),Object(n.zb)(x.borderRadius,H.borderRadius),Object(n.zb)(x.borderDash,H.borderDash)]:[],W.shiftX&&(p.x+=W.shiftX),W.shiftY&&(p.y+=W.shiftY),p.transform=Object(n.fb)(i,p.x,p.y),z[B]=z[B]||{config:{props:{label:{}}}},z[B].config.props.label.attr=p,z[B].config.props.label.css=c}allocatePosition(){var e=this,t=e.config;t.tickValues?t.drawLabels&&e._parseCategory():t.drawLabels&&e._parseLabel()}_drawCategory(){var e,t,a,i,o,r,l,s,c,d,h,g=this,b=g.config,m=g.getFromEnv("chart"),p=m.config,u=b.labels,f=g.getFromEnv("animationManager"),x=u.style,y=this.getFromEnv("toolTipController"),C=b.axisContainer,O=g.config.categoryLabel||(g.config.categoryLabel=[]),L=function(e){return function(t){m.plotEventHandler(this,t,e)}},w=b.tickValues.tickValue,k=[];if(b.labels.isDraw){for(C.css(b.ParentCss),r=g._getCategoryArr(),o=v()((e,t)=>e.value===t.value,b.prevCategoryIntervalArr,r),e=0,s=o.length;e<s;e++)(d=g.getGraphicalElement(`${o[e].value}${F}`))&&g.removeGraphicalElement(d);for(b.prevCategoryIntervalArr=Object(n.T)([],r),e=0,s=r.length;e<s;e+=1)k[e]=`${r[e].value}${F}`;for(e=0,s=r.length;e<s;e+=1)t=w[h=r[e].index],i=(c=g.components.labels[h].config).props.label.attr,l=g.getGraphicalElement(k[e]),a=f.setAnimation({el:l||"text",attr:i,container:C,data:{value:void 0},component:g,label:"text",css:c.props.label.css}),l||(g.addGraphicalElement(k[e],a),a.click(L("dataLabelClick")).hover(L("dataLabelRollOver"),L("dataLabelRollOut"))),a.data(j,{link:!p.singleseries&&t.link||t.labellink||x.labelLink,text:i.text,index:h}),t.labelTooltext?y.enableToolTip(a,t.labelTooltext):y.disableToolTip(a),O[h]=a}else for(e=0,s=b.prevCategoryIntervalArr.length;e<s;e++)(d=g.getGraphicalElement(`${b.prevCategoryIntervalArr[e].value}${F}`))&&g.removeGraphicalElement(d)}_getCategoryArr(){var e,t,a,i,o,r,l,s,c,d,h=this,g=h.config,b=g.isVertical,m=0,p=0,u=[];for(e=g.tickValues.tickValue,i=_(e),a=e?e.length-1:0,b&&(c=Math.abs(h.getPixel(0,P)-h.getPixel(1,P)),g.labelMaxH>c&&(m=Math.ceil(g.labelMaxH/c)),m>g.labels.step&&(g.labels.step=m)),s=0<g.labels.step?g.labels.step:1,d=1!==h.getZoom(),r=this.getVisibleConfig(),t=i;t<=a;t+=s)if((o=e[t])&&(l=Object(n.Bb)(o.x,o.y,t),0!==Object(n.Bb)(o.showlabel,g.showLabels,1))){if(d&&(l<r.minValue||l>r.maxValue)){o.labelCount=p++;continue}("auto"!==g.xAxisLabelMode&&"mixed"!==g.xAxisLabelMode||0!==g.showZeroPlane&&0!==g.showZeroPlaneValue||0!==l)&&(g.labels.drawNormalVal||g.labels.drawLimitVal&&(t==i||t==a))&&(g.labels.drawNormalVal||t==i||t==a)&&(g.labels.drawLimitVal||t!=i&&t!=a)&&(o.labelCount=p++,u.push({index:t,value:l}))}return u}getValue(e,t={wrtVisible:!1}){var a=this.getScale(),i=this.getTranslation();return a.getDomainValue(t.wrtVisible?e:e-i)}getPixel(e,t={wrtVisible:!1}){var a=this.getScale(),i=this.getTranslation(),n=a.getRangeValue(e);return t.wrtVisible?n:n+i}_getCustomPixel(e,t,a={wrtVisible:!1}){if(!t)return this.getPixel(e,a);var i=this.getScale().copy(),[n,o]=i.getRange(),r=Math.min(n,o),l=i.getRangeValue(e),s=this.getTranslation();return i.setRange([r,r+t]),a.wrtVisible?l:l+s}getTranslation(){return this.config.translation||0}setScrollType(e){("none"===e||"smart"===e||"always"===e)&&(this.config.scrollType=e,"none"===e?this.disableScroll():this.enableScroll())}getScrollType(){return this.config.scrollType}_createScrollBar(){var e,t,a,i=this,n=i.config,o=i.getFromEnv("chart"),r=i.getFromEnv("animationManager"),l=i.getLinkedItem("scrollBar");e=o.getFromEnv("toolbox"),t=o.getFromEnv("toolBoxAPI").Scroller,l||i.setLinkedItem("scrollBar",l=new t),l.configure({isHorizontal:!n.isVertical},e.idCount,e.pId,i.getFromEnv("chartInstance").id),l.attachEventHandlers({scrollStart:function(e){a=e,o.fireChartInstanceEvent("scrollstart",{scrollPosition:e})},scroll:function(e){let t=n.axisRange.max,a=n.axisRange.min,l=i.getVisibleConfig(),s=l.minValue,c=l.maxValue-s,d=p(a,t-c),h=n.isReverse?d(1-e):d(e);i.setState("scrolling",!0),r.setAnimationState("scroll"),o.fireChartInstanceEvent("onScroll",{scrollPosition:e}),i.setVisibleConfig(h,h+c)},scrollEnd:function(e){o.fireChartInstanceEvent("scrollend",{scrollPosition:e,prevScrollPosition:a})}})}_disposeScrollBar(){var e=this.getLinkedItem("scrollBar");e&&(e.hide(),this.removeLinkedItem("scrollBar"))}_drawScrollBar(){var e,t,a,i,o,r,l,s,c,d,h,g,b,m,p,u,f=this,v=f.getFromEnv("chart"),x=f.config,y=x.axisRange,C=x.scrollOptions||(x.scrollOptions={}),O=y.max,L=y.min,w=C.vxLength,k=f.getLinkedItem("scrollBar"),j=v.getChildren("canvas")[0].config,S=x.scrollerContainer;k&&(e=j.canvasLeft,t=j.canvasTop,a=j.canvasHeight,i=j.canvasWidth,o=j.canvasBorderWidth,r=x.showAxisLine&&x.axisLineThickness||0,l=Object(n.Bb)(o,x.lineStartExtension),s=Object(n.Bb)(o,x.lineEndExtension),C.viewPortMin=L,C.viewPortMax=O,c=(m=(g=f.getVisibleConfig()).maxValue-(b=g.minValue))/(p=y.max-y.min),u=(b-y.min)/(p-m),d=C.windowedCanvasWidth=f.getPixel(w,P),h=C.fullCanvasWidth=f.getPixel(O-L,P)-d,x.isVertical?k.draw(e,t,{height:a,scrollRatio:c,roundEdges:j.isRoundEdges,fullCanvasWidth:h,windowedCanvasWidth:d,scrollPosition:x.isReverse?1-u:u,parentLayer:S}):k.draw(e-l,t+a+o+r-2,{width:i+l+s,scrollRatio:c,roundEdges:j.isRoundEdges,fullCanvasWidth:h,windowedCanvasWidth:d,scrollPosition:u,parentLayer:S}))}enableScroll(){this.isScrollEnabled()||this._createScrollBar()}disableScroll(){this.isScrollEnabled()&&this._disposeScrollBar()}isScrollEnabled(){return!!this.getLinkedItem("scrollBar")}setVisibleConfig(e,t){let a,i=this,n=i.config,o=i.getZoom(),r=i.getScale();return!(e>=t||e<n.axisRange.min||t>n.axisRange.max||(a=r.setDomain([e,t]).getDomain(),n.visibleMin=a[0],n.visibleMax=a[1],n.zoom=i._computeZoom(),n.translation=i._computeTranslation(),(1!==o||1!==i.getZoom())&&(n.ticks=i.generateTicks(),n.minorTicks=i.generateMinorTicks(),n.tickValues&&i.calculateTicksOnLabelMode&&i.calculateTicksOnLabelMode()),i.decideScroll(),i.clearReferenceInfo(),i._parseReferenceVisuals(),i.fireEvent("visiblerangeset",{minValue:e,maxValue:t}),i.asyncDraw(),0))}hide(){var e=this.config;e.axisContainer&&(e.axisLabelContainerTop.hide(),e.scrollerContainer.hide(),e.axisContainer.hide(),e.axisNameContainer.hide(),e.axisTrendLabelContainer.hide(),e.axisAxisLineContainer.hide(),e.axisAxisLineContainerBottom.hide())}show(){var e=this.config;e.axisContainer&&(e.axisLabelContainerTop.show(),e.scrollerContainer.show(),e.axisContainer.show(),e.axisNameContainer.show(),e.axisTrendLabelContainer.show(),e.axisAxisLineContainer.show(),e.axisAxisLineContainerBottom.show())}getZoom(){return this.config.zoom||1}_computeTranslation(){let e=this.config,t=this.getVisibleConfig(),a=Object(n.Bb)(t.minValue,e.axisRange.min,0),i=Object(n.Bb)(e.axisRange.min,t.minValue,0);return this.getPixel(a)-this.getPixel(i)}_computeZoom(){let e=this.config,t=this.getVisibleConfig(),a=Object(n.Bb)(t.minValue,e.axisRange.min,0),i=Object(n.Bb)(t.maxValue,e.axisRange.max,1),o=Object(n.Bb)(e.axisRange.min,t.minValue,0),r=Object(n.Bb)(e.axisRange.max,t.maxValue,1),l=e.maxZoomLimit,s=(r-o)/(i-a);return s>l?l:s}getTickValues(){var e=this.config.tickValues;return e&&e.tickValue||[]}dataLabels(e){var t=this.config.axisIndex;return this.getFromEnv("number-formatter").dataLabels(e,t)}getAxisBase(){let{minValue:e,maxValue:t}=this.getVisibleConfig();return 0>e&&0<t?0:0>=t?t:e}_parseReferenceVisuals(){var e,t,a=this,i=a.config,n=a.getTickValues(),o=n.length,r=a.getFromEnv("chartConfig").is3D;i.isActive||(e=i.lines.isDraw,t=i.band.isDraw,i.lines.isDraw=0,i.band.isDraw=0),i.tickValues?i.drawLabels&&a._parseCategoryLine(n,0,o):i.drawPlotlines&&a._parsePlotLine(),i.tickValues&&"auto"!==i.xAxisLabelMode?(i.drawPlotlines&&!r&&a._parseCategoryPlotLine(),i.drawPlotBands&&!r&&a._parseCategoryPlotBand(),"mixed"===i.xAxisLabelMode&&i.drawPlotBands&&!r&&a._parsePlotBand()):i.drawPlotBands&&!r&&a._parsePlotBand(),i.isActive||(i.lines.isDraw=e,i.band.isDraw=t),i.drawTrendLines&&a._parseTrendLine()}_parseCategoryPlotBand(){var e,t,a,i,o,r=this,s=r.config,c=s.tickValues.tickValue,d=s.showAlternateGridColor,h=s.alternateGridColor,g=s.alternateGridAlpha,b=s._allTicks,m=r.getLimit(),p=m.min,u=m.max,f=T(r.getVisibleConfig());if((!c[0]||c[0].x===n.D&&c[0].y===n.D)&&d&&s.band.isDraw&&s.categoryNumDivLines)for(e={fill:Object(n.Mb)(Object(l.c)(h,g)),"stroke-width":0},t=0,o=0;o<b.length;++t,++o)f(b[o],b[o+1])&&(a=b[o],0==t%2)&&(i=b[o+1])!==n.D&&(a===p&&(a="canvasStart"),i===u&&(i="canvasEnd"),r.setReferenceInfo({from:a,to:i,layer:0,type:"band",attr:e}))}_parseTrendLine(){var e,t,a,i,o,r,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O=this,L=O.config,w=L.isVertical,k=L.axisIndex,j=O.getFromEnv("chart-attrib"),S=O.getFromEnv("number-formatter"),A=L.axisRange,F=A.max,B=A.min,T=L.trend.trendStyle,E={fontFamily:T.fontFamily,fontSize:T.fontSize,lineHeight:T.lineHeight,fontWeight:T.fontWeight,fontStyle:T.fontStyle},P=L.vTrendLines,_=L.trendLines,D=0;if(s=_||P)for(a=0,i=s.length;a<i;a+=1)for(e=0,t=s[a].line&&s[a].line.length;e<t;e+=1)g=s[a].line[e],v=w?"yAxis":"xAxis",p=g.startvalue||g.value||0,p=S.getCleanValue(Object(n.zb)(g.startvalue,g.value,0)),u=+g.endvalue||n.D,o=Object(n.hb)(Object(n.xb)(Object(n.zb)(s[a].line[e].tooltext,s[0].tooltext,L.trendlineToolText))),o=Object(n.wb)(o,[7,15,16,17,18,19],{startValue:p,startDataValue:S[v](p,k),endValue:u||p,endDataValue:S[v](u||p,k),axisName:L.axisName},g),!(p>F||p<B||u>F||u<B)&&(P?(b=Object(n.xb)(g.displayvalue||""),c=Object(n.Bb)(g.istrendzone,L.isTrendZone,1),u!==n.D&&""!==u&&u!==p&&c?(d={fill:Object(l.c)(Object(n.zb)(g.color,L.trendlineColor),Object(n.zb)(g.alpha,L.trendlineAlpha,40)),"stroke-width":0},h={fill:Object(l.c)(Object(n.zb)(g.color,T.color),Object(n.zb)(g.alpha,L.trendlineAlpha,99)),"vertical-align":n.w,text:b}):(f=Object(n.Bb)(g.thickness,L.trendlineThickness,1),d={stroke:Object(l.c)(Object(n.zb)(g.color,L.trendlineColor),Object(n.zb)(g.alpha,L.trendlineAlpha,99)),"stroke-width":f,"stroke-dasharray":Object(n.zb)(g.dashed,L.trendlinesAreDashed)===n.o?Object(n.Y)(Object(n.Bb)(g.dashlen,L.trendlinesDashLen),Object(n.Bb)(g.dashgap,L.trendlinesDashGap)):n.j},h={fill:Object(l.c)(Object(n.zb)(g.color,T.color),Object(n.zb)(g.alpha,L.trendlineAlpha,99)),"vertical-align":n.w,text:b})):_&&(b=Object(n.zb)(Object(n.xb)(g.displayvalue),g.startvalue,""),m=Object(n.Bb)(g.valueonright,0),c=Object(n.Bb)(g.istrendzone,L.isTrendZone,0),u!==n.D&&""!==u&&u!==p&&c?(d={fill:Object(l.c)(Object(n.zb)(g.color,L.trendlineColor),Object(n.zb)(g.alpha,L.trendlineAlpha,40)),"stroke-width":0},h={"text-anchor":m?n.v:n.r,fill:Object(l.c)(Object(n.zb)(g.color,T.color),Object(n.zb)(g.alpha,L.trendlineAlpha,99)),text:b}):(f=Object(n.Bb)(g.thickness,L.trendlineThickness,1),d={stroke:Object(l.c)(Object(n.zb)(g.color,L.trendlineColor),Object(n.zb)(g.alpha,L.trendlineAlpha,99)),"stroke-width":f,"stroke-dasharray":Object(n.zb)(g.dashed,L.trendlinesAreDashed)===n.o?Object(n.Y)(Object(n.Bb)(g.dashlen,L.trendlinesDashLen),Object(n.Bb)(g.dashgap,L.trendlinesDashGap)):n.j},h={"text-anchor":m?n.v:n.r,fill:Object(l.c)(Object(n.zb)(g.color,T.color),Object(n.zb)(g.alpha,g.alpha,L.trendlineAlpha,99)),text:b})),h["text-bound"]=h.text?[T.backgroundColor,T.borderColor,T.borderThickness,T.borderPadding,T.borderRadius,T.borderDash]:[],L.showTooltip&&o||(o=""),r=L.forceTrendBelow?0:Object(n.Bb)(g.showontop,j.showtrendlinesontop,0),w?(x=p,C=u===n.D?p:u):(x=u===n.D?p:u,C=p),y=c&&x!==C?"band":"line",x!==n.D&&O.setReferenceInfo({from:x,to:C,toolText:o,attr:d,layer:r?3:2,type:y,id:"trend"+D+y}),L.parsedTrendLabels.push({css:E,valueOnRight:m,isTrendZone:c,from:p,to:u,attr:h}),D+=1)}_parsePlotLine(){var e,t,a,i,o,r=this,s=r.config,c=s.axisRange,d=c.max,h=c.min,g=E(r.getVisibleConfig()),b=s.showCanvasBorder,m=Object(l.c)(s.divLineColor,s.divLineAlpha),p=s.divLineThickness,u=s.divLineIsDashed?Object(n.Y)(s.divLineDashLen,s.divLineDashGap):n.j,f=Object(l.c)(s.zeroPlaneColor,s.zeroPlaneAlpha),v=s.zeroPlaneThickness,x=s._allTicks,y=x.length,C=s.showZeroPlaneOnTop,O=s.minorTicks,L=O&&O.length;if(s.lines.isDraw)for(t=0;t<y;++t)g(e=x[t])&&(i={"stroke-dasharray":u},!(0===s.showZeroPlane&&0===e||b&&(e===d||e===h)))&&(0===e&&e!==h&&e!==d?(i.stroke=f,i["stroke-width"]=v,C=s.showZeroPlaneOnTop):(C=0,i.stroke=m,i["stroke-width"]=p),r.setReferenceInfo({type:"line",from:e,layer:0===e&&C?3:1,attr:i}));for(o={stroke:s.minorDivlinecolor,"stroke-width":s.minorDivLineThickness,"stroke-dasharray":u},t=0;t<L;++t)a=O[t],r.setReferenceInfo({type:"line",from:a,layer:1,attr:o})}_parseCategoryLine(e,t,a){var i,o,r,s,c,d,h=this,g=h.config,b=h.getFromEnv("color-manager"),m=h.getFromEnv("chartInstance").getJSONData().categories,p={};if(t=t||0,a=a||e?e.length-1:0,g.drawPlotlines)for(d=1!==h.getZoom(),r=this.getVisibleConfig(),m&&m[0]&&(p.verticalLineColor=m[0].verticallinecolor,p.verticalLineAlpha=m[0].verticallinealpha,p.verticalLineThickness=m[0].verticallinethickness,p.verticalLineDashed=m[0].verticallinedashed,p.verticalLineDashLen=m[0].verticallinedashlen,p.verticalLineDashGap=m[0].verticallinedashgap),i=t;i<=a;i+=1)(o=e[i])&&(c=Object(n.Bb)(o.x,o.y,i),1==+o.showverticalline)&&(d&&(c<r.minValue||c>r.maxValue)||((s={stroke:Object(l.c)(Object(n.zb)(o.linecolor,p.verticalLineColor,g.divLineColor,b.getColor("divLineColor")),Object(n.zb)(o.linealpha,p.verticalLineAlpha,b.getColor("divLineAlpha"))),"stroke-width":Object(n.Bb)(o.linethickness,p.verticalLineThickness,1)})["stroke-dasharray"]=Object(n.Bb)(o.linedashed,p.verticalLineDashed,0)?Object(n.Y)(Object(n.Bb)(o.linedashLen,p.verticalLineDashLen,4),Object(n.Bb)(o.linedashgap,p.verticalLineDashGap,2),s["stroke-width"]):n.j,h.setReferenceInfo({type:"line",from:c,layer:1,attr:s})))}_parsePlotBand(){var e,t,a,i,o,r,s=Math.min,c=Math.max,d=this,h=d.config,g=h.showAlternateGridColor,b=h.alternateGridColor,m=h.alternateGridAlpha,p=h._allTicks,u=T(d.getVisibleConfig()),f=h.isReverse;if(g&&h.band.isDraw)for(t=1,e={fill:Object(n.Mb)(Object(l.c)(b,m)),"stroke-width":0},i=0,a=p.length;i<a;++i,++t)u(p[i],p[i+1])&&0==t%2&&p[i+1]!==n.D&&(r=f?c(p[i],p[i+1]):s(p[i],p[i+1]),o=f?s(p[i],p[i+1]):c(p[i],p[i+1]),d.setReferenceInfo({from:r,to:o,type:"band",layer:0,attr:e}))}getReferenceInfo(){return this.config.referenceInfo}setReferenceInfo(e){this.config.referenceInfo.push(e)}clearReferenceInfo(){let e=this.config;e.referenceInfo=[],e.parsedTrendLabels=[],e.parsedVlineInfo=[]}resetStoredLimits(){this.config.dataLimit={}}decideScroll(){let e=this,t=e.getScrollType();"always"===t||"smart"===t&&1!==e.getZoom()?e.enableScroll():e.disableScroll()}getAxisDimension(){let{x:e,y:t,opposite:a,axisLength:i}=this.config.axisDimention;return{x:e,y:t,opposite:a,axisLength:i}}}D.prototype.setAxisDimention=function(e){var t=this,a=t.getScale(),i=t.config,o=t.getFromEnv("chart").config,r=i.axisDimention||(i.axisDimention={}),l=i.isReverse;r.opposite=Object(n.Bb)(e.opposite,r.opposite),r.x=Object(n.Bb)(e.x,r.x,o.canvasLeft),r.y=Object(n.Bb)(e.y,r.y,o.canvasTop),r.axisLength=Object(n.Bb)(e.axisLength,r.axisLength),i.isVertical?l?a.setRange([r.y+r.axisLength,r.y]):a.setRange([r.y,r.y+r.axisLength]):l?a.setRange([r.x+r.axisLength,r.x]):a.setRange([r.x,r.x+r.axisLength]),i.translation=t._computeTranslation()},D.prototype.shiftLabels=function(e,t){var a=this.config.labels;a.shiftX=e,a.shiftY=t},D.prototype._createContainer=function(){let e,t,a,i,n,o=this,r=o.config,l=r.isVertical,s=o.getLinkedParent().getChildContainer(),c=s.axisBottomGroup,d=s.axisTopGroup,h=-o.getTranslation(),g=l?`T0,${h}`:`T${h},0`;t=o.createContainer("axisNameGroup",{name:"dataset-Name-group"},c),e=o.createContainer("axisLineGroup",{name:"axis-Line-group"},d),a=o.createContainer("axisTrendGroupTop",{name:"dataset-Trend-group-top"},d),i=o.createContainer("axisLabelGroup",{name:"dataset-Label-group"},c),n=o.createContainer("axisLabelGroupTop",{name:"dataset-Label-group"},d),r.scrollerContainer=o.createGroup("scrollerContainer",{name:"scroller-container"},e,"scroller"),r.axisContainer=o.createGroup("axisContainer",{name:"dataset-axis",transform:g},i),r.axisLabelContainerTop=o.createGroup("axisLabelContainerTop",{name:"dataset-top-label",transform:g},n),r.axisAxisLineContainer=o.createGroup("axisAxisLineContainer",{name:"axis-line-tick"},e),r.axisTrendLabelContainer=o.createGroup("axisTrendLabelContainer",{name:"dataset-axis-trend-label"},a),r.axisNameContainer=o.createGroup("axisNameContainer",{name:"dataset-axis-name"},t),r.axisAxisLineContainerBottom=o.createGroup("axisAxisLineContainerBottom",{name:"axis-line-tick-bottom"},c)};var I=D;const M=3,V=10;class z extends I{_getHMaxLabelDimention(e){function t(e,t){switch(t.toLowerCase()){case"left":return W(Y._getCustomPixel(e));case"right":return W(K.width-Y._getCustomPixel(e))}}var a,i,o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j,S,A,F,B,T,E,P,D,I,z=Math.ceil,R=Math.max,N=Math.floor,G=Math.min,W=Math.abs,H=Number.POSITIVE_INFINITY,Y=this,X=Y.config,Z=Y.getFromEnv("chart"),K=Z.config,U=Z.getFromEnv("smartLabel"),J=X.axisRange,q=X.labels,$=X.labelDisplay,Q=X.slantLabel,ee=q.style,te=X.maxLabelHeight,ae=Y.getInterval(),ie=X.staggerLines,ne=X.labelStep,oe=K.canvasLeft,re=K.canvasRight,le=ie-2,se=J.max,ce=J.min,de=0,he=X.tickValues&&X.tickValues.tickValue,ge=he&&he.length,be=Z.distributedColumns,me=0,pe={text:n.D,width:0,style:n.D},ue=0,fe=4,ve=n.Kb,xe=n.Kb,ye=n.Kb,Ce={},Oe=0,Le=!1,we=0,ke=!1,je=H,Se=X.ticks,Ae=H;if(be)for(v=0;v<ge;v++)he[v+1]?he[v].x&&(he[v].plotWidth=Y.getPixel(he[v+1].x-he[v].x)-Y.getPixel(0)):he[v].plotWidth=Y.getPixel(K.canvasRight-he[v].x)-Y.getPixel(0);if(X.tickValues&&(!he||0===he.length))return{width:0,height:0};if("rotate"===$&&(X.rotateLabels=1),X.tickValues||(X.irregularCatAxis=!1),X.sWidthAdjstFactor=i=0==le?1:1==le?1.5:le,U.useEllipsesOnOverflow(K.useEllipsesWhenOverflow),U.setStyle({fontSize:ee.fontSize,fontFamily:ee.fontFamily,lineHeight:ee.lineHeight,fontWeight:ee.fontWeight}),X.irregularCatAxis){for(he.sort(function(e,t){return e.x-t.x}),v=0,me=he.length;v<me;v++){if(l=he[v],void 0!==w){if(Ae=W(l.x-w),j=W(Y._getCustomPixel(ce)-Y._getCustomPixel(ce+Ae)),U.setStyle(Object.assign({},l.style)),j<1.2*U.getOriSize("W").width){l.label="",Ae=je;continue}S._individualIWR=j,l._individualIWL=j,je=Ae}S=l,w=l.x}for(Ae===H&&(Ae=N(G(l.x,se-l.x)),Ae=R(Ae,4)),v=0,me=he.length;v<me;v++)l=he[v],v||(l._individualIWL=1/0),v===me-1&&(l._individualIWR=1/0),l.individualIW=G(l._individualIWL,l._individualIWR);c=W(Y._getCustomPixel(ce)-Y._getCustomPixel(ce+Ae)),c=G(2*t(he[0].x,"left"),2*t(he[me-1].x,"right"),c)}else c=W(Y._getCustomPixel(ce)-Y._getCustomPixel(ce+ae));if(e=te||e,Ce.__root__={getHeight:function(e){var t=he[e]._ovrStyle.lineHeight;return parseInt(t.replace(/(\d+)px/,"$1"),10)},getWidth:function(){return e},getCalculatedLabelStep:function(e){var t,a,i,o,r,l,h,g,b,m,p=0,u=e.length,f=Number.NEGATIVE_INFINITY,v={},x=0;for(p=0;p<u;p++)(o=e[p]).style=o.style||{};if(X.irregularCatAxis)return X.labelStep;for(p=0;p<u;p++)(o=e[p])&&(o.label||(o.label=""),r=o.oriLabel||o.label,s={fontSize:ee.fontSize,fontFamily:ee.fontFamily,lineHeight:ee.lineHeight,fontWeight:ee.fontWeight},x++,o.style=o.style||{},Object(n.T)(s,o.style),v[t=s.fontSize+s.fontFamily+s.lineHeight+s.fontWeight]?r.length>v[t].label.length&&(v[t].label=r):v[t]={label:r,style:s});for(l in v)v.hasOwnProperty(l)&&(a=v[l].style,i=v[l].label,a.lineHeight=Object(n.Jb)(a),U.setStyle(a),X.rotateLabels&&(b=parseInt(a.lineHeight.replace(/(\d+)px/,"$1"),10)),d=U.getSmartText(i,n.D,b),g=0===X.rotateLabels?60<d.width?60:d.width:d.height,f=R(g,f));return h=N(W(Y._getCustomPixel(se)-Y._getCustomPixel(ce))/f),m=R(z(x/h),X.labelStep),c=W(Y._getCustomPixel(ce)-Y._getCustomPixel(ce+m)),x<=h?X.labelStep:m}},Ce._inProp={},Ce.getCopyById=function(e){var t,a=this._inProp,i=this.__root__,o=a.copyStore;return(t=(o=o||{})[e])||(Object(n.T)(t=o[e]={},i),t)},X.tickValues){for("rotate"===$?(q.rotation=Q?300:270,b=Ce.getCopyById("rotate")):"stagger"===$?((b=Ce.getCopyById("stagger")).getHeight=function(e){var t,a;return a=(t=X.tickValues.tickValue[e])&&t.style||(t.style={}),s={fontSize:ee.fontSize,fontFamily:ee.fontFamily,lineHeight:ee.lineHeight,fontWeight:ee.fontWeight},Object(n.T)(s,a),U.setStyle(s),U.getOriSize(t.label).height},b.getWidth=function(e){return fe=1,e.individualIW?e.individualIW:2*c*i-fe},ye=function(t){var a,i,n,o,r,l,s=t.length,c=0;if(U.setStyle(ee),n=U.getOriSize("WWW").height,i=t[s-1],N(i._cumulativeSum)<=z(s*(n+2)))r=N(e/n),ie=0>r-ie?r:ie;else{r=N(e/(n+4));do{for(c=0,o=(l=r)-1,s=t.length;o<s;){if(s-o<r&&(o=s-1),~~((a=t[o])._cumulativeSum-c)>-~e){Le=!0;break}Le=!1,c=a._cumulativeSum,o+=l}}while(r--&&Le);ie=G(ie,++r)}X.drawnStaggerLines=ie},ve=function(e){var t,a,i,n,r=0;for(n=0,a=e.length;n<a;n++)!(t=e[n]).stepSkipped&&((i=(t&&t.style||{}).lineHeight)||(i=ee.lineHeight),o=r++%ie,t.labelPadding=o?i.replace(/px/i,"")*o:0)}):"none"===$?((b=Ce.getCopyById("none")).getHeight=n.Kb,b.getWidth=n.Kb,xe=n.Kb,X.rotateLabels&&(q.rotation=Q?300:270,k=e),b.getCalculatedLabelStep=function(){return X.labelStep}):((b=Ce.getCopyById("auto")).getHeight=function(){return e},b.getWidth=function(e){return e.individualIW?e.individualIW:c-2*fe},xe=function(e,t){var a,i,o,r,l=Z.getFromEnv("chart-attrib"),s=Object(n.Bb)(l&&l.rotatelabels);if(!X.irregularCatAxis&&(U.setStyle(e),U.getOriSize("WWW").width>=c&&0!==s)){for(q.rotation=Q?300:270,q.forceRotate=!0,b=Ce.getCopyById("rotate"),h=b.getWidth,g=b.getHeight,pe.width=0,a=0,i=t.length;a<i;a++)(o=t[a])&&(o.label||o.oriLabel)&&0!==Object(n.Bb)(o.showlabel,X.showLabels,1)&&!0!==o.stepSkipped&&(r=o._ovrStyle,U.setStyle({fontSize:r.fontSize,fontFamily:r.fontFamily,lineHeight:r.lineHeight,fontWeight:r.fontWeight}),d=U.getSmartText(o.oriLabel,h(o),g(a)),o.label=d.text,o.labelTooltext=d.tooltext,o._sLabel=d,pe.width<d.width&&(pe.text=d.text,pe.width=d.width,pe.height=d.height,pe.style=r));m=pe.text}}),h=b.getWidth,g=b.getHeight,ne=X.labels.step=X.labelStep=X._oriLabelStep,ne=X.labels.step=X.labelStep=b.getCalculatedLabelStep(he),v=_(he),p=0,x=0,me=he.length;v<me;v++,p++)if((l=he[v])&&(l.label||l.oriLabel)&&0!==Object(n.Bb)(l.showlabel,X.showLabels,1)){if(ke=!0,s={fontSize:ee.fontSize,fontFamily:ee.fontFamily,lineHeight:ee.lineHeight,fontWeight:ee.fontWeight},Object(n.T)(s,l.style),s.lineHeight=Object(n.Jb)(s),(P=s.fontSize+s.fontFamily+s.lineHeight+s.fontWeight)!=E&&(U.setStyle(s),E=P),p%ne){l.stepSkipped=!0,l.appliedSmartLabel=!1,we++;continue}l.appliedSmartLabel=!0,l.stepSkipped=!1,l._ovrStyle=s,he[v].plotWidth?a=R("rotate"===$?he[v].plotWidth-6:0,g(v)):("rotate"===$?v<me-1&&(r=Y.getPixel(v+1)-Y.getPixel(v)-V):r=0,"rotate"===$&&isNaN(+r)&&(r=K.canvasWidth/Y.getVisibleLength()-M),a=R(r,g(v))),Oe+=(d=U.getSmartText(l.oriLabel||l.label,h(l),a)).height+2,Y.components.labels[x++]={config:{width:d.width,height:d.height,props:{label:{}}}},l._cumulativeSum=Oe,l.oriLabel=l.oriLabel||l.label,l.label=d.text,l.labelTooltext=d.tooltext,l._sLabel=d,pe.width<d.oriTextWidth&&(Object(n.T)(pe,d),pe.style=s),ue<d.height&&(ue=d.height)}if(!ke)return{height:0,width:0};if(ye(he,we),ve(he,we),xe(pe.style,he),m=pe.text||"","mixed"===X.xAxisLabelMode)for(O=X.isPercent?Z.getFromEnv("number-formatter").percentValue:Z.getFromEnv("number-formatter").xAxis,de=m.length,v=0,D=Se&&Se.length;v<D;++v)C=Se[v],(y=""+O.call(Z.getFromEnv("number-formatter"),C,X.axisIndex)).length>de&&(m=y,de=y.length);for(pe.height=R(ue,pe.height||0),B=he.length,v=0,me=he.length;v<me&&!(A=he[v])._sLabel;v++);for(v=(me=he.length)-1;0<=v&&!(F=he[v])._sLabel;v--);T=1!==Y.getZoom(),q.rotation||T||!A._sLabel?(X.axisEndLabelDisplaySpace.left=0,X.axisEndLabelDisplaySpace.right=0):(X.axisEndLabelDisplaySpace.left=R(oe-(Y._getCustomPixel(A.x||0)-A._sLabel.width/2),0),X.axisEndLabelDisplaySpace.right=R(Y._getCustomPixel(F.x||B-1)+F._sLabel.width/2-re,0)),L=pe}else{for(O=X.numberFormatterFn?Z.getFromEnv("number-formatter")[X.numberFormatterFn]:X.isPercent?Z.getFromEnv("number-formatter").percentValue:Z.getFromEnv("number-formatter").xAxis,v=0,D=Se&&Se.length;v<D;++v)I=Se[v],C=Object(n.Lb)(I,10),y=""+O.call(Z.getFromEnv("number-formatter"),C,X.axisIndex),I===ce&&(u=y),I===se&&(f=y),L=U.getOriSize(y),Y.components.labels[v]={config:{width:L.width,height:L.height,props:{label:{}}}},y.length>de&&(m=y,de=y.length);U.setStyle({fontSize:ee.fontSize,fontFamily:ee.fontFamily,lineHeight:ee.lineHeight,fontWeight:ee.fontWeight}),L=U.getOriSize(m||""),"rotate"===$&&(q.rotation=270),X.rotateLabels&&(q.rotation=Q?300:270),q.rotation||(u=U.getOriSize(u||""),f=U.getOriSize(f||""),X.axisEndLabelDisplaySpace.left=u.width/2+2,X.axisEndLabelDisplaySpace.right=f.width/2+2)}return X.tickValues&&"stagger"===$&&(L.height=ie*pe.height),L.width=k?G(k,L.width):L.width,L.width=Object(n.Bb)(L.width),L.maxWidth=Object(n.Bb)(L.maxWidth),L}_getVMaxLabelDimention(e){var t,a,i,o,r,l,s,c,d,h,g,b,m,p,u=this,f=u.config,v=u.getFromEnv("chart"),x=v.config,y=v.getFromEnv("smartLabel"),C=f.labels.style,O=f.useEllipsesWhenOverflow,L=f.maxLabelWidthPercent,w=f.minLabelWidthPercent,k=0,j=v.getFromEnv("dataSource").categories,S={height:0,width:0},A=f.ticks,F={};if(y.useEllipsesOnOverflow(x.useEllipsesWhenOverflow),y.setStyle({fontSize:C.fontSize,fontFamily:C.fontFamily,lineHeight:C.lineHeight,fontWeight:C.fontWeight}),f.tickValues){for(j&&(F={fontFamily:j[0].font,fontSize:j[0].fontsize,color:j[0].fontcolor}),L&&((a=L/100*x.width)<e&&(e=a)),w&&((i=w/100*x.width)>e&&(e=i)),o=0,d=(c=f.tickValues.tickValue).length;o<d;o++)h=c[o],0!==Object(n.Bb)(h.showlabel,f.showLabels)&&(m={fontFamily:Object(n.zb)(h.font,h.labelfont,F.fontFamily,C.fontFamily),fontSize:Object(n.zb)(h.fontsize,h.labelfontsize,F.fontSize,C.fontSize).replace(/px/i,"")+"px",fontWeight:"normal"==C.fontWeight?Object(n.Bb)(h.fontbold,h.labelfontbold,0)?"bold":"normal":C.fontWeight,fontStyle:"normal"==C.fontStyle?Object(n.Bb)(h.fontitalic,h.labelfontitalic,0)?"italic":"normal":C.fontStyle},(p={fontFamily:Object(n.zb)(m.fontFamily,F.fontFamily,C.fontFamily),fontSize:Object(n.zb)(m.fontSize,F.fontSize,C.fontSize),fontWeight:Object(n.zb)(m.fontWeight,C.fontWeight),fontStyle:Object(n.zb)(m.fontStyle,C.fontStyle)}).lineHeight=Object(n.Jb)(p),y.setStyle(p),g=y.getSmartText(h.oriLabel||h.label,e,C.lineHeight,O),u.components.labels[o]={config:{width:g.width,height:g.height,props:{label:{}}}},h.oriLabel=h.oriLabel||h.label,h.label=s=g.text,h.labelTooltext=g.tooltext,g.width>k&&(S=g,k=g.width));return S}for(b=f.numberFormatterFn?v.getFromEnv("number-formatter")[f.numberFormatterFn]:f.isPercent?v.getFromEnv("number-formatter").percentValue:v.getFromEnv("number-formatter").yAxis,o=0,r=A&&A.length;o<r;++o)l=Object(n.Lb)(A[o],10),s=""+b.call(v.getFromEnv("number-formatter"),l,f.axisIndex),g=y.getSmartText(s),u.components.labels[o]={config:{width:g.width,height:g.height,props:{label:{}}}},s.length>k&&(t=s,k=s.length);return y.getOriSize(t)}getCleanValue(e,t){return this.getFromEnv("number-formatter").getCleanValue(e,t)}generateMinorTicks(){if(this)return[]}setCanvas(e){this.config.canvas=e}_adjustNumberFormatter(e){var t,a,i=this.config,o=i.axisIndex,r=i.isVertical,l=this.getFromEnv("chart").getFromEnv("number-formatter"),s=i._defaultDecimalPrecision,c=i._defaultForceDecimal,d=0;a=r||"yAxis"===i.numberFormatterFn?(l.Y[o]||l.Y[0]).yAxisLabelConf:l.paramX,s===n.D?i._defaultDecimalPrecision=a.decimalprecision:a.decimalprecision=s,c===n.D?i._defaultForceDecimal=a.forcedecimals:a.forcedecimals=c,0<parseInt(e,10)||(t=e.toString().split(".")[1])&&((d=t.match(/^[0]*/)[0].length+1)>a.decimalprecision&&(a.forcedecimals=1),a.decimalprecision=Math.max(d,a.decimalprecision))}setLabelConfig(e){var t,a=this.config.labels;for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t])}}z.prototype._parseLabel=function(){var e,t,a,i,o,r,l,s,c,d,h,g,b,m,p,u,f=Math.ceil,v=this,x=v.config,y=v.getLinkedItem("canvas").getEffectiveDimensions(),C=x.axisDimention,L=v.getFromEnv("chart"),w=L.config,k=x.axisRange,j=x.isOpposit,S=x.labels,A=v.components,F=A.labels,B=S.style,T=L.getFromEnv("smartLabel"),E=x.isVertical,P=k.max,_=k.min,D=v.getFromEnv("number-formatter"),I=y.top,M=y.left,V=I+y.height,z=M+y.width,R=x.labelPadding,N=x.extremeLabels,G=E?C.x:C.y,W=C.opposite,H=x.labelMaxH,Y=x.labelMaxW,X=k.tickInterval,Z=Math.abs(v.getPixel(_,O)-v.getPixel(_+X,O)),K=[],U=x.ticks,J=0,q=x.isReverse,$=Object(n.Bb)(v.getFromEnv("chart-attrib").showzeroplanevalue),Q=!0,ee=v.getLimit();if(T.useEllipsesOnOverflow(w.useEllipsesWhenOverflow),T.setStyle({fontSize:B.fontSize,fontFamily:B.fontFamily,lineHeight:B.lineHeight,fontWeight:B.fontWeight}),(i=B.lineHeight)&&-1!==i.indexOf("px")&&(i=parseFloat(i.replace("px",""))),0===$&&(Q=!1),x.labels.isDraw){if(x.drawLabelsOpposit&&(j=!j,G=W),c={fill:B.color,"line-height":i,"font-size":B.fontSize,opacity:1},a=x.labels.rotation,E?(x.labelMaxH>Z&&!x.tickValues&&(l=f(x.labelMaxH/Z)),c["text-anchor"]=j?n.v:n.r):(x.labelMaxW>Z&&!x.tickValues&&(l=f(x.labelMaxW/Z)),a?(c["text-anchor"]=j?n.v:n.r,c["vertical-align"]="middle"):c["vertical-align"]=j?n.q:n.w,h=M,g=w.width-z),l>x.labels.step&&(x.labels.step=l),s=x.numberFormatterFn?D[x.numberFormatterFn]:x.isPercent?D.percentValue:E?D.yAxis:D.xAxis,N.firstLabel={},N.lastLabel={},u=U.filter((e,t,a)=>0!==e||x.showZeroPlaneValue?(E||t===a.length-1||!(v.getPixel(e,O)+x.labelMaxW>z))&&(0==t%x.labels.step?(K[J++]=t,!0):!(!x.labels.drawLimitVal||0!==t&&t!==a.length-1||(K[J++]=t,0))):Q&&(!Q||ee.max===e||ee.min===e)&&(K[J++]=t,!0)),x.isZeroTickForced&&-1!==u.indexOf(0)){let e;J=0,K=[],p=v.getPixel(0),u=u.filter((t,a,i)=>(e=v.getPixel(t),0===i[a+1]||0===i[a-1]?E?!(e+H>=p&&p>=e-H||(K[J++]=a,0)):!(e+Y>=p&&p>=e-Y||(K[J++]=a,0)):(K[J++]=a,!0)))}for(o=(E?Y:Z/2)*x.labels.step,r=E?Z/2:H,A.labelIndexArr=K.slice(),e=0,t=u.length;e<t;e+=1)b=u[e],F[K[e]]=F[K[e]]||{config:{props:{label:{}}}},d=Object.assign({},c),m=n.D,(x.labels.drawNormalVal||b===_||b===P)&&(x.labels.drawLimitVal||b!==_&&b!==P)?b===_&&x.lowerLimitDisplay&&x.labels.drawLimitVal?(m=T.getSmartText(x.lowerLimitDisplay,o,r+i/2),d.text=m.text,d.tooltext=m.tooltext):b===P&&x.upperLimitDisplay&&x.labels.drawLimitVal?(m=T.getSmartText(x.upperLimitDisplay,o,r+i/2),d.text=m.text,d.tooltext=m.tooltext):(d.text=""+s.call(D,b,x.axisIndex),m=T.getOriSize(d.text)):d.text="",E?(d.x=j?(G||z)+R:(G||M)-R,d.y=v.getPixel(b,O),(q&&b===_&&x.lowerLimitDisplay||!q&&b===P&&x.upperLimitDisplay)&&m&&m.height>i&&(d["vertical-align"]=n.q),(q&&b===P&&x.upperLimitDisplay||!q&&b===_&&x.lowerLimitDisplay)&&m&&m.height>i&&(d["vertical-align"]=n.w),x.placeValuesInside&&(d["text-anchor"]=j?n.r:n.v)):(d.x=v.getPixel(b,O),d.y=j?(G||I)-R:(G||V)+R,(!q&&b===_||q&&b===P)&&m&&m.width>2*h&&(d["text-anchor"]=n.v),(!q&&b===P||q&&b===_)&&m&&m.width>2*g&&(d["text-anchor"]=n.r),d["vertical-align"]=x.placeValuesInside?j?n.w:n.q:j?n.q:n.w),S.shiftX&&(d.x+=S.shiftX),S.shiftY&&(d.y+=S.shiftY),d.transform=Object(n.fb)(a,d.x,d.y),F[K[e]].config.props.label.attr=d}},z.prototype._drawLabel=function(){var e,t,a,i,n,o,r,l,s,c,d,h=this,g=h.config,b=h.getFromEnv("animationManager"),m=this.getFromEnv("toolTipController"),p=g.axisRange,u=g.labels.style,f=h.components,v=p.max,x=p.min,y=g.axisContainer,O=g.extremeLabels,L=g.ticks,w=[],k={fontFamily:u.fontFamily,fontSize:u.fontSize,fontWeight:u.fontWeight,fontStyle:u.fontStyle,lineHeight:u.lineHeight};if(g.labels.isDraw)for(d=f.labels,c=f.labelIndexArr,y.css(k),t=0,a=c&&c.length;t<a;t+=1)n=`${l=L[e=c[t]]}_label`,i=h.getGraphicalElement(n),r=d[e].config.props.label.attr,i=h.addGraphicalElement(n,b.setAnimation({el:i||"text",attr:r,container:y,data:{value:l},component:h,label:"text"})),r.tooltext?m.enableToolTip(i,r.tooltext):m.disableToolTip(i),l===v?O.lastLabel.graphic=i:l===x&&(O.firstLabel.graphic=i),w.push(n);for(e=0,a=(s=C()(g.prevIntervalArr,w)).length;e<a;e++)(o=h.getGraphicalElement(s[e]))&&h.removeGraphicalElement(o);g.prevIntervalArr=w},z.prototype.getTrendLineLimits=function(){let e,t,a,i,o=this.config,r=o.trendLines||o.vTrendLines||o.trendPoints,l=r&&r[0]&&r[0].line||r&&r.point;return o.trendLimits?o.trendLimits:([e,t]=Object(n.U)(l,e=>""===e.startvalue?n.D:+e.startvalue),[a,i]=Object(n.U)(l,e=>""===e.endvalue?n.D:+e.endvalue),o.trendLimits=Object(n.U)([e,t,a,i],e=>+e),o.trendLimits)},z.prototype.setAxisPadding=function(e=0,t=0){var a,i=Math.max,n=this,o=n.config,r=n.getScale(),[l,s]=r.getDomain();1===o.oriCatLen&&(0===e&&(e=.5),0===t&&(t=.5)),a=e-o.startPad,o.startPad=i(o.startPad,e),o.endPad=i(o.endPad,t),0<a&&(o.setPadding=!0,n._setAxisRange({min:l-a,max:s+a})),!o.tickValues&&o.originalMax&&o.originalMin&&n.setDataLimit(o.originalMax,o.originalMin)},z.prototype.getLabel=function(e){var t=this.config,a=t.tickValues&&t.tickValues.tickValue[e],i={};return a&&a.tooltext&&(i.label=a.label,a.tooltext=Object(n.wb)(a.tooltext,[3],i)),{label:a&&(a.oriLabel||a.label),tooltext:a&&a.tooltext}};var R=z;var N=(...e)=>{let t,a,i,n,o,r=[];if(2<e.length?(t=e[0],a=e[1],i=e[2]):1===e.length?(t=0,a=e[0],i=1):(t=e[0],a=e[1],i=1),n=Math.floor(Math.max(0,Math.ceil((a-t)/i))),isFinite(n))for(o=0;o<n;++o)r.push(i*o+t);return r};var G=e=>()=>e;function W(e){return null!==e&&void 0!==e}var H=function(e,t){return W(t)&&W(e)&&"boolean"!=typeof t?p(e,t):G(t)};var Y=function(e,t){let a=(t=+t)-(e=+e);return t=>Math.round(a*t+e)};const X=[0,1];function Z(e,t,a,i){var n,o;return e[0]>e[1]?(n=a(e[1],e[0]),o=i(t[1],t[0])):(n=a(e[0],e[1]),o=i(t[0],t[1])),e=>o(n(e))}function K(e,t){return t.setInterpolate(e.getInterpolate()).setClamp(e.getClamp()).setDomain(e.getDomain()).setRange(e.getRange())}function U(e,t){let a=(t=+t)-(e=+e);return a?t=>(t-e)/a:G(a)}var J=class{constructor(e,t){this.domain=X,this.range=X,this.deInterpolate=e,this.reInterpolate=t,this.interpolate=H,this.clamp=!1,this.input=null,this.output=null,this._rescale()}_rescale(){return this.input=null,this.output=null,this}setDomain(e=X){return this.domain=e.map(Number),this._rescale()}getDomain(){return this.domain.slice()}setRange(e=X){return this.range=e.slice(),this._rescale()}getRange(){return this.range.slice()}setInterpolate(e=H){return this.interpolate=e,this._rescale()}getInterpolate(){return this.interpolate}setClamp(e=!1){return this.clamp=!!e,this._rescale()}getClamp(){return this.clamp}rangeRound(e=X){return this.range=e.slice(),this.interpolate=Y,this._rescale()}getRangeValue(e){e=null===e?void 0:e;let t=this.getClamp()?function(e){return(t,a)=>{var i=e(t=+t,a=+a);return e=>e<=t?0:e>=a?1:i(e)}}(this.deInterpolate):this.deInterpolate;return this.output||(this.output=Z(this.getDomain(),this.getRange(),t,this.interpolate)),this.output(+e)}getDomainValue(e){let t=this.getClamp()?function(e){return(t,a)=>{var i=e(t=+t,a=+a);return e=>0>=e?t:1<=e?a:i(e)}}(this.reInterpolate):this.reInterpolate;return this.input||(this.input=Z(this.getRange(),this.getDomain(),U,t)),this.input(+e)}};const q=7.0710678118654755,$=3.1622776601683795,Q=1.4142135623730951;function ee(e){let t;return t=e>=q?10:e>=$?5:e>=Q?2:1}function te(e=0,t=1,a=7){var i=Math.pow;const n=(t-e)/Math.max(0,a),o=Math.floor(Math.log(n)/Math.LN10),r=n/i(10,o);return 0<=o?ee(r)*i(10,o):-i(10,-o)/ee(r)}var ae=function(e=0,t=1,a=7){var i=Math.ceil,n=Math.floor;let o,r,l,s=-1,c=[];if(a=+a,(e=+e)==(t=+t)&&0<a)return[e];if((o=t<e)&&(r=e,e=t,t=r),0===(l=te(e,t,a))||!isFinite(l))return[];if(0<l)for(e=i(e/l),r=i((t=n(t/l))-e+1);++s<r;)c[s]=(e+s)*l;else for(r=i((e=n(e*l))-(t=i(t*l))+1);++s<r;)c[s]=(e-s)/l;return o&&c.reverse(),c};class ie extends J{constructor(){super(U,p)}ticks(e=7){const t=this.getDomain();return ae(t[0],t[t.length-1],e)}nice(e=7){var t=Math.ceil,a=Math.floor;let i,n=this.getDomain(),o=0,r=n.length-1,l=n[o],s=n[r];return s<l&&(i=l,l=s,s=i,i=o,o=r,r=i),0<(i=te(l,s,e))?i=te(l=a(l/i)*i,s=t(s/i)*i,e):0>i&&(i=te(l=t(l*i)/i,s=a(s*i)/i,e)),0<i?(n[o]=a(l/i)*i,n[r]=t(s/i)*i,this.setDomain(n)):0>i&&(n[o]=t(l*i)/i,n[r]=a(s*i)/i,this.setDomain(n)),this}copy(){return K(this,new ie)}}var ne=ie;let oe=Z([2,100],[80,20],U,p);var re=function(e,t,a,i){var o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j=Math.pow,S=Math.LN10,A=Math.log,F=Math.max,B=Math.abs,T=Math.floor,E=i.isPercent?0:i.axisMinValue,P=i.isPercent?100:i.axisMaxValue,_=!!i.adjustDiv,D=i.numDivLines,I=!!i.setAdaptiveMin,M=i.axisRange,V=5.960464477539063e-8,z=!0,R=.2,G=!0,W=i.xAxisLabelMode,H=i.dependentInfo;o=i.majorTMNumber===n.D?D:F(0,D-2),H&&H.count&&!H.limit&&H.numDivLines!==n.D&&(o=D=H.numDivLines,_=!1),r=o+1,e===n.D&&t===n.D&&(e=0,t=1,z=!1),t===e&&0===t&&(t=1,z=!1),("categories"===W||"mixed"===W)&&(z=!1),z?(l=T(A(B(t))/S),c=j(10,s=F(T(A(B(e))/S),l)),2>B(t)/c&&2>B(e)/c&&(c=j(10,--s)),u=j(10,p=T(A(t-e)/S)),0<t-e&&10<=c/u&&(c=u,s=p),h=(T(t/c)+1)*c,g=0>e?(T(B(e/c))+1)*c*-1:I?0>(g=T(B(e/c)-1)*c)?0:g:0,!I&&0>=t&&(h=0),b=!(!P&&0!==P),m=!(!E&&0!==E),!i.freezeLimit&&(!1===b||!0===b&&+P<t&&t-+P>V?(t=h,b=!1):t=+P,!1===m||!0===m&&+E>e&&+E-e>V?(e=g,m=!1):e=+E)):(b=!(!P&&0!==P),m=!(!E&&0!==E),!0===b&&+P>=t?t=+P:b=!1,!0===m&&+E<=e?e=+E:m=!1),y=[e,t],a.setDomain(y),_&&!i.freezeLimit?b||m?(L=function(e,t,a,i,o,r){var l=Math.abs;let s,c,d,h,g,b,m,p,u,f,v,x,y=e,C=Math.ceil(a*(1-i)),O=Math.floor(a*(1+i)),L=[],w=-1,k=a=>(e=>{let t,a,i,n=[10,5,2,1],o=n.length;for(t=0;t<o;++t)if(0==(a=e%n[t])%1){i=!0;break}return i})(s=(t-e)/(a+1))?a:n.D;for(;!(f&&v||(++w,x=a+w,x>=O&&(v=!0),h=k(x),h)||(x=a-w,x<=C&&(f=!0),h=k(x),h)););for(0>e&&0<t&&o&&(d=!0),c=0;c<h;c++)d&&0>y&&0<y+s&&(L.push(0),g=!0),y+=s,L.push(y);return h===n.D&&o&&(1<(m=(L=r.ticks(a)).length)?(b=.2*(s=l(L[0]-L[1])),p=L[0],u=L[m-1],l(e-p)<=b&&0!==p&&L.shift(),l(t-u)<=b&&0!==u&&L.pop(),(0===p||0===u)&&(g=!0)):0===L[0]&&(g=!0)),d&&!g&&-1===L.indexOf(0)&&(0>e&&0<L[0]?L=[0].concat(L):0<t&&0>L[L.length-1]?L.push(0):L=[0],g=!0),{output:L,interval:s,isZeroTickForced:g}}(e,t,o,R=(e=>100<=e?.2:1>=e?0:oe(e)/100)(o),i.forceZeroTick,a),B((o-(w=(f=L.output).length)+((k=L.isZeroTickForced)?1:0))/o)>R?d=(t-e)/r:(d=0===w||1===w&&k?t-e:L.interval,i.isZeroTickForced=k,i.ticks=[e].concat(f,t),G=!1)):(i.ticks=o?a.nice(r).ticks(r):a.getDomain(),d=B(i.ticks[1]-i.ticks[0]),G=!1):b||m||i.freezeLimit?d=(t-e)/r:([v,x]=a.nice(r).getDomain(),((x=v+(d=function(e){if(1>=e)return 1;let t=[],a=Math.ceil(e);return t[2]=a%2,t[5]=a%5,t[10]=a%10,Object(n.Hb)(t)+a}(c=(x-v)/r))*r)-t)/t>R||(v-e)/e>R?(a.setDomain([e,t]),d=(t-e)/r):(e=v,t=x,a.setDomain([e,t]))),G&&(0>e&&0<t&&i.forceZeroTick?(0===(O=(C=N(e,0,d))[C.length-1]+d)?O+=d:i.isZeroTickForced=!0,i.ticks=C.concat(0,N(O,t,d),t)):i.ticks=N(e,t,d).concat(t)),[e,t]=a.getDomain(),i._allTicks=i.ticks.slice(),M.tickInterval=d,M.min=e,M.max=t};let le;class se extends R{constructor(){super(),this.config.scale=new ne}getName(){return"numeric"}generateTicks(){var e=Math.abs;let t,a,i,n=this.getScale(),o=this.config,r=o.numDivLines+1,[l,s]=n.getDomain(),c=o.axisRange,{min:d,max:h}=c,g=o.dataLimit;return l===d&&s===h?(re(g.min,g.max,n,o),o.ticks):(a=e((t=n.ticks(r))[1]-t[0]),l===d&&-1===t.indexOf(d)&&t.unshift(d),s===h&&-1===t.indexOf(h)&&t.push(h),(i=e(d%a))&&(d-=i),(i=e(h%a))&&(h-=i),o._allTicks=N(d,h,a).concat(h),c.tickInterval=a,t)}setTickValues(e){this.config.userTicks=e||[],this.config.tickValues={tickValue:[]}}_parseTickValues(e){var t,a,i,o,r=this.getFromEnv("chart"),l=this.config,s=e&&e.length,c=0;for(l.tickValues={},t=l.tickValues.tickValue=[],i=0;i<s;i+=1)if(o=+(a=Object(n.T)({},e[i])).x,!a.vline){if(L(a,r),!o&&0!==o)continue;a.x=o,l.irregularCatAxis=!0,t.push(a),t[c].label=Object(n.xb)(t[c].label),c+=1}l.oriCatLen=c}calculateTicksOnLabelMode(){var e,t,a,i,o,r,l,s=this,c=s.config,d=c.xAxisLabelMode,h=Object.assign([],c.userTicks),g=s.getFromEnv("number-formatter");if("mixed"===d||"auto"===d){if(t=[],e=g.xAxis,"mixed"===d)for(a=0,o=h.length;a<o;a+=1)t[h[a].x||h[a].y||a]=!0;else h=[];for(l=s.getAxisConfig(),r=c.ticks,i=0;i<r.length;++i)t[a=r[i]]||h.push({label:n.b+e.call(g,a),x:a,showverticalline:0===a?l.showZeroPlane:1,isNumeric:!0,linecolor:0===a?l.zeroPlaneColor:l.divLineColor,linealpha:0===a?l.zeroPlaneAlpha:l.divLineAlpha,linethickness:0===a?l.zeroPlaneThickness:l.divLineThickness,linedashed:l.divLineIsDashed,linedashLen:l.divLineDashLen,linedashgap:l.divLineDashGap})}s._parseTickValues(h)}getInterval(){return this.config.axisRange.tickInterval}_setAxisRange(e){var t,a,i,o=e.min,r=e.max,l=this.config,s=l.axisRange,c=l.dataLimit,d=l.dependentInfo;if(!(o>r))if((c.min!==o||c.max!==r)&&(a=!0),l.visibleMin===le||l.setPadding||a){if([o,r]=Object(n.U)([o,r,c.min,c.max]),c.min=o,c.max=r,this.fireEvent("dataLimitSet",Object.assign({},c)),d){if(d.limit){if(!(t=d.dataLimit))return;[o,r]=Object(n.U)([o,r,t.min,t.max]),l.isDataLimitSet=!0}if(d.count&&d.numDivLines===le)return}re(o,r,this.getScale(),l),i=l.isZeroTickForced?3:2,this.fireEvent("divlinesSet",l.ticks.length-i),l.tickValues&&this.calculateTicksOnLabelMode(),this.setVisibleConfig(s.min,s.max)}else l.setPadding=!1}}se.prototype.setDataLimit=function(e,t){var a,i,o,r,l=this,s=l.config,c=l.getFromEnv("dataSource").categories,d=c&&c[0]&&c[0].category,h=s.startPad||0,g=s.endPad||0,b=s.xAxisLabelMode;("categories"===b||"mixed"===b)&&([a,i]=Object(n.U)(d,e=>+e.x)),[o,r]=l.getTrendLineLimits(),[t,e]=Object(n.U)([o,r,a,i,t,e],e=>+e),s.originalMax=e,s.originalMin=t,e=s.isPercent?100:e+g,t=s.isPercent?0:t-h,l._setAxisRange({min:t,max:e}),s.axisRange.tickInterval!==n.D&&l._adjustNumberFormatter(s.axisRange.tickInterval)};var ce=se;class de extends J{constructor(){super(U,p)}copy(){return K(this,new de)}}var he=de,ge="none",be="true",me="1",pe=n.Db.POSITION_START,ue=n.Db.POSITION_MIDDLE,fe=n.Db.POSITION_TOP,ve=n.Db.POSITION_BOTTOM,xe=n.Db.POSITION_END,ye={wrtVisible:!0};class Ce extends R{constructor(){super(),this.config.scale=new he}getName(){return"category"}getCategoryFromId(e){var t=this.config.tickValues;return(t&&t.tickIdMap)[e]||{}}generateTicks(){let e=this.getScale(),t=this.config,a=e.getDomain(),i=t.categoryNumDivLines+1,n=(a[1]-a[0])/i,o=t.axisRange,{min:r,max:l}=o,s=(l-r)/i;return t._allTicks=N(r,l,s).concat(l),o.tickInterval=s,N(a[0],a[1],n).concat(a[1])}_parseCategoryVline(){var e,t,a,i,o,r,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j,S,A,F,B,T,E,P=this,_=P.config,D=_.axisRange,I=D.min,M=D.max,V=P.getFromEnv("chart").config,z=V.style||{},R=_.isVertical,N={fontFamily:V.style.inCanfontFamily,fontSize:V.style.inCanfontSize,color:V.style.inCancolor,lineHeight:V.style.inCanLineHeight};for(a=(t=_.tickValues.vline).length,F=1!==P.getZoom(),B=P.getVisibleConfig(),r=0;r<a;r++)i=t[r],o=Object(n.xb)(i.label),s=!!Object(n.Bb)(i.showlabelborder,_.showVLineLabelBorder,1),e=!!Object(n.Bb)(i.showlabelbackground,1),"center"===(c=Object(n.zb)(i.labelhalign,R?pe:ue))?c=ue:"left"===c?c=pe:"right"===c&&(c=xe),(d=Object(n.zb)(i.labelvalign,R?ue:ve).toLowerCase())===ue?d=ue:d===fe?d=ve:d===ve&&(d=fe),h=Object(n.Bb)(i.labelposition,0),g=Object(n.Bb)(i.lineposition,.5),b=Object(n.Bb)(i.showvlines,_.showVLines,1),m=Object(n.Bb)(i.alpha,_.vLineAlpha,80),p=Object(n.zb)(i.color,_.vLineColor).replace(/^#?/,"#"),u=e?Object(n.zb)(i.labelbgcolor,_.vLineLabelBgColor,"333333").replace(/^#?/,"#"):n.b,k=Object(n.zb)(i.labelcolor,_.vLineLabelColor,i.color,z.inCancolor,_.vLineColor).replace(/^#?/,"#"),f=Object(n.Bb)(i.thickness,_.vLineThickness,1),S=2,v=!!+Object(n.zb)(i.dashed,0),x=Object(n.Bb)(i.dashlen,5),C=Object(n.Bb)(i.dashgap,2),y=N.fontSize,y=parseInt(y.replace(/px/i,""),10),j=Object(n.Bb)(i.rotatelabel,_.rotateVLineLabels)?270:0,g=0>g||1<g?.5:g,h=0>h||1<h?0:h,p=Object(l.c)(p,b?m:"0"),E=i.animate&&!R?i.startIndex+1:i.startIndex,A=P._getVlinePos(E,g)-(i.animate?i.leftShift:0),(!F||!(A<B.minValue||A>B.maxValue))&&(A<I||A>M||(O={opacity:1,stroke:p,"stroke-width":f,"stroke-dasharray":v?Object(n.Y)(x,C):ge},w={opacity:1,text:o,"text-anchor":c,"vertical-align":d,"text-bound":[]},L={fontSize:N.fontSize,fontFamily:N.fontFamily,lineHeight:N.lineHeight},T={from:A,layer:Object(n.Bb)(i.showontop,_.showVLinesOnTop,0)?3:2,attr:O,type:"line",startIndex:i.startIndex,linePosition:g},o&&(w["text-bound"]=[u,b&&s?p:n.b,b&&s?1:0,S,n.D,b&&s?"solid":n.b],w.fill=b?k:p,T.text={label:o,attr:w,layer:4,labelRotation:j,labelPosition:h,css:L}),P.setReferenceInfo(T),P.config.parsedVlineInfo.push(T)))}_parseReferenceVisuals(){super._parseReferenceVisuals(),this.config.drawPlotlines&&this._parseCategoryVline()}categoryInsert(e,t,a){var i,o,r,l,s,c=this.config,d=c.axisRange.min,h=t.length,g=c.endPad||0;for(i=c.tickValues.tickValue,r=c.tickValues.tickIdMap,o=c.tickValues.vline,l=0;l<h;l+=1)(s=Object(n.T)({},t[l])).vline===be||!0===s.vline||1===s.vline||s.vline===me?(s.startIndex=e-2,o.push(s)):(s.id&&(r[s.id]={tickObj:s,i:e}),i.splice(e,0,s),e+=1);a&&this._setAxisRange({min:d,max:+Object(n.Lb)(i.length-1+g,10)})}categoryDelete(e,t,a){var i,n,o,r=this,l=r.config,s=l.axisRange,c=s.min;for(n=0,o=(i=l.tickValues.vline).length;n<o;n++)i[n].animate=!0,i[n].leftShift=t;l.tickValues.tickValue.splice(e,t),r._shiftVline(e,t,"left"),a&&r._setAxisRange({min:c,max:s.max-t})}_shiftVline(e,t,a){var i,n,o=this.config,r=o.tickValues.vline,l=o.tickValues.tickValue.length,s=r.length;for(i=0;i<s;i+=1)(n=r[i]).startIndex>=e&&("right"===a?n.startIndex+=t:n.startIndex-=t,(0>n.startIndex||n.startIndex>=l)&&(r.splice(i,1),s-=1,i-=1))}categoryTranslate(e){var t,a=this,i=a.config,n=a.getPixel(1,ye)-a.getPixel(0,ye);e=(e||0)*n,i.isReverse&&(e=-e),t=["T",e,",","0"].join(""),a.realTimeTranslatableGroups=[{group:i.axisContainer,translationStr:t},{group:i.axisTrendLabelContainer,translationStr:t}]}updateTicksValues(e,t){var a,i,n,o,r,l,s,c=this,d=c.config,h=d.parsedVlineInfo;if((a=d.tickValues.tickValue)[e])for(s in t)t.hasOwnProperty(s)&&("x"===s&&(i=!0),a[e][s]=t[s]);if(i)for(o=0,r=h.length;o<r;++o)if((l=(n=h[o]).startIndex)===e)n.from=c._getVlinePos(l,n.linePosition);else if(l+1===e){n.from=c._getVlinePos(l,n.linePosition);break}}_getVlinePos(e,t){let a,i,o,r=this.getTickValues(),l=this.config,{min:s,max:c}=this.getLimit(),d=r[e],h=r[e+1];return d?!h&&(a=r[0]&&r[0].x?c:l.oriCatLen-1,o=!0):(a=r[0]&&r[0].x?s:-1,o=!0),o?i=t:i=((a=Object(n.Bb)(d.x,d.y,e))-Object(n.Bb)(h.x,h.y,e+1))*t,a+Math.abs(i)}getInterval(){if(this)return 1}_setAxisRange(e){var t,a,i=e.min,o=e.max,r=this.config,l=r.axisRange,s=r.periodLength,c=r.dataLimit,d=c.max,h=c.min;i>o||((d!==o||h!==i)&&(t=!0),r.visibleMin===n.D||r.setPadding||t?(c.max=o,c.min=i,s&&(r.categoryNumDivLines=(o-i)/s-1),a=(o-i)/(r.categoryNumDivLines+1),this.getScale().setDomain([i,o]),r.ticks=N(i,o,a).concat(o),r._allTicks=r.ticks.slice(),l.min=i,l.max=o,l.tickInterval=a,this.setVisibleConfig(l.min,l.max)):r.setPadding=!1)}}Ce.prototype.setTickValues=function(e){var t,a,i=e&&e.length,o=this.config,r=o.startPad||0,l=this.getFromEnv("chart"),s=0,c=o.tickValues={},d=c.tickValue=[],h=c.vline=[],g=c.tickIdMap={},b=o.endPad||0;for(o.hasCategory=1,t=0;t<i;t+=1)(a=Object(n.T)({},e[t])).vline?(a.startIndex=d.length-1,h.push(a)):(a.id&&(g[a.id.toLowerCase()]={tickObj:a,index:s}),(o.mapTickValuesById&&a.id||!o.mapTickValuesById)&&(L(a,l),d.push(a),d[s].label=Object(n.xb)(d[s].label),s+=1));o.oriCatLen=s,this._setAxisRange({max:+Object(n.Lb)(s-1+b,10),min:+Object(n.Lb)(0-r,10),tickInterval:+Object(n.Lb)(1,10)})};var Oe=Ce,Le=function(e){let t,a,i=e.getChildren("canvas")[0],o=i.getChildren("axisRefVisualCartesian")[0],r={zoomable:!0,pannable:!0},l=e._feedAxesRawData(),s=e=>{let t=e.sender;o.addexplicitDrawItems(t.getId(),t),o.asyncDraw()};Object(n.M)(e,ce,"yAxis",1,l.yAxisConf),Object(n.M)(e,Oe,"xAxis",1,l.xAxisConf),t=e.getChildren("yAxis")[0],a=e.getChildren("xAxis")[0],t.setLinkedItem("canvas",i),a.setLinkedItem("canvas",i),o.setLinkedItem(t.getId(),t),o.setLinkedItem(a.getId(),a),o.addExtEventListener("visiblerangeset",s,a),o.addExtEventListener("visiblerangeset",s,t),i.attachAxis(a,!1,e.zoomX?r:{}),i.attachAxis(t,!0,e.zoomY?r:{}),e._setCategories()},we=a(27),ke={"initial.axisRefVisuals.axisRefVisualsCartesian":b,"update.axisRefVisuals.axisRefVisualsCartesian":g};const je=e=>null!==e;let Se;Object(x.a)({name:"cartesianAxisRefAnimation",type:"animationRule",extension:ke});var Ae,Fe=class extends r.a{constructor(){super(),this.config.map={},this.config.explicitDrawItems={}}getType(){return"axisRefVisuals"}getName(){return"axisRefVisualsCartesian"}draw(){let e,t,a,i,n,o,r,l=this.getDrawingInfo(),s=this.getexplicitDrawItems(),c=this.config,d=c.map,h={},g=this.getLinkedParent(),b=g.getAxes(),m=[],p=g.getChildContainer("axisReferenceVisualsFloor"),u=g.getChildContainer("axisReferenceVisualsBottom"),f=g.getChildContainer("axisReferenceVisualsMiddle"),v=g.getChildContainer("axisReferenceVisualsTop"),x=g.getChildContainer("axisReferenceVisualsCeil");for(g.config.trendlines=[],g.config.vtrendlines=[],t=0;t<b.length;++t)m.push(b[t].axis.getId());for(i in c.containers=[p,u,f,v,x],l)if(l.hasOwnProperty(i)&&(n=this.getLinkedItem(i),0<=m.indexOf(n.getId())))for((o=h[i])||(o=h[i]=[]),e=l[i],t=0;t<e.length;++t)"band"===(a=(r=e[t]).type)?o.push.apply(o,this.createBand(r,n)):"line"===a&&o.push.apply(o,this.createLine(r,n));if(c.isSmartDrawing)for(i in d)d.hasOwnProperty(i)&&!s[i]&&this.getLinkedItem(i)&&(h[i]=d[i]);this.resetexplicitDrawItems(),this.removeExtraElements(h)}getDrawingInfo(){let e,t,a={},i=this.getexplicitDrawItems(),n=this.isCanvasChnaged(),o=(this.config.isSmartDrawing=Object.keys(i).length&&!n)?i:this.getLinkedItem();for(e in o)o.hasOwnProperty(e)&&(t=o[e],a[e]=t.getReferenceInfo());return a}createLine(e,t){let a,i=this.config.containers,n=i[e.layer],o=t.config,r=this.getFromEnv("paper"),l=this.getFromEnv("chart").getName(),s=this.getLinkedParent(),c=this.getFromEnv("animationManager"),d=this.getFromEnv("toolTipController"),h=s.config,g=h.trendlines,b=o.isVertical,m=h.canvasLeft,u=h.canvasTop,f=u+h.canvasHeight,v=m+h.canvasWidth,x=p(m,v),y=p(u,f),C=t.getScale(),O=C.getRangeValue(e.from),L=e.to!==Se&&C.getRangeValue(e.to)||O,w=b?["M",m,O,"L",v,L]:["M",O,f,"L",L,u],k=e.attr,j=e.text,S=j&&j.attr,A=j&&j.labelPosition||0,F=t.getId(),T=e.id||e.from,E=F+"_"+T,P=F+"_"+T+j,_=this.getGraphicalElement(E),D=this.getGraphicalElement(P),I=e.handlers,M={start:e.from,end:e.to};for(a in k.path=B(w,je(k["stroke-width"])?k["stroke-width"]:1).path.toString(),/trend/.test(e.id)&&g.push({x1:w[1],y1:w[2],x2:w[4],y2:w[5],tooltext:e.toolText,tolerance:5>k["stroke-width"]?2.5:k["stroke-width"]/2}),k["stroke-linecap"]="butt",(_=this.addGraphicalElement(E,c.setAnimation({container:n,el:_||"path",attr:k,component:this,axis:t,data:{value:M,path:w},label:"path"}))).data("data",M),j&&(b?(S.x=x(A),S.y=O):(S.x=O,S.y=y(A)),S.text=j.label,S.transform=r.getSuggestiveRotation(j.labelRotation,S.x,S.y),(D=this.addGraphicalElement(P,c.setAnimation({container:i[j.layer],el:D||"text",attr:S,component:this,axis:t,data:{value:e.from},label:"text",css:j.css}))).data("data",e.from)),/zoomscatter/i.test(l)||(e.toolText?d.enableToolTip(_,e.toolText):d.disableToolTip(_)),I)I.hasOwnProperty(a)&&(_.on(a,I[a].bind(t)),D.on(a,I[a].bind(t)));return j?[E,P]:[E]}createBand(e,t){var a=Math.min;let i,n,o,r,l,s,c,d=this.config.containers[e.layer],h=t.config,g=this.getFromEnv("animationManager"),b=this.getFromEnv("toolTipController"),m=this.getLinkedParent(),p=this.getFromEnv("chart").getName(),u=m.config,f=h.isVertical,v=u.canvasLeft,x=u.canvasTop,y=x+u.canvasHeight,C=v+u.canvasWidth,O=t.getScale(),L=e.from,w=e.to===Se?L:e.to,k=t.getId(),j=e.attr,S=e.handlers;for(s in i="canvasStart"===L?f?x:v:O.getRangeValue(L),n="canvasEnd"===w?f?y:C:O.getRangeValue(w),c=Math.abs(i-n),f?(j.x=v,j.y=a(i,n),j.width=C-v,j.height=c):(j.x=a(i,n),j.y=x,j.width=c,j.height=y-x),r=k+"_"+(o=e.id||j.x+"_"+j.y),l=this.getGraphicalElement(r),/trend/.test(e.id)&&m.config.vtrendlines.push({x1:j.x,y1:j.y,x2:j.x+j.width,y2:j.y+j.height,tooltext:e.toolText,tolerance:5>j["stroke-width"]?2.5:j["stroke-width"]/2,isTrendZone:1}),l=this.addGraphicalElement(r,g.setAnimation({container:d,el:l||"rect",attr:j,component:this,label:"rect"})),/zoomscatter/i.test(p)||(e.toolText?b.enableToolTip(l,e.toolText):b.disableToolTip(l)),S)S.hasOwnProperty(s)&&l.on(s,S[s].bind(t));return[r]}removeExtraElements(e){let t,a,i,n,o,r,l=this.config.map;for(t in l)if(e[t])for(n=(r=u(l[t],e[t])).length,i=0;i<n;++i)(o=this.getGraphicalElement(r[i]))&&this.removeGraphicalElement(o);else for(n=(a=l[t]).length,i=0;i<n;++i)(o=this.getGraphicalElement(a[i]))&&this.removeGraphicalElement(o);this.config.map=e}setLinkedItem(e,t){super.setLinkedItem(e,t);let a=this;"axis"===t.getType()&&a.addExtEventListener("beforeremove",e=>{a.removeLinkedItem(e.sender.getId()),a.asyncDraw()},t)}addexplicitDrawItems(e,t){this.config.explicitDrawItems[e]=t}getexplicitDrawItems(){return this.config.explicitDrawItems}resetexplicitDrawItems(){this.config.explicitDrawItems={}}isCanvasChnaged(){let e,t=this.getLinkedParent().getEffectiveDimensions(),a=this.config;return e=JSON.stringify(t)!==JSON.stringify(a.canvasDim),a.canvasDim=t,e}},Be=function(e){let t,a=e._parseCanvasCosmetics&&e._parseCanvasCosmetics();if(Object(n.M)(e,we.a,"canvas",e.config.showVolumeChart?2:1),t=e.getChildren("canvas"))for(let e=0,i=t.length;e<i;e++)t[e].configure(a),Object(n.M)(t[e],Fe,"axisRefVisualCartesian")},Te=function(e,t){return e="comp_"+e,t&&(this.config[e]=t),(t||!this.config[e])&&this||this.config[e]},Ee=function(e,t){return["T",e,",",t].join("")},Pe=function(e){return-e.getTranslation()},_e=function(e){return Ee(Pe(e.h),Pe(e.v))},De=function(e,t){return{h:e,v:t}},Ie=["columnShadowVcanvasGroup","columnVcanvasGroup","areaShadowVcanvasGroup","areaVcanvasGroup","lineShadowVcanvasGroup","lineVcanvasGroup","defaultShadowVcanvasGroup","defaultVcanvasGroup","sumLabelsLayer","vcanvasLabelGroup"],Me=function(e,t,a){return a.getFromEnv("animationManager").setAnimation({el:"group",attr:{name:e},container:t,state:"appearing",component:a,label:"group"})},Ve=e=>!/category/i.test(e.getName());const ze="visible",Re="removed",Ne="dataset";var Ge=class extends r.a{getName(){return"virtualCanvas"}getType(){return"canvas"}xAxis(e){var t=Te.call(this,"xAxis",e);return e&&this.listenToAxis(e),e&&this.addToEnv("xAxis",e),t}yAxis(e){var t=Te.call(this,"yAxis",e);return e&&this.listenToAxis(e),e&&this.addToEnv("yAxis",e),t}paper(e){return Te.call(this,"paper",e)}canvas(e){return Te.call(this,"canvas",e)}configure(e={}){let t=this.getFromEnv("chartConfig"),a=this.config;Object.assign(a,e),a.transposeAxis=t.transposeAxis,this._mapChildren(e=>{e.getState(Re)||e.getType()===Ne||e.configure&&e.configure()})}getHorizontalVerticalAxes(){var e=this.xAxis(),t=this.yAxis();return t.config.isVertical?De(e,t):De(t,e)}preDraw(){this._mapChildren(e=>{e.getState("removed")||"dataset"===e.getType()||e.setVisibility&&e.setVisibility()});let e,t=this.config.transposeAxis,a=this.getFromEnv("chart"),{left:i,right:n,top:o,bottom:r}=this.getAxisValuePadding();(e=this.getDataLimits(!t)).min!==1/0||e.max!==-1/0?(this._setYAxisLimits(e.min,e.max),a._storeIntialLimit&&a._storeIntialLimit(e.min,e.max)):(this._setYAxisLimits(Ae,Ae),a._storeIntialLimit&&a._storeIntialLimit(Ae,Ae)),this._setXAxisLimits(e.xMin,e.xMax),this._setAxisValuePadding(i,n,o,r)}childChanged(e={}){let t,a=this,i=a.config,n=i.transposeAxis;!1!==e.dataLimitChanged&&(t=a.getDataLimits(!n),n&&(t.min!==i.range.min||t.max!==i.range.max)&&(i.range.min=t.min,i.range.max=t.max,this.getFromEnv("yAxis").resetStoredLimits(),t.min!==1/0||t.max!==-1/0?a._setYAxisLimits(t.min,t.max):a._setYAxisLimits(Ae,Ae)),(t.xMin!==i.range.xMin||t.xMax!==i.range.xMax)&&(i.range.xMin=t.xMin,i.range.xMax=t.xMax,this.getFromEnv("xAxis").resetStoredLimits(),a._setXAxisLimits(t.xMin,t.xMax))),a.asyncDraw()}_setAxisValuePadding(e,t,a,i){this.getFromEnv("xAxis").setAxisPadding(e,t),a&&i&&this.getFromEnv("yAxis").setAxisPadding(e,t)}getAxisValuePadding(){var e=Math.max;let t={},a=-1/0,i=-1/0,n=-1/0,o=-1/0;return this._mapChildren(r=>{r.getState(Re)||(t=r.getAxisValuePadding&&r.getAxisValuePadding()||{},a=e(a,t.left||-1/0),i=e(i,t.right||-1/0),n=e(n,t.top||-1/0),o=e(o,t.bottom||-1/0))}),a===-1/0&&(a=0),i===-1/0&&(i=0),n===-1/0&&(n=0),o===-1/0&&(o=0),this.config.padding||(this.config.padding={},this.config.padding.left=a,this.config.padding.right=i,this.config.padding.top=n,this.config.padding.bottom=o),{left:a,right:i,top:n,bottom:o}}_setYAxisLimits(e,t){var a=this.getFromEnv("yAxis");Ve(a)&&a.setDataLimit(t,e)}_setXAxisLimits(e,t){let a=this.getFromEnv("xAxis");Ve(a)&&(t!==-1/0||e!==1/0?a.setDataLimit(t,e):a.setDataLimit(Ae,Ae))}getDataLimits(e){var t,a,i,o=Math.max,r=this.getFromEnv("chart"),l=-1/0,s=l,c=1/0,d=1/0,h=l,g=function(e){var t=Math.min;a=Object(n.zb)(e.xMax,l),i=Object(n.zb)(e.xMin,1/0),s=o(s,e.max),c=t(c,e.min),h=o(h,a),d=t(d,i)};return this._mapChildren(a=>{a.getDataLimits&&!a.getState(Re)&&(e||a.getState(ze))&&(t=a.getDataLimits(e),g(t))}),this.config.range||(this.config.range={},this.config.range.min=c,this.config.range.max=s,this.config.range.xMin=d,this.config.range.xMax=h),r.config.yMax=s,r.config.yMin=c,{min:c,max:s,xMin:d,xMax:h}}listenToAxis(e){var t,a=this;t=function(){a.getState("drawn")&&a.asyncDraw()},this.getState("visiblerangeset"+e.getId())||(this.setState("visiblerangeset"+e.getId(),!0),a.addExtEventListener("visiblerangeset",t,e))}createContainer(){var e=this,t=e.getLinkedParent();e.getChildContainer("columnShadowVcanvasGroup")||e.addChildContainer("columnShadowVcanvasGroup",Me("vcanvas-column-shadow",t.getChildContainer("columnShadowGroup"),e)),e.getChildContainer("columnVcanvasGroup")||e.addChildContainer("columnVcanvasGroup",Me("vcanvas-column-plot",t.getChildContainer("columnGroup"),e)),e.getChildContainer("areaShadowVcanvasGroup")||e.addChildContainer("areaShadowVcanvasGroup",Me("vcanvas-area-shadow",t.getChildContainer("areaShadowGroup"),e)),e.getChildContainer("areaVcanvasGroup")||e.addChildContainer("areaVcanvasGroup",Me("vcanvas-area-plot",t.getChildContainer("areaGroup"),e)),e.getChildContainer("lineShadowVcanvasGroup")||e.addChildContainer("lineShadowVcanvasGroup",Me("vcanvas-line-shadow",t.getChildContainer("lineShadowGroup"),e)),e.getChildContainer("lineVcanvasGroup")||e.addChildContainer("lineVcanvasGroup",Me("vcanvas-line-plot",t.getChildContainer("lineGroup"),e)),e.getChildContainer("defaultShadowVcanvasGroup")||e.addChildContainer("defaultShadowVcanvasGroup",Me("vcanvas-default-shadow",t.getChildContainer("defaultShadowGroup"),e)),e.getChildContainer("defaultVcanvasGroup")||e.addChildContainer("defaultVcanvasGroup",Me("vcanvas-default-plot",t.getChildContainer("defaultGroup"),e)),e.getChildContainer("vcanvasLabelGroup")||e.addChildContainer("vcanvasLabelGroup",Me("vcanvas-label",t.getChildContainer("datalabelsGroup"),e)),e.getChildContainer("columnTrendGroup")||e.addChildContainer("columnTrendGroup",Me("columnTrendGroup",e.getChildContainer("columnVcanvasGroup"),e)),e.getChildContainer("sumLabelsLayer")||e.addChildContainer("sumLabelsLayer",Me("vcanvas-sumLabelsLayer",t.getChildContainer("sumLabelsLayer"),e))}applyTranslation(){var e=this,t=e.getHorizontalVerticalAxes(),a=_e(t),i=function(t){(t=e.getChildContainer(t)).attr({transform:a})};e.createContainer(),Ie.forEach(function(e){i(e)})}draw(){this.applyTranslation(),this.setState("drawn",!0)}getCanvasPadding(){var e,t,a={paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0};return this._mapChildren(i=>{if(i.getCanvasPadding&&!i.getState(Re))for(t in e=i.getCanvasPadding()||{})e.hasOwnProperty(t)&&(a[t]=Math.max(e[t],a[t]))}),a}rtShiftAnim(e,t){var a,i=this,n=i.getFromEnv("xAxis"),o=i.getFromEnv("yAxis"),r=n.getPixel(1)-n.getPixel(0),l=o.getPixel(1)-o.getPixel(0),s=i.getFromEnv("animationManager");a=Ee(e=(e||0)*r,t=(t||0)*l),Ie.forEach(function(e){i.getChildContainer(e).attr({transform:a}),s.setAnimation({el:i.getChildContainer(e),attrs:{transform:"T0,0"}})})}},We=function(e){var t,a,i,o,r,l,s,c=e.getChildren("canvas"),d=c.length,h=[],g=[];for(o=0;o<d;o++,h=[],g=[])if(!(t=c[o]).getState("removed")){for(i=t.getFromEnv("xAxis"),l=0;l<(i&&i.length);l++)i[l].getState("removed")||h.push(i[l]);for(i=t.getFromEnv("yAxis"),l=0;l<(i&&i.length);l++)i[l].getState("removed")||g.push(i[l]);for(Object(n.M)(t,Ge,"vCanvas",h.length*g.length),a=t.getChildren("vCanvas"),r=0,l=0;r<(h&&h.length);r++)for(s=0;s<(g&&g.length);s++,l++)a[l].xAxis(h[r]).yAxis(g[s]).canvas(t),a[l].configure(),a[l].addToEnv("vCanvas",a[l])}},He=a(6),Ye="mouseover",Xe="mousedown",Ze="touchstart",Ke="mouseup",Ue="touchend",Je="mousemove",qe="touchmove",$e="mouseout",Qe="click",et=window,tt=et.document,at="ontouchstart"in et;var it=class extends r.a{constructor(){super(),this.pIndex=1,this.handler=function(e){return function(t){e.config.lastTouchStartEvent=t.originalEvent,t.originalEvent&&e.getFromEnv("chart")._mouseEvtHandler(t,e.config.evtData)}}(this),this.globalHandler=function(e){return function(t){var a,i,o=e.getFromEnv("chart");(t.type===Ze||t.type===Xe)&&(a=o.getChildren("canvas")[0],i=Object(n.db)(e.getFromEnv("chart-container"),t.originalEvent,o),e.config.lastTouchStartEvent===t.originalEvent||a&&a.isWithinCanvas(i.chartX,i.chartY))||(t.originalEvent&&o._mouseEvtHandler(t,e.config.evtData),e._removeDocEvents(),e.globalHandlerAttached=!1)}}(this),this.eventsList=[Xe,Ze,Ke,Ue,Je,qe,Qe,Ye],this.config={},this.config.evtData={}}getMouseEvents(e,t,a){var i=this,o=i._lastDatasetIndex,r=i._lastPointIndex,l=e.type,s={fireOut:!1,events:[]};if(i.hasTouchEvent&&(l===Xe||l===$e))return s;switch(l){case Qe:s.events.push(Qe);break;case qe:case Je:o===t&&r===a?(clearTimeout(i.mouseoutTimer),s.events.push(Je)):(s.events.push(Ye),s.fireOut=!0);break;case Ze:i.hasTouchEvent=!0;case Xe:i.globalHandlerAttached||(i.globalHandlerAttached=!0,at?i.eventOutput=He.a.listen(tt,Ze,i.globalHandler):n.pb&&(i.eventOutput=He.a.listen(tt,Xe,i.globalHandler))),o!==t||r!==a?(s.fireOut=!0,s.events.push(Ye)):at&&s.events.push(Je),s.events.push(Xe);break;case Ye:o===t&&r===a?clearTimeout(i.mouseoutTimer):(s.fireOut=!0,s.events.push(Ye));break;case Ue:case Ke:i.hasTouchEvent=!1,s.events.push(Ke);break;case $e:if(n.pb&&!e.originalEvent.relatedTarget)return s;s.fireOut=!0}return s}addEvents(){var e,t,a,i=this,n=i.getFromEnv("chart"),o=n.getChildren("canvas"),r=i.config.evtData,l=i.eventsList;for(n.config.enableMouseOutEvent&&l.push($e),i._removeListners(),r.chart=n,r.mouseTracker=i,t=0;t<o.length;t++)for(a in e=o[t],l)e.addEventListener(l[a],i.handler)}_removeListners(){var e,t,a,i=this,n=i.getFromEnv("chart").getChildren("canvas"),o=i.eventsList;for(a=0;a<n.length;a++)for(t in e=n[a],o)e.removeEventListener(o[t],i.handler);i._removeDocEvents()}_removeDocEvents(){this.eventOutput&&this.eventOutput.unlisten(),this.eventOutput=n.D}_dispose(){this._removeListners(),super._dispose()}},nt=function(e){let t;e.config.enablemousetracking?(Object(n.M)(e,it,"mouseTracker"),t=e.getChildren("mouseTracker")[0],!e.config.mouseTrackerEventAdded&&(t.addEvents(),e.config.mouseTrackerEventAdded=!0)):((t=e.getChildren("mouseTracker")&&e.getChildren("mouseTracker")[0])&&t._removeListners(),e.config.mouseTrackerEventAdded=!1)};let ot,rt=Math.max,lt=Math.min;var st=class extends o{constructor(){super(),this.registerFactory("axis",Le,["canvas"]),this.registerFactory("canvas",Be),this.registerFactory("vCanvas",We,["axis"]),this.registerFactory("mouseTracker",nt,["canvas"])}static getName(){return"Cartesian"}getName(){return"Cartesian"}getType(){return"chartAPI"}_allocateXAxisLabelSpace(e){var t,a=this.config,i=e.getAxisEndLabelDisplaySpace(),n=i.left,o=i.right,r=i.top,l=i.bottom,s=a.availableWidth,c=a.availableHeight,d=a.canvasLeft,h=a.canvasRight,g=a.canvasTop,b=a.canvasBottom,m=a.width,p=a.height,u=function(e,t){return e<t&&0<t?t-e:0};r+l>c&&(r=c*r/(t=r+l),l=c*l/t),n+o>s&&(n=s*n/(t=n+o),o=s*o/t),n=u(d,n),o=u(m-h,o),r=u(g,r),l=u(p-b,l),this._allocateSpace({left:n,right:o,top:r,bottom:l})}_setCategories(){var e=this.getFromEnv("dataSource"),t=this.getChildren("xAxis"),a=e.categories&&e.categories.length&&e.categories[0].category;t&&t[0].setTickValues(a)}_feedAxesRawData(){var e,t,a=this,i=a.config,o=a.getFromEnv("dataSource");return e=a.getSpecificxAxisConf(),t=a.getSpecificyAxisConf(),e.vtrendlines=Object(n.T)([],o.vtrendlines),t.trendlines=Object(n.T)([],o.trendlines),i.isstacked&&(t.isPercent=Object(n.Bb)(i.stack100percent,0)),{yAxisConf:[t],xAxisConf:[e]}}getSpecificxAxisConf(){var e=this,t=e.getFromEnv("chart-attrib"),a=e.config,i=e.config.is3D,o=e.getBasexAxisConf();return o.isReverse=a.reverseXAxis,o.axisLineColor=Object(n.zb)(t.xaxislinecolor,t.axislinecolor,"#000000"),o.showAlternateGridColor=Object(n.Bb)(t.showalternatevgridcolor,0),o.numDivLines=Object(n.Bb)(t.numvdivlines,a.numVDivLines),o.axisName=t.xaxisname,o.setAdaptiveMin=Object(n.Bb)(t.setadaptivexmin,a.setadaptivexmin,a.setadaptivexmin),o.showLimits=Object(n.Bb)(t.showvlimits,a.showvlimits),o.showDivLineValues=Object(n.Bb)(t.showvdivlinevalues,t.showvdivlinevalues,a.showvdivlinevalues),o.zeroPlaneThickness=Object(n.Bb)(t.vzeroplanethickness,t.vdivlinethickness,a.zeroplanethickness,2),o.zeroPlaneAlpha=Object(n.Bb)(t.vzeroplanealpha,t.vdivlinealpha,a.zeroplanealpha),o.showZeroPlaneValue=Object(n.Bb)(t.showvzeroplanevalue,a.showzeroplanevalue),o.showAxisLine=i?0:Object(n.Bb)(t.showxaxisline,t.showaxislines,t.drawAxisLines,a.showxaxisline,0),o.maxLabelHeight=t.maxlabelheight,o.showZeroPlane=Object(n.Bb)(t.showvzeroplane,a.showzeroplane),o}getSpecificyAxisConf(){var e=this,t=e.getFromEnv("chart-attrib"),a=e.config,i=e.config.is3D,o=i?n.K.chart3D:n.K.chart2D,r=a.isInverse,l=e.getFromEnv("color-manager"),s=Object(n.Bb)(t.showzeroplane,a.showzeroplane,1),c=Object(n.Bb)(t.showzeroplanevalue,a.showzeroplanevalue);return s||c!==ot||(c=0),{isVertical:!0,isReverse:!r,isOpposit:!1,outCanfontFamily:Object(n.zb)(t.outcnvbasefont,t.basefont,"Verdana,sans"),outCanfontSize:Object(n.Ab)(t.outcnvbasefontsize,t.basefontsize,10),outCancolor:Object(n.zb)(t.outcnvbasefontcolor,t.basefontcolor,l.getColor(o.baseFontColor)).replace(/^#? ([a-f0-9]+)/gi,"#$1"),axisBreaks:t.yaxisbreaks,axisNamePadding:t.yaxisnamepadding,axisValuePadding:t.yaxisvaluespadding,axisNameFont:t.yaxisnamefont,axisNameFontSize:t.yaxisnamefontsize,axisNameFontColor:t.yaxisnamefontcolor,axisNameFontBold:t.yaxisnamefontbold,axisNameFontItalic:t.yaxisnamefontitalic,axisNameBgColor:t.yaxisnamebgcolor,axisNameBorderColor:t.yaxisnamebordercolor,axisNameAlpha:t.yaxisnamealpha,axisNameFontAlpha:t.yaxisnamefontalpha,axisNameBgAlpha:t.yaxisnamebgalpha,axisNameBorderAlpha:t.yaxisnameborderalpha,axisNameBorderPadding:t.yaxisnameborderpadding,axisNameBorderRadius:t.yaxisnameborderradius,axisNameBorderThickness:t.yaxisnameborderthickness,axisNameBorderDashed:t.yaxisnameborderdashed,axisNameBorderDashLen:t.yaxisnameborderdashlen,axisNameBorderDashGap:t.yaxisnameborderdashgap,axisNameWidth:t.yaxisnamewidth,useEllipsesWhenOverflow:t.useellipseswhenoverflow,rotateAxisName:Object(n.Bb)(t.rotateyaxisname,1),axisName:t.yaxisname,divLineColor:Object(n.zb)(t.divlinecolor,l.getColor(o.divLineColor)),divLineAlpha:Object(n.zb)(t.divlinealpha,i?l.getColor("divLineAlpha3D"):l.getColor("divLineAlpha")),divLineThickness:Object(n.Bb)(t.divlinethickness,1),divLineIsDashed:!!Object(n.Bb)(t.divlinedashed,t.divlineisdashed,0),divLineDashLen:Object(n.Bb)(t.divlinedashlen,4),divLineDashGap:Object(n.Bb)(t.divlinedashgap,2),showAlternateGridColor:Object(n.Bb)(t.showalternatehgridcolor,1),alternateGridColor:Object(n.zb)(t.alternatehgridcolor,l.getColor("altHGridColor")),alternateGridAlpha:Object(n.zb)(t.alternatehgridalpha,l.getColor("altHGridAlpha")),numDivLines:Object(n.Bb)(t.numdivlines,a.numDivLines),axisMinValue:a.yRangeMin||t.yaxisminvalue,axisMaxValue:a.yRangeMax||t.yaxismaxvalue,setAdaptiveMin:Object(n.Bb)(t.setadaptivesymin,t.setadaptiveymin,a.setAdaptiveMin),adjustDiv:t.adjustdiv,labelStep:t.yaxisvaluesstep,showAxisValues:Object(n.Bb)(t.showyaxisvalues,t.showyaxisvalue,a.showyaxisvalues),showLimits:Object(n.Bb)(t.showyaxislimits,t.showlimits,e.showLimits),showDivLineValues:Object(n.Bb)(t.showdivlinevalues,t.showdivlinevalue,a.showdivlinevalues),showZeroPlane:s,zeroPlaneColor:t.zeroplanecolor,zeroPlaneThickness:Object(n.Bb)(t.zeroplanethickness,t.divlinethickness,a.zeroplanethickness,2),zeroPlaneAlpha:Object(n.Bb)(t.zeroplanealpha,t.divlinealpha,a.zeroplanealpha),showZeroPlaneValue:c,showZeroPlaneOnTop:a.showzeroplaneontop,trendlineColor:t.trendlinecolor,trendlineToolText:t.trendlinetooltext,trendlineThickness:t.trendlinethickness,trendlineAlpha:t.trendlinealpha,showTrendlinesOnTop:t.showtrendlinesontop,showAxisLine:i?0:Object(n.Bb)(t.showyaxisline,t.showaxislines,t.drawAxisLines,a.showyaxisline,0),axisLineThickness:Object(n.Bb)(t.yaxislinethickness,t.axislinethickness,1),axisLineAlpha:Object(n.Bb)(t.yaxislinealpha,t.axislinealpha,100),axisLineColor:Object(n.zb)(t.yaxislinecolor,t.axislinecolor,"#000000"),forceTrendBelow:!!a.is3D}}getBasexAxisConf(){var e=this,t=e.getFromEnv("chart-attrib"),a=e.config.is3D,i=a?n.K.chart3D:n.K.chart2D,o=e.getFromEnv("color-manager");return{isVertical:!1,isOpposit:!1,outCanfontFamily:Object(n.zb)(t.outcnvbasefont,t.basefont,"Verdana,sans"),outCanfontSize:Object(n.Ab)(t.outcnvbasefontsize,t.basefontsize,10),outCancolor:Object(n.zb)(t.outcnvbasefontcolor,t.basefontcolor,o.getColor(i.baseFontColor)).replace(/^#? ([a-f0-9]+)/gi,"#$1"),axisNamePadding:t.xaxisnamepadding,axisValuePadding:t.labelpadding,axisNameFont:t.xaxisnamefont,axisNameFontSize:t.xaxisnamefontsize,axisNameFontColor:t.xaxisnamefontcolor,axisNameFontBold:t.xaxisnamefontbold,axisNameFontItalic:t.xaxisnamefontitalic,axisNameBgColor:t.xaxisnamebgcolor,axisNameBorderColor:t.xaxisnamebordercolor,axisNameAlpha:t.xaxisnamealpha,axisNameFontAlpha:t.xaxisnamefontalpha,axisNameBgAlpha:t.xaxisnamebgalpha,axisNameBorderAlpha:t.xaxisnameborderalpha,axisNameBorderPadding:t.xaxisnameborderpadding,axisNameBorderRadius:t.xaxisnameborderradius,axisNameBorderThickness:t.xaxisnameborderthickness,axisNameBorderDashed:t.xaxisnameborderdashed,axisNameBorderDashLen:t.xaxisnameborderdashlen,axisNameBorderDashGap:t.xaxisnameborderdashgap,useEllipsesWhenOverflow:t.useellipseswhenoverflow,divLineColor:Object(n.zb)(t.vdivlinecolor,t.divlinecolor,o.getColor(i.divLineColor)),divLineAlpha:Object(n.zb)(t.vdivlinealpha,t.divlinealpha,a?o.getColor("divLineAlpha3D"):o.getColor("divLineAlpha")),divLineThickness:Object(n.Bb)(t.vdivlinethickness,t.divlinethickness,1),divLineIsDashed:!!Object(n.Bb)(t.vdivlinedashed,t.vdivlineisdashed,t.divlinedashed,t.divlineisdashed,0),divLineDashLen:Object(n.Bb)(t.vdivlinedashlen,t.divlinedashlen,4),divLineDashGap:Object(n.Bb)(t.vdivlinedashgap,t.divlinedashgap,2),alternateGridColor:Object(n.zb)(t.alternatevgridcolor,o.getColor("altVGridColor")),alternateGridAlpha:Object(n.zb)(t.alternatevgridalpha,o.getColor("altVGridAlpha")),labelFont:t.labelfont,labelFontSize:t.labelfontsize,labelFontColor:t.labelfontcolor,labelFontAlpha:t.labelalpha,labelFontBold:t.labelfontbold,labelFontItalic:t.labelfontitalic,axisMinValue:t.xaxisminvalue,axisMaxValue:t.xaxismaxvalue,adjustDiv:t.adjustvdiv,labelDisplay:t.labeldisplay,showLabels:t.showlabels,rotateLabels:t.rotatelabels,slantLabel:Object(n.Bb)(t.slantlabels,t.slantlabel),labelStep:Object(n.Bb)(t.labelstep,t.xaxisvaluesstep),showAxisValues:Object(n.Bb)(t.showxaxisvalues,t.showxaxisvalue),zeroPlaneColor:t.vzeroplanecolor,trendlineColor:t.trendlinecolor,trendlineToolText:t.trendlinetooltext,trendlineThickness:t.trendlinethickness,trendlineAlpha:t.trendlinealpha,showTrendlinesOnTop:t.showtrendlinesontop,axisLineThickness:Object(n.Bb)(t.xaxislinethickness,t.axislinethickness,1),axisLineAlpha:Object(n.Bb)(t.xaxislinealpha,t.axislinealpha,100)}}getConfig(e){return e?this.config[e]:this.config}_getSumValueSpace(e){var t,a=Math.max,i=this,o={},r=i.isBar,l=i.getFromEnv("dataSource").chart,s=0===i.showsum?0:Object(n.Bb)(l.showsum,i.showsum,0),c=Object(n.Bb)(i.config.stack100percent),d=i.config.isstacked,h=0,g=[],b=0;if(i.iterateComponents(e=>{("cartesianStackGroup"===e.getName()||"marimekkoStackgroup"===e.getName())&&g.push(e)}),s&&c&&d&&g.length){for(t=g.length-1;0<=t;t--)o=g[t].getMaxSumValueSpace(),r?h=a(h,o.maxWidth):b=a(b,o.maxHeight);b>e&&(b=e),h>e&&(h=e)}return{top:b,right:h}}setAxisDimention(){var e=Math.max;let t=this,a=t.getChildren("xAxis")&&t.getChildren("xAxis")[0],i=t.getChildren("yAxis")&&t.getChildren("yAxis")[0],n=t.getFromEnv("chartConfig"),o=n.xDepth,r=t.getChildren("canvas")&&t.getChildren("canvas")[0].config,l=r&&r.canvasBorderWidth,s=r&&r.canvasPadding,c=r.canvasLeft,d=r&&r.canvasPaddingLeft,h=r&&r.canvasPaddingRight,g=r.canvasTop,b=r&&r.canvasPaddingTop;a&&a.setAxisConfig({canvasPaddingLeft:e(d,s),canvasPaddingRight:e(h,s)}),a&&a.setAxisDimention({x:c+(o||0)+e(d,s),y:n.canvasBottom+(n.shift||0)+l,opposite:g-l,axisLength:r.canvasWidth-(o||0)-e(d,s)-e(h,s)}),i&&i.setAxisDimention({x:c-l,y:g+b,opposite:n.canvasRight+l,axisLength:n.canvasHeight-b-r.canvasPaddingBottom})}_getTrendLineMinMax(e,t){var a,i,n,o,r,l="v"===e?this.getFromEnv("dataSource").vtrendlines:this.getFromEnv("dataSource").trendlines,s={max:-1/0,min:1/0};if(t=t||"p",l)for(i=0,o=l.length;i<o;i+=1)for(n=0,r=l[i].line?l[i].line.length:0;n<r;n+=1)a=l[i].line[n],!("s"===t&&"s"!==a.parentyaxis||"s"!==t&&"s"===a.parentyaxis)&&(s.max=rt(a.startvalue||-1/0,a.endvalue||-1/0,s.max),s.min=lt(a.startvalue||1/0,a.endvalue||1/0,s.min));return s}};var ct=function(e){let t,a,i,o,r=e.getFromEnv("dataSource").dataset,l=t=e.getChildren().canvas[0].getChildren("vCanvas")[0],s=e.config.defaultDatasetType||"";return r?((i=e.getDSGroupdef())&&(Object(n.M)(t,i,"datasetGroup_"+s,1,[r]),o=t.getChildren("datasetGroup_"+s)),o&&(l=o[0]),a=e.getDSdef(),void Object(n.Q)(l,a,"dataset",r.length,r)):void e.setChartMessage()};let dt=n.Db.POINTER,ht="none",gt="M",bt="L",mt=(e,t,a,i,n)=>{var o,r,l,s,c,d,h,g,b,m,p,u=[gt];return"column"===n||"dragColumn"===n||"column3D"===n||"realtimeColumn"===n||"errorBar2D"===n?(r=.5*(o=.25*a),l=.7*i,s=.4*i,u=u.concat([e,t+i,"l",0,-l,o,0,0,l,"z","m",o+r,0,"l",0,-i,o,0,0,i,"z","m",o+r,0,"l",0,-s,o,0,0,s,"z"])):"bar2D"===n||"bar3D"===n?(o=.3*a,r=.6*a,s=(l=i/4)/2,u=u.concat([e,t,bt,e+r,t,e+r,t+l,e,t+l,"Z",gt,e,t+l+s,bt,e+a,t+l+s,e+a,t+l+s+l,e,t+2*l+s,"Z",gt,e,t+2*(l+s),bt,e+o,t+2*(l+s),e+o,t+i,e,t+i,"Z"])):"area"===n||"area3d"===n||"areaspline"===n||"dragArea"===n||"realTimeArea"===n||"splinearea"===n?(o=.3*a,r=.6*a,l=.6*i,s=.2*i,c=.8*i,u=u.concat([e,t+c,bt,e,t+l,e+o,t+s,e+r,t+l,e+a,t+s,e+a,t+c,"Z"])):"pie2D"===n||"pie3d"===n||"doughnut2D"===n||"doughnut3D"===n?(r=.9*(o=.5*a),d=e+o+(m=1),g=t+o-m,h=e+o-(p=1),b=t+o+p,u=u.concat([d,g,bt,d,g-r+m,"A",r-m,r-m,0,0,1,d+r-m,g,"Z",gt,h,b,bt,h,b-r,"A",r,r,0,1,0,h+r,b,"Z"])):u=u.concat([e,t,bt,e+a,t,e+a,t+i,e,t+i,"Z"]),{path:u}},pt=function(e,t){let a=e.config,i=e.getLinkedParent().config,o=i.symbolWidth,r=Object(n.Bb)(i.padding,4),s=.5*o,c=(i.initialItemX||0)+a._legendX+r,d=(i.initialItemY||0)+a._legendY-r,h=c+i.symbolPadding+s,g=d+(a._markerYGutter||0)+i.symbolPadding+s,b=Object(l.k)(a.anchorSide),m=a.symbol=b&&b.split("_")||[],p="spoke"===m[0]?1:0;return("line"===a.type||a.drawLine)&&(s*=.6),{path:Object(n.Cb)([m[1]||2,h,g,s,a.startAngle,a.spoke||p]),cursor:t.cursor||dt,stroke:t.stroke,fill:t.fill,"stroke-width":t["stroke-width"]||.5}};Object(x.a)({name:"legendItemAnimation",type:"animationRule",extension:{"*.legendItem.legendItem":()=>({"icon.appearing":()=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:1}}],"background.appearing":e=>[{initialAttr:{opacity:0},slot:"plot",startEnd:{start:.5,end:1},finalAttr:{opacity:e.attr.opacity}}],"icon.disappearing":()=>[{finalAttr:{opacity:0},slot:"initial"}]})}});var ut=class extends r.a{constructor(){super(),this._stateCosmetics={},this._legendState=[]}getName(){return"legendItem"}parseLegendCosmetics(){let e,t,a,i=this,o=this.getLinkedParent(),r=o.getLegendState(),l=i.getLegendState(),s=["default"],c={};for(s=s.concat(r,l),a=0;a<s.length;a++)e=o.getStateCosmetics(s[a]),t=i.getStateCosmetics(s[a]),e&&("function"==typeof e?c=e(c,i):Object(n.T)(c,e)),t&&("function"==typeof t?c=t(c,i):Object(n.T)(c,t));return c}getType(){return"legendItem"}configure(e){var t,a,i=this.config;for(t in e)if(e.hasOwnProperty(t))if("object"!=typeof e[t])i[t]=e[t];else{let n=i[t]?i[t]:{};for(a in e[t])n[a]=e[t][a];i[t]=n}}itemClickFn(){let e=this,t=e.getFromEnv("chart-attrib"),a=Object(n.Bb)(t.interactivelegend,1),i=e.getLinkedItem("owner");a&&i.legendInteractivity(e)}dispose(){this.removeEventListener("click",this.click),this.removeEventListener("mouseover",this.mouseover),this._dispose()}getLegendState(){return this._legendState}hasState(e){var t,a,i=this.getLegendState();for(t=0,a=i.length;t<a;t++)if(i[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,a,i=1;if(e)for(t=0,a=this._legendState.length;t<a&&i;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),i=0);else this._legendState.length=0;this.asyncDraw()}removeStateCosmetics(e){delete this._stateCosmetics[e]}setStateCosmetics(e,t){this._stateCosmetics[e]=t}getStateCosmetics(e){return this._stateCosmetics[e]}draw(){var e,t,a,i,o,r,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j,S,A,F,B,T,E,P,_,D,I,M,V,z,R=this.getLinkedParent(),N=R.getFromEnv("chart").config,G=this,W=G.getFromEnv("animationManager"),H=G.config,Y=R.config,X=Y.legendHeight,Z=Y.symbolPadding,K=Y.symbolWidth,U=Y.interactiveLegend,J=Y.textPadding||2,q=Object(n.Bb)(Y.padding,4),$=Y.itemHoverStyle,Q=R.getChildContainer("itemGroup"),ee=Y.drawCustomLegendIcon,te=G.hasState("hidden"),ae={};a=(e=G.parseLegendCosmetics()).symbol,i=Y.initialItemX||0,o=Y.initialItemY||0,d=H.type,y=e.symbol.stroke||"000000",C=e.symbol.fill,t=e.symbol.lineWidth||Y.lineWidth,L=H.anchorSide,w=H.drawLine,h=i+H._legendX+q,g=o+H._legendY-q,E=G.getGraphicalElement("legendItemBackground"),c=G.getGraphicalElement("legendItemText"),b=G.getGraphicalElement("legendItemLine"),p=G.getGraphicalElement("legendItemSymbol"),(U=Object(n.zb)(H.interactiveLegend,U))||(e.cursor="default"),P=e.text,V=h+X+J-2,z=g+(H._legendTestY||0),P.text=H.name,P.x=V,P.y=z,s=W.setAnimation({el:c||"text",attr:P,component:G,container:Q,label:"icon"}),c||(s=G.addGraphicalElement("legendItemText",s)),s.data("legendItem",H),_=!1,ee&&!1!==H.customLegendIcon?(S=!te&&a.borderColor,A=Object(n.zb)(a.borderAlpha),k=!te&&a.bgColor,j=Object(n.zb)(a.bgAlpha,"100"),F=e.symbol.rawFillColor,C=te?e.symbol.fill:k||F,C=Object(l.c)(C,j),B=e.symbol.rawStrokeColor,y=te?e.symbol.stroke:S||B||F,y=Object(l.c)(y,A),u=h+Z+(f=.5*K),r=g+(H._markerYGutter||0)+Z+f,v="spoke"===(x=Object(l.k)(a.sides)&&Object(l.k)(a.sides).split("_")||[])[0]?1:0,D={path:Object(n.Cb)([x[1]||2,u,r,f,a.startAngle||0,v]),cursor:e.symbol.cursor||dt,stroke:y,fill:C,"stroke-width":Object(n.Bb)(a.borderThickness,1)}):"line"===d||w?(r=g+(H._markerYGutter||0)+Z+.5*K,M={path:[gt,h+Z,r,bt,h+Z+K,r]},_=!0,ae={opacity:N.legendiconalpha||1,"stroke-width":t,stroke:y,cursor:e.cursor||dt},L&&(D=pt(G,e.symbol))):L?D=pt(G,e.symbol):"line"!==d&&(y=H.symbolStroke||y,D={path:mt(h+Z,g+(H._markerYGutter||0)+Z,K,K,d).path,"stroke-width":.5,stroke:y,fill:C,cursor:e.cursor||dt}),M&&_?(Object.assign(M,ae),b=W.setAnimation({el:b||"path",attr:M,component:G,callback:function(){this.show()},container:Q}),!G.getGraphicalElement("legendItemLine")&&(b=G.addGraphicalElement("legendItemLine",b))):b&&b.hide(),D?(D.opacity=Object(n.Bb)(e.symbol.opacity,1),m=W.setAnimation({el:p||"path",attr:D,component:G,callback:function(){this.show()},container:Q,label:"icon"}),(!p||!p.node)&&(m=G.addGraphicalElement("legendItemSymbol",m)),m.data("legendItem",H)):p&&p.hide(),O=e.background&&e.background.legendBackgroundColor?Object(l.c)(e.background.legendBackgroundColor,e.background.alpha):n.C,I={x:h,y:g,width:H._totalWidth,height:H._legendH,r:0,fill:O,opacity:1,"stroke-width":1,stroke:ht,cursor:e.symbol.cursor||dt},T=W.setAnimation({el:E||"rect",attr:I,css:void 0,component:G,label:"background",container:Q}),E||G.addGraphicalElement("legendItemBackground",T),T.data("legendItem",G).data("interactive",U).data("itemHoverStyle",$).data("itemStyle",e)}};let ft=[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"plot"}],vt=[{slot:"plot",startEnd:{start:0,end:.5}}],xt=[{slot:"intial"}];var yt={"*.legend.legend":()=>({"legendGroup.appearing":ft,"legendGroup.updating":vt,"legendGroup.disappearing":xt,"scroller.appearing":ft,"scroller.updating":vt,"scroller.disappearing":xt})},Ct=a(5);let Ot,Lt={left:n.v,right:n.r,center:n.t},wt=Math,kt=wt.min,jt=wt.max,St=wt.floor,At=wt.ceil,Ft=",",Bt="none",Tt=n.Db.NORMAL,Et={fontWeight:{1:n.Db.BOLD,0:Tt},fontStyle:{1:"italic",0:Tt},textDecoration:{1:"underline",0:n.Db.noneStr}},Pt=function(e){let t,a;return{dragstart:()=>{t=e.config.xL||e.config.xPos,a=e.config.yL||e.config.yPos},dragmove:i=>{let n,o,r=i.originalEvent.data[0],l=i.originalEvent.data[1],s=e.config,c=e.getFromEnv("chartConfig"),d=(s.borderWidth||0)+2;n=kt(jt(t+r,d),c.width-s.width-d),o=kt(jt(a+l,d),c.height-s.height-d),s.xPos=s.xL=n,s.yPos=s.yL=o,e.addJob("draw",e.dragDraw,Ct.b&&Ct.b.draw)}}};Object(x.a)({name:"legendAnimation",type:"animationRule",extension:yt});var _t=class extends r.a{constructor(){super();let e=this;e._stateCosmetics={},e._legendState=[],e.dragDraw=function(){e.draw()},e.drawScroll=function(){e.createItemGroup()},e.config.handlers=Pt(e)}createItem(e){var t;return t=new ut,this.attachChild(t,"legendItem"),t.setLinkedItem("owner",e),t.addEventListener("mouseover",function(){t.setLegendState("hover",!0)}),t.addEventListener("mouseout",function(){t.removeLegendState("hover")}),t.getId()}getItem(e){var t=this.getChildren().legendItem;if(e===Ot)return!1;if(t)for(let a=0;a<t.length;a++)if(t[a].getId()===e)return t[a]}getSortedLegendItems(){let e,t,a=this.getChildren("legendItem")||[],i=this.config.reverselegend,n={},o=[];for(e=0,t=a.length;e<t;e++)a[e].config.index===Ot?n[t+e]=a[e]:n[a[e].config.index]=a[e];return Object.keys(n).sort(function(e,t){return i?t-e:e-t}).forEach(e=>{o.push(n[e])}),o}disposeItem(e){var t=this.getItem(e);t&&t.remove()}getName(){return"legend"}getType(){return"legend"}__setDefaultConfig(){super.__setDefaultConfig();let e=this.config;e.enabled=!0,e.symbolWidth=12,e.borderRadius=1,e.lastScrollPos=0,e.oriSymbolPadding=3,e.textPadding=4,e.scrollY=0,e.backgroundColor="#FFFFFF",e.initialItemX=0,e.title={text:n.b,x:0,y:0,padding:2},e.scroll={},e.itemStyle={}}createLegendGroup(){let e,t=this,a=t.config,i=t.getFromEnv("chart"),n=i.config,o=t.getFromEnv("animationManager"),r=.5*(a.borderWidth||0)+2,l=t.getContainer("legendGroup");a.xL&&(a.xL=kt(jt(a.xL,r),n.width-a.width-r)),a.yL&&(a.yL=kt(jt(a.yL,r),n.height-a.height-r)),e=o.setAnimation({el:l||"group",attr:{name:"legendGroup",transform:["T",a.xL||a.xPos,a.yL||a.yPos]},container:i.getChildContainer("legendGroup"),component:t}),l||t.addContainer("legendGroup",e)}draw(){this.createLegendGroup(),this.drawLegendBox(),this.createItemGroup(),this.drawCaption(),this.decideScroll()}decideScroll(){let e=this,t=e.getFromEnv("animationManager"),a=e.config,i=e.getLinkedItem("legendScrollBar");a.scroll.enabled?(this.createScrollGroup(),this.createScrollBar()):a.hasScroll&&(e.removeLinkedItem("legendScrollBar"),t.setAnimation({el:e.getChildContainer("itemGroup"),attr:{"clip-rect":null,transform:"none"},component:e}),i.config.node.hide(),a.scrollY=0,a.hasScroll=!1)}createItemGroup(){var e,t=this,a=t.getFromEnv("animationManager"),i=t.getContainer("legendGroup"),n=t.getChildContainer("itemGroup");return e=a.setAnimation({el:n||"group",attr:{name:"item",transform:["T",0,t.config.scrollY||0]},container:i,component:t}),n||t.addChildContainer("itemGroup",e),e}createScrollGroup(){let e,t=this,a=t.getFromEnv("animationManager"),i=t.getChildContainer("scrollGroup"),n=t.getContainer("legendGroup");e=a.setAnimation({el:i||"group",attr:{name:"scrollGroup"},container:n,component:t,label:"scroller"}),i||t.addChildContainer("scrollGroup",e)}createScrollBar(){var e,t,a,i,o,r,s,c=this,d=c.config,h=c.getLinkedItem("legendScrollBar"),g=c.getChildContainer("itemGroup"),b=c.getFromEnv("toolbox"),m=c.getFromEnv("toolBoxAPI"),p=m&&m.Scroller,u=d.borderWidth||0,f=Object(n.Bb)(d.padding,4),v=.5*f,x=d.scroll,y=d.width,C=d.height;e={conf:{isHorizontal:!1,color:Object(l.c)(c.getFromEnv("chart-attrib").legendscrollbgcolor)},handler:{scroll:function(e){d.lastScrollPos=e,d.scrollY=(a-d.totalHeight)*e,c.addJob("scrollDraw",c.drawScroll,Ct.b&&Ct.b.draw)},mousedown:function(e){e.preventDefault(),e.stopPropagation()}}},h||((h=new p).configure(e.conf,(b.idCount||0)+1,b.pId,c.getFromEnv("chartInstance").id),h.attachEventHandlers(e.handler),this.setLinkedItem("legendScrollBar",h),this.config.hasScroll=!0),t=Ft+y+Ft+(a=C-f),g.attr({"clip-rect":"0,"+v+t}),o=y-10+v-u,r=.5*u,s=C-u,i={scrollPosition:x.scrollPosition||0,scrollRatio:(a+f)/d.totalHeight,showButtons:!1,displayStyleFlat:x.flatScrollBars},h.draw(o,r,{height:s,scrollRatio:i.scrollRatio,startPercent:0,scrollPosition:d.lastScrollPos||0,color:d.legendScrollBgColor,parentLayer:c.getChildContainer("scrollGroup")})}drawCaption(){var e,t,a,i,o=this,r=o.getChildContainer("itemGroup"),l=o.getGraphicalElement("caption"),s=this.getFromEnv("animationManager"),c=this.config,d=Object(n.Bb)(c.padding,4),h=c.scroll.enabled,g=c.width;if(c.title&&c.title.text!==n.b&&c.validLegendItem){switch(c.title.align){case n.v:a=d;break;case n.r:a=g-d-(h?10:0);break;default:a=.5*g}t=c.title.style,e={text:c.title.text,title:c.title.originalText||n.b,x:a,y:d,fill:c.title.style.color,direction:c.textDirection,"line-height":t.lineHeight,"vertical-align":n.w,"text-anchor":c.title.align,opacity:1},i={"font-weight":t.fontWeight,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-size":t.fontSize},l&&l.show(),l?s.setAnimation({el:l,attr:e,component:o}):(l=s.setAnimation({el:"text",attr:e,component:o,container:r}),(l=this.addGraphicalElement("caption",l)).css(i)),o.getFromEnv("toolTipController").enableToolTip(l,c.title.originalText)}else l&&s.setAnimation({el:l,component:o,doNotRemove:!0,callback:function(){l.hide()}})}drawLegendBox(){var e,t=this,a=this.getFromEnv("animationManager"),i=t.config,n=t.getContainer("legendGroup"),o=i.width,r=t.getGraphicalElement("box"),l=i.height,s=i.borderRadius,c=i.backgroundColor,d=i.borderColor,h=i.borderAlpha,g=i.backgroundAlpha,b=i.borderWidth||0;return e=a.setAnimation({el:r||"rect",attr:{x:0,y:0,width:o,height:l,r:s,stroke:d,"stroke-width":b,fill:c||Bt,"stroke-opacity":h/100,"fill-opacity":g/100,cursor:i.legendAllowDrag?"move":"default"},container:n,component:t,label:"legendGroup"}),r||(t.addGraphicalElement("box",e),e.shadow(i.shadow)),e}getPosition(){var e,t,a,i,o,r=this.getFromEnv("chart").config,l=this.config,s=r.height-r.canvasBottom,c=r.canvasLeft,d=r.canvasWidth,h=l.chartMarginLeft||0,g=l.chartMarginRight||0,b=l.chartMarginBottom||0,m=r.actionBarHeight||0,p=l.actualCanvasMarginLeft||0,u=r.actualCanvasMarginBottom||0,f=r.actualCanvasMarginRight||0,v=l.alignLegendWithCanvas,x=r.height,y=r.canvasTop,C=l.width||0,O=l.height||0,L=r.borderWidth,w=r.oriCanvasLeft,k=r.oriTopSpace,j=r.oriBottomSpace,S=0,A=l.borderWidth||0;return l.legendPos===n.u&&(l.align=n.u,l.verticalAlign=n.t,o=l.layout="vertical"),o?(e=r.width-g-f-C-L,t=(S=Object(n.Bb)(k,y))+.5*(x-Object(n.Bb)(j,s)-S-O)+(l.y||0)):(a=r.width-(h+p+(g+f)),i=v?d-C:a-C,e=(v?Object(n.Bb)(w,c):h+p)+i/2,t=x-O-u-b-m),Object(n.P)(e,t,C,O,A)}reverseLegendFn(){var e,t,a=this,i=a.config.items||[],n=[],o=i.length,r=0,l=a.config;for(e=o-1;0<=e;e--)i[e].configuration.mainDS?(t=e,n=n.concat(i.splice(t,r+1)),r=0):r++;n.length&&(l.orderReversed=!0,a.config.items=n.slice(0))}allocatePosition(){var e=this.config,t=this.getPosition();e.xPos=t.x,e.yPos=t.y,e.width=t.width,e.height=t.height}_manageLegendPosition(e){var t=this,a=t.config,i=t.getFromEnv("chart").hasSubDataset,o=a.legendPos,r=t.getChildren().legendItem;return a.reversed===a.prevReversed?i&&a.orderReversed&&t.reverseLegendFn():i?!a.orderReversed&&t.reverseLegendFn():r&&r.reverse(),a.prevReversed=a.reversed,o===n.u?t._placeLegendBlockRight(e):t._placeLegendBlockBottom(e)}_placeLegendBlockBottom(e){var t,a,i,o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j,S,A,F=this,B=F.getFromEnv("chart"),T=B.config,E=T.width,P=T.height,_=T.canvasLeft,D=T.width-(T.canvasRight||0),I=B.getFromEnv("smartLabel"),M=F.config,V=M.chartMarginLeft,z=M.chartMarginRight,R=M.chartMarginTop,N=M.alignLegendWithCanvas,G=M.minimiseWrappingInLegend,W=M.legendScale,H=M.numColumns,Y=M.padding,X=2*e,Z=2*Y,K={width:Z,height:Z},U=M.title,J=U.padding,q=F.getStateCosmetics("default"),$=parseInt(q.text["font-size"],10)||10,Q=F.getSortedLegendItems(),ee=Q.length,te=M.oriSymbolPadding,ae=M.textPadding,ie=M.legendPadding,ne=T.canvasMarginRight,oe=T.canvasMarginLeft,re=B.getChildren("yAxis"),le=re&&re[0].config.isVertical?re:B.getChildren("xAxis"),se=le&&le[0],ce=le&&le[1],de=se&&se.config||{},he=ce&&ce.config||{},ge=de.nameMaxW,be=he.nameMaxW,me=de.name&&de.name.style||{},pe=he.name&&he.name.style||{},ue=de.axisName||n.b,fe=he.axisName||n.b,ve=0,xe=0,ye=0,Ce=0,Oe=0,Le=0,we=0,ke=0,je=[],Se=!1,Ae=0,Fe=0,Be=T.canvasWidth-T.canvasMarginLeft-T.canvasMarginRight,Te=Be;if(M.paddingBottom=T.height-T.canvasBottom,I.useEllipsesOnOverflow(T.useEllipsesWhenOverflow),I.setStyle(me),v=I.getOriSize(ue),I.setStyle(pe),x=I.getOriSize(fe),0>=(y=$+1)&&(y=1),te*=W,0>=(y=kt(y*=W,Be-=Z))&&(te=y=0),M.symbolWidth=y,M.textPadding=4,M.legendHeight=h=y+2*te,M.rowHeight=i=jt(parseInt(q.text["line-height"],10)||12,h),a=ae+te+Y,I.setStyle(Object(n.T)({},q.text)),r=I.getOriSize(n.A).height,o=ie+M.borderWidth/2+1,o=kt(o,e-r-8),ie=.05*i,(v||x)&&(u=Object(n.Bb)(v.height,0)>Object(n.Bb)(x.height,0)?(f=ge)&&v.width:(f=be)&&x.width),Be=N?Be:E-(u+R>P-e?2*f+z+V+ne+oe:z+V+oe+ne),M.initialItemY=0,M.initialItemX=0,M.showLegend&&0!==ee){for(l=0;l<ee;l+=1)k=j=(t=Q[l]).config||(t.config={}),(S=j.name=Object(n.xb)(k.label))===n.b||0===k.enabled||!1===k.enabled||t.getState("removed")?j.enabled=0:(j.enabled=1,ye+=1,s=!0,c=I.getOriSize(S),ve=jt(ve,c.width),Le=jt(Le,kt(c.height,X)),xe+=c.width);if(M.validLegendItem=s,Ce=xe/ye,xe+=(d=h+ie+ae+te+Z)*ye,M.x=(_-V-D+z)/2,M.x=!N&&xe>Te?0:M.x,s){for(Ce+=d,ve+=d,0<H&&ye<H&&(H=ye),xe<=Be&&(0>=H||H===ye)?(H=ye,Oe=Ce=xe/ye,Se=!0,Le>i&&(ke=(Le-i)/2,i=Le)):0<H&&(Oe=Be/H)>Ce?Oe>ve&&(Oe=ve):Be>ve&&(G||1.5*Ce>ve)?(ye<(H=St(Be/ve))&&(H=ye),Oe=ve):Be>=2*Ce?(ye<(H=St(Be/Ce))&&(H=ye),(Oe=St(Be/H))>ve&&(Oe=ve)):(H=1,Oe=Be),M.itemWidth=Oe,0>(m=At(Oe-d))&&(te=m=ae=0),M.symbolPadding=te,M.textPadding=ae,M.width=Oe*H-ie,U.oriText!==n.b&&(I.setStyle(U.style),c=I.getSmartText(U.oriText,Be,X),U.text=c.text,c.tooltext&&(U.originalText=c.tooltext),w=c.width+Z,M.width<w&&(M.initialItemX=(w-M.width)/2,M.width=w),M.initialItemY=we=c.height+J),I.setStyle(Object(n.T)({},q.text)),l=0;l<ee;l+=1)if(0!==(j=(t=Q[l]).config).enabled){if(0===m&&(je[Fe]=!0,j.name=n.b,p=1,g=parseInt(Fe/H,10),b=Fe%H,j._legendX=b*Oe,j._legendY=g*i+Z,j._legendH=p*i,j._totalWidth=y+te),Se)(c=I.getOriSize(j.name)).height<i&&(j._legendTestY=(i-c.height)/2),j._markerYGutter=ke,j._legendX=Ae,j._legendY=Z,j._legendH=i,j._totalWidth=y+a+c.width,Ae+=c.width+d;else{for(c=I.getSmartText(j.name,m,X),j.name=c.text,c.tooltext&&(j.originalText=c.tooltext);!0===je[Fe];)Fe+=1;for(O=c.height/i,L=Fe,p=0;p<O;p+=1,L+=H)je[L]=!0;c.height<i&&(j._legendTestY=(i-c.height)/2),g=parseInt(Fe/H,10),b=Fe%H,j._legendX=b*Oe,j._legendY=g*i+Z,j._legendH=p*i,j._totalWidth=y+a+c.width}Fe++}C=Se?1:At(je.length/H),K.height+=C*i+we,M.height=M.totalHeight=K.height,M.rowHeight=i,M.legendNumColumns=H,M.height-2*te>e?(M.height=e,(A=M.scroll||(M.scroll={})).enabled=!0,A.flatScrollBars=M.flatScrollBars,A.scrollBar3DLighting=M.scrollBar3DLighting,M.width=M.width+12>Be?M.width:M.width+12):M.scroll.enabled=!1,o+=M.height,M.isActive=!0,M.enabled=!0}else M.enabled=!1,M.width=0,o=0}else o=0,M.height=0,M.width=0;return{bottom:o,right:0}}_placeLegendBlockRight(e){var t,a,i,o,r,l,s,c,d,h,g=this,b=g.config,m=g.getFromEnv("chart"),p=m.config,u=m.getFromEnv("smartLabel"),f=m.getChildren("canvas")[0].config.canvasBorderThickness||0,v=b.textPadding,x=b.title.padding,y=b.oriSymbolPadding,C=b.legendPadding,O=b.legendScale,L=g.getStateCosmetics("default"),w=parseInt(L.text["font-size"],10),k=2*p.canvasHeight,j=0,S=2*b.padding,A={width:S,height:S},F={},B=!1,T=g.getSortedLegendItems(),E=T.length,P=0;if(b.initialItemY=0,b.initialItemX=0,e-=S+C,0>=(o=w+1)&&(o=1),y*=O,0>=(o=kt(o*=O,e))&&(y=o=0),b.symbolPadding=y,b.symbolWidth=o,b.legendHeight=r=o+2*y,b.rowHeight=jt(parseInt(L.text["line-height"],10)||12,r),t=C+b.borderWidth/2+f,0>(i=e-r-C-v)&&(i=0),u.useEllipsesOnOverflow(p.useEllipsesWhenOverflow),u.setStyle(Object(n.T)({},L.text)),b.showLegend&&0!==E){for(P=0;P<E;P+=1)d=l=(h=T[P]).config||(h.config={}),s=l.name=Object(n.xb)(d.label),l._legendX=0,l._legendY=A.height,0!==d.enabled&&!1!==d.enabled&&s!==n.b?(l.enabled=1,B=!0,0===i?(A.height+=l._legendH=r,l.name=n.b,l._totalWidth=o+y):(a=u.getSmartText(s,i,k),l.name=a.text,a.tooltext&&(l.originalText=a.tooltext),a.height<r&&(l._legendTestY=(r-a.height)/2),l._totalWidth=o+y+v+a.width+C,A.height+=l._legendH=jt(a.height,r),j=jt(a.width,j))):l.enabled=0;b.validLegendItem=B,B?(b.itemWidth=j+r+C+v,b.width=b.itemWidth+S,b.title.oriText!==n.b&&(u.setStyle(b.title.style),a=u.getSmartText(b.title.oriText,e,k),b.title.text=a.text,a.tooltext&&(b.title.originalText=a.tooltext),c=a.width+S,b.width<c&&(b.initialItemX=(c-b.width)/2,b.width=c),b.initialItemY=a.height+x,A.height+=b.initialItemY),b.height=b.totalHeight=A.height,t=kt(b.width+t,e),F.right=t+C,b.isActive=!0,b.enabled=!0):(b.enabled=!1,b.width=0,F.right=0)}else F.right=0,b.height=0,b.width=0;return F}postSpaceManager(){var e=this.config,t=e.legendPos,a=this.getFromEnv("chart").config.canvasHeight;t===n.u&&(e.height>a?(e.height=a,e.scroll.enabled=!0,e.scroll.flatScrollBars=e.flatScrollBars,e.scroll.scrollBar3DLighting=e.scrollBar3DLighting,e.width+=(e.scroll.scrollBarWidth=10)+(e.scroll.scrollBarPadding=2)):e.scroll.enabled=!1)}configure(){var e,t,a,i,o,r=this,s=r.config,c=r.getFromEnv("chart"),d=c.config,h=r.getFromEnv("style"),g=c.getFromEnv("chart-attrib"),b=c.config.is3D,m=r.getFromEnv("color-manager"),p=b?n.K.chart3D:n.K.chart2D,u=s.interactiveLegend=!1!==c.hasInteractiveLegend&&!!Object(n.Bb)(g.interactivelegend,1),f=Object(n.Bb)(g.useroundedges,0),v=h.outCancolor,x=Object(n.zb)(g.legenditemfont,h.outCanfontFamily),y=Object(n.Bb)(g.legendiconscale,1),C=Object(n.Ab)(g.legenditemfontsize,h.fontSize)+"px",O=Object(n.zb)(g.legenditemfontcolor,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),L=Object(l.g)(Object(n.zb)(g.legenditemhoverfontcolor,O));s.isActive=!1,s.chartMarginTop=d.origMarginTop,s.chartMarginRight=d.origMarginRight,s.chartMarginBottom=d.origMarginBottom,s.chartMarginLeft=d.origMarginLeft,s.reverselegend=Object(n.Bb)(g.reverselegend,0),s.showLegend=Object(n.Bb)(g.showlegend,!c.dontShowLegendByDefault,1),e=Object(n.Jb)({fontSize:C}),s.legendPos=Object(n.zb)(g.legendposition,c.legendposition,n.q).toLowerCase(),s.numColumns=Object(n.Bb)(g.legendnumcolumns,0),s.xL=s.yL=0,(0>=y||5<y)&&(y=1),s.drawCustomLegendIcon=Object(n.Bb)(g.drawcustomlegendicon,0),s.legendScale=y,s.legendPadding=Object(n.Bb)(g.legendpadding,7),s.alignLegendWithCanvas=d.alignLegendWithCanvas,s.title.style={fontFamily:Object(n.zb)(g.legendcaptionfont,x),fontSize:Object(n.Ab)(g.legendcaptionfontsize,h.fontSize)+"px",color:Object(n.zb)(g.legendcaptionfontcolor,v).replace(/^#?([a-f0-9]+)/gi,"#$1"),fontWeight:Et.fontWeight[Object(n.Bb)(g.legendcaptionfontbold,1)]||n.b},o=g.legendcaptionalignment?g.legendcaptionalignment.toLowerCase():Lt.center,s.title.align=Lt[o]||Lt.center,s.title.style["text-anchor"]=s.title.align,s.padding=4,t=Object(n.zb)(g.legendbordercolor,m.getColor(p.legendBorderColor)),a=s.borderAlpha=Object(n.Bb)(g.legendborderalpha,100),s.borderColor=Object(l.c)(t,a),s.borderWidth=Object(n.Bb)(g.legendborderthickness,!f||g.legendbordercolor?1:0),s.borderRadius=Object(n.Bb)(f,0),s.backgroundAlpha=i=Object(n.Bb)(g.legendbgalpha,100),s.backgroundColor=Object(l.c)(Object(n.zb)(g.legendbgcolor,m.getColor(p.legendBgColor)),i),s.symbol3DLighting=!!Object(n.Bb)(g.use3dlighting,g.useplotgradientcolor,1),s.shadow=!!Object(n.Bb)(g.legendshadow,1),s.shadow&&(s.shadow={enabled:s.shadow,opacity:jt(a,i)/100}),s.prevReversed=!!Object(n.Bb)(s.reversed,0),s.reversed=!!Object(n.Bb)(g.reverselegend,0),s.lineWidth=Object(n.Bb)(g.linethickness,2),s.borderRadius=Object(n.Bb)(g.legendborderradius,f?3:0),s.legendAllowDrag=!!Object(n.Bb)(g.legendallowdrag,0),s.title.oriText=Object(n.xb)(Object(n.ab)(g.legendcaption,n.b)),s.legendScrollBgColor=Object(l.g)(Object(n.zb)(g.legendscrollbgcolor,g.scrollcolor,m.getColor("altHGridColor"))),s.legendScrollBarColor=Object(n.zb)(g.legendscrollbarcolor,t),s.legendScrollBtnColor=Object(n.zb)(g.legendscrollbtncolor,t),s.minimiseWrappingInLegend=Object(n.Bb)(g.minimisewrappinginlegend,0),s.flatScrollBars=Object(n.Bb)(g.flatscrollbars,0),s.scrollBar3DLighting=Object(n.Bb)(g.scrollbar3dlighting,1),s.orderReversed=!1,r.setStateCosmetics("hidden",{symbol:{fill:Object(l.c)(Object(n.zb)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1")),stroke:Object(l.c)(Object(n.zb)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))},text:{fill:Object(l.c)(Object(n.zb)(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/gi,"#$1"))}}),r.setStateCosmetics("default",{text:{fill:Object(l.c)(O),"font-family":x,cursor:u?n.Db.POINTER:"default","font-size":C,"line-height":e,"vertical-align":n.w,"text-anchor":n.v,direction:"rtl"===d.textDirection?"rtl":"initial","font-weight":Et.fontWeight[Object(n.Bb)(g.legenditemfontbold,0)]||n.b},symbol:{bgColor:Object(n.zb)(g.legendiconbgcolor),cursor:u?n.Db.POINTER:"default",borderColor:Object(n.zb)(g.legendiconbordercolor),bgAlpha:Object(n.zb)(g.legendiconbgalpha,g.legendiconalpha,100),borderAlpha:Object(n.zb)(g.legendiconborderalpha,g.legendiconalpha,100),borderThickness:Object(n.Bb)(g.legendiconborderthickness),startAngle:Object(n.Bb)(g.legendiconstartangle,45),sides:Object(n.Bb)(g.legendiconsides,4)}}),r.setStateCosmetics("hover",function(e,t){return t.hasState("hidden")||(!e.text&&(e.text={}),e.text.fill=Object(l.c)(L.replace(/^#?([a-f0-9]+)/gi,"#$1")),e.text.cursor="inherit"),e}),s.legendAllowDrag&&!s._dragEvtListenerBinded?(r.addEventListener("dragstart",s.handlers.dragstart),r.addEventListener("dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!0):(r.removeEventListener("dragstart",s.handlers.dragstart),r.removeEventListener("dragmove",s.handlers.dragmove),s._dragEvtListenerBinded=!1)}getLegendState(){return this._legendState}hasState(e){var t,a,i=this.getLegendState();for(t=0,a=i.length;t<a;t++)if(i[t]===e)return!0;return!1}setLegendState(e,t){this.hasState(e)||(t?this._legendState.push(e):this._legendState.unshift(e)),this.asyncDraw()}removeLegendState(e){var t,a,i=1;if(e)for(t=0,a=this._legendState.length;t<a&&i;t++)e===this._legendState[t]&&(this._legendState.splice(t,1),i=0);else this._legendState.length=0;this.asyncDraw()}setStateCosmetics(e,t){this._stateCosmetics[e]=t}removeStateCosmetics(e){delete this._stateCosmetics[e]}getStateCosmetics(e){return this._stateCosmetics[e]}hide(){var e=this.getFromEnv("chart").getChildContainer("legendGroup");e&&e.hide()}},Dt=function(e){let t;Object(n.M)(e,_t,"legend"),(t=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",t),e.config.showLegend||t.remove()};var It=class extends st{constructor(){super(),this.registerFactory("dataset",ct,["vCanvas"]),this.registerFactory("legend",Dt)}static getName(){return"MSCartesian"}getName(){return"MSCartesian"}getType(){return"chartAPI"}_createLayers(){super._createLayers();let e=this.getFromEnv("animationManager");this.getChildContainer("legendGroup")||this.addChildContainer("legendGroup",e.setAnimation({el:"group",attr:{name:"legend"},component:this,container:this.getContainer("parentgroup"),label:"group"}))}_manageLegendSpace(){(function(){var e,t,a,i,o=this,r=o.config,l=o.getChildren("legend")&&o.getChildren("legend")[0],s=o.getChildren("gLegend")&&o.getChildren("gLegend")[0],c=o.getFromEnv("dataSource").colorrange,d=r.hasLegend,h={},g=o.hasGradientLegend,b=o.getFromEnv("dataSource").chart,m=Object(n.Bb)(b.mapbycategory,0);g&&c&&Object(n.Bb)(c.gradient)&&!m?(e=s.conf,g=!0,r.gLegendEnabled=!0,i=.5,t=e.legendPosition):(e=l&&l.config,g=!1,r.gLegendEnabled=!1,i=(t=e&&e.legendPos)===n.u?.8:.4),a=t===n.u?r.availableWidth*i:r.availableHeight*i,g?h=o.manageGradientLegendSpace(a):!1!==d&&l&&!l.getState("removed")&&(h=l&&l._manageLegendPosition(a)),o._allocateSpace({bottom:h&&h.bottom||0,right:h&&h.right||0})}).call(this)}manageGradientLegendSpace(e){return function(e){var t,a,i,o,r=this,l=r.config,s=r.getFromEnv("gLegend"),c=s&&s.conf;return l.gLegendPadding=Object(n.Bb)(r.getFromEnv("chart-attrib").legendpadding,10),i=Math.min(l.gLegendPadding,.5*e),c?(t=c.legendPosition,o=s.getLogicalSpace(e),a=t===n.q?{bottom:(o.height||0)+i}:{right:(o.width||0)+i}):a={bottom:0,right:0},a}.call(this,e)}},Mt=a(25),Vt=a(2),zt=a(23),Rt=a(7),Nt=[{initialAttr:function(){return{opacity:0}},finalAttr:function(){return{opacity:1}}}],Gt={"initial.dataset.entities":function(){return{"path.appearing":()=>(Nt[0].slot="plot",Nt),"path.updating":e=>[{finalAttr:function(){return e.finalAttr}}],"labelConnectors.appearing":()=>(Nt[0].slot="final",Nt),"labelConnectors.updating":null,"entityLabel.appearing":()=>[{initialAttr:{opacity:0},finalAttr:{opacity:1},slot:"final"}],"*":null}},"initial.dataset.markers":function(){return{markers:null,"markerItem.appearing":()=>(Nt[0].slot="final",Nt),"markerItem.updating":e=>[{finalAttr:function(){return e.finalAttr}}]}},"initial.group.mapGroup":function(){return{"group.appearing":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"group.updating":e=>[{initialAttr:function(){return Object.assign({opacity:0},e.attr)},finalAttr:function(){return e.attr},slot:"plot"}],"*":null}}};let Wt,Ht=Object(x.b)("redraphael","plugin"),Yt=window.navigator.userAgent,Xt=/msie/i.test(Yt)&&!window.opera,Zt=",",Kt="",Ut="top",Jt="bottom",qt="right",$t="left",Qt="middle",ea="center",ta="crisp",aa=window.Math,ia=aa.min,na=aa.max,oa=/stroke/gi,ra=/AppleWebKit/.test(Yt),la=aa.ceil,sa=function(e,t){let a=t?Object(n.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return a.toString=n.Mb,a},ca=function(e,t){let a,i={};if(t=t||1,!e||"object"!=typeof e)return i;for(a in e)oa.test(a)||("stroke-width"===a?(i[a]=+e[a]/t,ra&&(i[a]=i[a]&&la(i[a])||0)):i[a]=e[a]);return i},da={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*ia(t,e-t)}},ha={top:function(){return arguments[1]},middle:function(e,t){return 2*ia(t,e-t)},bottom:function(e,t){return e-t}},ga=function(e){let t,a=e&&e.length||0,i={};for(;a--;)(t=e[a]).id!==Wt&&(i[t.id.toLowerCase()]=t);return i};Object(x.a)({name:"mapsAnimation",type:"animationRule",extension:Gt}),function(e){var t,a,i,n=window.parseFloat,o=e._createNode,r=e._setFillAndStroke,l=e.el.constructor,s={Q:"L",Z:"X",q:"l",z:"x",",":" "},c=/,?([achlmqrstvxz]),?/gi,d=function(){return this.join(",").replace(c,t)};e.svg?(t="$1",a=function(){var a=e.is(arguments[0],"array")?arguments[0]:Array.prototype.slice.call(arguments);a?"string"==typeof a?a=a.replace(c,t):a.toString=d:a="M0,0",this.node.setAttribute("d",a.toString())},e._engine.litepath=function(t,a,i,n,s){var c,d=o("path");return(n||a).canvas.appendChild(d),(c=new l(d,a,n)).type="litepath",c.id=d.raphaelid=e._oid++,d.raphael=!0,r(c,s||{fill:"none",stroke:"#000"}),c},e._getPath.litepath=function(t){return e.parsePathString(t.node.getAttribute("d"))}):e.vml&&(t=function(e,t){return s[t]||t},i=function(){var e=this;return e._transform.apply(e,arguments),e._.bcoord&&(e.node.coordsize=e._.bcoord),e},a=function(e){return e?"string"==typeof e?e=e.replace(c,t):e.toString=d:e="M0,0",this.node.path=e,this},e._engine.litepath=function(t,a,r,s,c){var d,h=o("shape"),g=h.style,b=new l(h,a,s);return g.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;",r=n(r),isNaN(r)?h.coordsize="21600 21600":(b._.bzoom=r,g.width="1px",g.height="1px",h.coordsize=b._.bcoord=r+" "+r),h.coordorigin=a.coordorigin,b.type="litepath",b.id=h.raphaelid=e._oid++,h.raphael=!0,b._transform=b.transform,b.transform=i,e._setFillAndStroke(b,c||{fill:"none",stroke:"#000"}),(s||a).canvas.appendChild(h),(d=o("skew")).on=!0,h.appendChild(d),b.skew=d,b},e._getPath.litepath=function(t){return e.parsePathString(t.node.path||"")}),e.fn.litepath=function(t,i,n){var o,r,s;return"object"==typeof t&&t.constructor!==l&&(o=t,r=(t=t.litepath).zoom,n=t.group),i&&i.constructor===l?(n=i,r=void 0):r=i,t&&t.constructor===l&&(n=t,t=""),(s=e._engine.litepath(t,this,r,n,o)).ca.litepath=a,t&&s.attr("litepath",e.is(t,"array")?[t]:t),this.__set__&&this.__set__.push(s),this._elementsById[s.id]=s}}(Ht);class ba extends r.a{constructor(){super(),this.components={}}getName(){return"entities"}getType(){return"dataset"}configureAttributes(e){if(!e)return;this.JSONData={data:e};let t,a,i,o,r,l,s,c,d=this,h=d.getFromEnv("chart").jsonData,g=d.config,b=h.map||h.chart,m=[],p=d.getFromEnv("colorManager"),u=h.entitydef||[];for(r in!g.attachEvent&&p&&(d.addExtEventListener("legendUpdate",function(){if("legend"===(c=arguments[1]).component)d.legendInteractivity(c.legendItem,c.colorObj);else for(m=c.maxMinArray,l=m.length,s=0;s<l;s++)d.updateEntityColors(m[s].min,m[s].max)},p),g.attachEvent=!0),t=h.data&&h.data[0]&&h.data[0].data?d.JSONData=h.data[0].data||[]:d.JSONData=h.data||[],g.useSNameAsId=Object(n.Bb)(b.usesnameasid,0),this._redefineEntities(u),a=d.components.data,g.showTooltip=Object(n.Bb)(b.showtooltip,1),g.showHoverEffect=Object(n.Bb)(b.showhovereffect,0),t=ga(t),d.calculateDataLimits(),h.colorrange||d.detachChild(d.getChildren("colorRange")&&d.getChildren("colorRange")[0].getId()),a)i=t[r],o=a[r],i?this._configureEntity(r,o,Object(n.mb)(ba._sanitizeEntityOptions(Object(n.T)({},i)),o.config)):this._configureEntity(r,o,o.config)}updateEntityColors(e,t){let a,i,n,o,r,l,s=this.components.data,c=this.getFromEnv("chart"),d={"fill-opacity":0};for(o in s)n=(i=(a=s[o]).config).cleanValue,l={"fill-opacity":(r=i.alphaArr||[])[0]/100||1},n<e||n>t?(ba.setCustomAttrs(a,d,c),a.hidden=!0):(a.hidden=!1,ba.setCustomAttrs(a,l,c))}legendInteractivity(e,t){let a,i,n,o,r,l,s=this,c=s.getFromEnv("chart"),d=s.components.data,h=e.config,g=e.hasState("hidden"),b=s.getFromEnv("colorManager"),m={},p={"fill-opacity":0};for(a in c.getFromEnv("animationManager").setAnimationState("legendInteraction"),d)d.hasOwnProperty(a)&&(n=(h=(i=d[a]).config).cleanValue,l=b.getColorObj(n),o=h.visibleEntityAttr,m["fill-opacity"]=o["fill-opacity"],r=g?m:p,t.code===(!l.outOfRange&&l.code)&&(i.hidden=!g,ba.setCustomAttrs(i,r,c),g?e&&e.removeLegendState("hidden"):e.setLegendState("hidden")))}static setCustomAttrs(e,t){let a,i;e&&(i=(a=e.graphics).outlines).attr(t)}calculateDataLimits(){let e,t,a,i,n=this.getFromEnv("chart"),o=this.config,r=n.jsonData.data||[],l=this.getFromEnv("number-formatter"),s=1/0,c=-1/0;for(i=0,a=r.length;i<a;i++)t=r[i].value,e=l.getCleanValue(t),s=ia(s,e),c=na(c,e);o.max=c,o.min=s}_configureEntity(e,t,a){let i,o,r,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j,S=this,A=S.getFromEnv("chart"),F=S.config,B=this.getFromEnv("number-formatter"),T=A.config.entityOpts,E=t.config,P=t.labelConfig,_=a.value,D=E.cleanValue=B.getCleanValue(_),I=E.formattedValue=D===Wt?Wt:B.dataLabels(D),M=Object(n.Bb)(a.showtooltip,T.showTooltip),V=this._getDefaultTooltip(t,a,S),z={formattedValue:I,sName:a.shortLabel,lName:a.label},R=T.dataLabels.style,N=E.toolText=M?Object(n.xb)(Object(n.zb)(Object(n.wb)(Object(n.zb)(a.tooltext,T.tooltext,V),[1,2,7,38,39],z,a))):Kt,G=E.borderColor=Object(n.zb)(a.bordercolor,T.borderColor),W=E.borderAlpha=Object(n.zb)(a.borderalpha,T.borderAlpha),H=E.borderThickness=Object(n.Bb)(a.borderthickness,T.borderThickness),Y=T.hoverOnNull,X=E.useHoverColor=Object(n.Bb)(a.showhovereffect,a.usehovercolor,Y?T.showHoverEffect:isNaN(_)?0:T.showHoverEffect),Z=E.labelAlignment,K=S.getFromEnv("colorManager");if(t.hidden=!1,E.showLabel=Object(n.Bb)(a.showlabel,T.showLabels),E.labelPadding=Object(n.Bb)(a.labelpadding,T.labelPadding),E.fontFamily=Object(n.zb)(a.font,R.fontFamily),E.fontSize=Object(n.Bb)(parseInt(a.fontsize,10),parseInt(R.fontSize,10)),E.fontBold=Object(n.Bb)(a.fontbold,0),E.fontColor=Object(n.zb)(a.fontcolor,R.color),E.connectorColor=Object(n.zb)(a.labelconnectorcolor,T.connectorColor),E.connectorAlpha=Object(n.zb)(a.labelconnectoralpha,T.connectorAlpha),E.hoverBorderThickness=Object(n.Bb)(a.borderhoverthickness,a.hoverborderthickness,T.hoverBorderThickness),E.hoverBorderColor=Object(n.zb)(a.borderhovercolor,a.hoverbordercolor,T.hoverBorderColor,E.borderColor),E.hoverBorderAlpha=Object(n.zb)(a.borderhoveralpha,a.hoverborderalpha,T.hoverBorderAlpha,E.borderAlpha),E.connectorThickness=Object(n.Bb)(a.labelconnectorthickness,T.connectorThickness),E.origConnectorThickness=E.connectorThickness,E.borderThickness=H,E.link=a.link,E.isVisible=!0,E.id=e,E.originalId=a.origId,null!==D&&((i=K&&K.getColor(D))&&!i.outOfRange&&(y=i.code,i.oriAlpha!==Wt&&(C=i.oriAlpha+""))),Object(n.zb)(a.color,a.alpha,a.angle,a.ratio)===Wt?(v=sa({color:Object(n.zb)(y,T.fillColor),alpha:Object(n.zb)(C,T.fillAlpha),angle:Object(n.zb)(T.fillAngle),ratio:Object(n.zb)(T.fillRatio)}),f=sa({color:Object(n.zb)(T.nullEntityColor),alpha:Object(n.zb)(T.nullEntityAlpha),angle:Object(n.zb)(T.nullEntityAngle),ratio:Object(n.zb)(T.nullEntityRatio)}),c=(b=null===D?f:v).FCcolor.color,d=b.FCcolor.alpha,h=b.FCcolor.angle,g=b.FCcolor.ratio):(c=Object(n.zb)(a.color,y,T.fillColor),d=Object(n.zb)(a.alpha,C,T.fillAlpha),h=Object(n.zb)(a.angle,T.fillAngle),g=Object(n.zb)(a.ratio,T.fillRatio),b=sa({color:c,alpha:d,angle:h,ratio:g})),N===Kt&&(F.showTooltip=0),E.visibleEntityAttr={stroke:Object(l.c)(G,W),fill:(E.fillColor=b).toString(),"fill-opacity":d/100},j=d.split(Zt),E.alphaArr=j,X&&(Object(n.zb)(a.fillhovercolor,a.fillhoveralpha,a.fillhoverangle,a.fillhoverratio,a.hoverfillcolor,a.hoverfillalpha,a.hoverfillratio,a.hoverfillangle)===Wt?(!T.hoverColorObject&&(T.hoverColorObject=sa({color:T.hoverFillColor,alpha:T.hoverFillAlpha,angle:T.hoverFillAngle,ratio:T.hoverFillRatio})),x=T.hoverColorObject):(c=Object(n.zb)(a.fillhovercolor,a.hoverfillcolor,T.hoverFillColor),d=Object(n.zb)(a.fillhoveralpha,a.hoverfillalpha,T.hoverFillAlpha),h=Object(n.zb)(a.fillhoverangle,a.hoverfillangle,T.hoverFillAngle),g=Object(n.zb)(a.fillhoverratio,a.hoverfillratio,T.hoverFillRatio),x=sa({color:c,alpha:d,angle:h,ratio:g})),E.hoverColor=x),P||(P=t.labelConfig={}),m=E.fontColor,p=E.fontFamily,u=E.fontBold,N=E.toolText,o=E.link,Z?(r=Z[0],s=Z[1]):(r=ea,s=Qt),P.align=r,P.vAlign=s,P.bgColor=Kt,P.borderColor=Kt,P.fontColor=m,P.fontFamily=p,P.fontBold=u,P.toolText=N,P.link=o,"object"==typeof E.options)for(O=E.entityLabels=E.entityLabels||[],k=(w=E.labels||[]).length;k--;)O[k]||(O[k]={config:{}}),P=O[k].config,(Z=w[k].labelAlignment)?(r=Z[0],s=Z[1]):(r=ea,s=Qt),P.align=r,P.vAlign=s,P.displayValue=S.getDisplayValue(t,w[k],E.options.isDataEnabled,!k,a),P.bgColor=Kt,P.borderColor=Kt,P.toolText=N,P.align=r,P.vAlign=s,P.bgColor=Kt,P.borderColor=Kt,P.fontColor=m,P.fontFamily=p,P.fontBold=u,P.toolText=N;else L={shortText:E.shortLabel,text:E.label},P.displayValue=S.getDisplayValue(t,L,!0,!0,a)}getDisplayValue(e,t,a,i,o){let r,l=this.getFromEnv("chart").config.entityOpts,s=e.config,c=s.cleanValue,d=s.formattedValue,h=l.labelSepChar;return a?i&&void 0!==o.displayvalue?r=o.displayvalue:(r=Object(n.zb)(l.includeNameInLabels?l.useShortName?t.shortText:t.text:""),l.includeValueInLabels&&null!==c&&(r=r===Wt?d:r+h+d)):r=s.label,r}static _sanitizeEntityOptions(e){return delete e.outlines,delete e.label,delete e.shortlabel,delete e.labelposition,delete e.labelalignment,delete e.labelconnectors,e}_redefineEntities(e){let t,a,i,o,r,l,s,c,d,h,g,b,m=this,p=m.config,u={},f={},v=m.getFromEnv("chart").config.entities,x=p.useSNameAsId,y=0;for(t=e.length;t--;)if(i=(a=e[t]).internalid,o=a.newid?a.newid:i,r=a.sname,l=a.lname,b=v[i],i=Object(n.Ob)(i),o=(o=Object(n.Ob)(o))&&o.toLowerCase(),b){for(g in u[o]=c={origId:i},f[i]=!0,b)c[g]=b[g];c.shortLabel=r||b.shortLabel,c.label=l||b.label,c.showhovereffect=a.showhovereffect,c.fillhovercolor=a.fillhovercolor,c.fillhoveralpha=a.fillhoveralpha,c.fillhoverangle=a.fillhoverangle,c.fillhoverratio=a.fillhoverratio,c.borderhoverthickness=a.borderhoverthickness}for(s in(h=m.components.data)||(h=m.components.data={}),u)h[s=s.toLowerCase()]||(h[s]={config:{}}),h[s].config=u[s],y+=1;for(s in d=h,v)if(c=v[s],!f[s=Object(n.Ob)(s)]){for(g in x?(!(b=d[c.shortLabel.toLowerCase()])&&(b=d[c.shortLabel.toLowerCase()]={}),b.config={},b.origId=c.shortLabel):(!(b=d[s.toLowerCase()])&&(b=d[s.toLowerCase()]={}),b.config={},b.config.origId=s),c)b.config[g]=c[g];y+=1}p.entityCount=y}draw(){let e,t=this.config,a=this.getFromEnv("chart"),i=n.ib?200:10;this.config.ready=!1,t.BATCH_SIZE=i,t.labelBatchSize=n.ib?200:20,(e=this._batchRender())(0),a.config.entityFlag=!0,a.checkComplete()}_batchRender(){let e,t,a,i,n,o=this,r=o.config,l=o.getFromEnv("chart").config.entities.firstEntity,s=o.components.data,c=r.BATCH_SIZE,d=r.entityKeys=l?o._getKeys(l,s):Object.keys(s),h=r.entityLength=d.length,g=function(r){for(e=r,a=0;d[e]!==Wt;)if(t=s[d[e]],n=o.drawEntity(t,c),a+=n,t.config.drawn&&((i=e===h-1?t:s[d[e-1]])&&(i.config.drawn=!1,i.config.outlineStartIndex=Wt),e++),a>=c){o.addJob("entityDraw",g.bind(this,e),Ct.b.entitydraw);break}e===h&&(o._addEventListenersToEntities(0),o.initComplete())};return g}_addEventListenersToEntities(e){let t,a,i,n,o=this,r=o.components.data,l=o.config,s=l.BATCH_SIZE,c=l.entityKeys,d=l.entityLength,h=0;for(t=e;t<d;t++)if((i=(n=(a=r[c[t]]).config).options)&&!1===i.isDataEnabled||o.addMouseGestures(a),++h===s){o.addJob("_addEventListenersToEntities",o._addEventListenersToEntities.bind(this,t),Ct.b.entitydraw);break}}static _getKeys(e,t){let a=[e],i=e;for(;t[i];)i=t[i].nextId,a.push(i);return a}_getDefaultTooltip(e,t){let a,i,n=e.config.cleanValue,o=e.config.formattedValue,r=this.getFromEnv("chart").config.entityOpts;if("object"==typeof e.config.options){if(!(i=t.labels&&t.labels[0]))return Wt;a=(r.useSNameInTooltip?i.shortText:i.text)+(null===n?Kt:r.tooltipSepChar+o)}else a=(r.useSNameInTooltip?t.shortLabel:t.label)+(null===n?Kt:r.tooltipSepChar+o);return a}drawEntity(e,t){let a,i,o,r,l,s,c,d,h,g=this,b=g.getFromEnv("chart"),m=b.getFromEnv("animationManager"),p=e.config,u=n.ib||!Xt?"litepath":"path",f=b.config.entityOpts,v=p.outlines,x=g.getFromEnv("toolTipController"),y=this.getLinkedParent().getChildContainer("plot"),C=this.getLinkedParent().getChildContainer("plotShadow"),O=p.toolText,L=f.shadow,w=[],k={};if(g._configureEntityDrawingParams(e),o=(p=e.config).visibleEntityAttr,h=p.shadowOptions,a=p.outlineStartIndex===Wt?v.length:p.outlineStartIndex,e.graphics||(e.graphics={}),c=0,w=p.outlinePath||(p.outlinePath=[]),d=p.customStrokeWidthModifier,"object"==typeof p.options){for(;a--;)if(w=v[a].outline,r=!0===p.options.isDataEnabled?o:Object(n.T)(Object(n.T)({},o),ca(v[a].style,d)),(l=e.graphics.outlines)||(l=e.graphics.outlines=[]),l[a]||(l[a]={}),s=l[a].outline,r[u]=w,(s=l[a].outline=m.setAnimation({el:u,container:y,attr:r,component:g,label:"path"})).shadow(!!L&&h,C),x.enableToolTip(s,O),c++,p.outlineStartIndex=a,c===t)return c;return p.drawn=!0,c}for(;a--;)if(w=(i=v[a]).concat(w),c++,p.outlineStartIndex=a,c===t)return p.outlinePath=w,c;return e.graphics.outlines||(o[u]=w),Object.assign(k,o,e.hidden&&{"fill-opacity":0}||{}),e.graphics.outlines=m.setAnimation({el:e.graphics.outlines||u,container:y,attr:k,component:g,label:"path"}),p.drawn=!0,p.outlineStartIndex=0,p.outlinePath=[],e.graphics.outlines.shadow(!!L&&h,C),x.enableToolTip(e.graphics.outlines,O),c}_configureEntityDrawingParams(e){let t,a=this.getFromEnv("chart"),i=e.config,o=a.config.entityOpts,r=a.config.scalingParams,l=!Xt||n.ib,s=r.scaleFactor,c=r.strokeWidth,d=(l?a.baseScaleFactor:1)*c,h=1===o.scaleBorder,g=i.borderThickness,b=i.alphaArr,m=i.origConnectorThickness,p=i.hoverBorderThickness,u=i.visibleEntityAttr,f=u["fill-opacity"];i.shadowOptions={scalefactor:[s,s*a.config.baseScaleFactor],opacity:na.apply(aa,b)/100,useFilter:0},i.fillOpacity=e.hidden?0:f,l?(g=i.entityBorderThickness=h?g*d:g/s,m/=s,t=h?s:r.sFactor,p&&(p=i.hoverBorderThickness=h?p*d:p/s)):(g=h?g*c:g,t=h?r.scaleFactor:a.baseScaleFactor),i.entityBorderThickness=g,i.connectorThickness=m,i.customStrokeWidthModifier=t,u["stroke-width"]=g,u.transform=n.ib||!Xt?"":r.transformStr}drawLabels(e){let t,a,i,n,o=this,r=e,l=o.getFromEnv("chart"),s=o.config,c=s.labelBatchSize,d=s.entityLength,h=[],g=0,b=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[g],m=0,p=0,u=l.getFromEnv("toolTipController"),f=l.config.annotationConfig;for(t in b||(n=new zt.a,l.attachChild(n,"mapLabelAnnotations"),b=l.getChildren("mapLabelAnnotations")[g]),b.clear(),b._renderer&&(b._renderer=null),f.showbelow=0,r){if(o.drawLabel(r[t],h),++m===c){for(b.annotation.injectDependency("paper",l.getFromEnv("paper")),b.annotation.injectDependency("toolTipController",u),a=0;a<h.length;a++)h[a].animationLabel="entityLabel";for(i=b.addGroup(Object.assign(f,{id:"entityLabels"+g,items:h,animationLabel:"entityLabelGroup"}),o),l.config.labelsOnTop&&i.store.element.toFront(),a=0;a<i.items.length;a++)i.items[a].addEventListener("mouseover",h[a].onmouseover),i.items[a].addEventListener("mouseout",h[a].onmouseout),i.items[a].addEventListener("click",h[a].onclick);g++,(b=l.getChildren("mapLabelAnnotations")&&l.getChildren("mapLabelAnnotations")[g])||(n=new zt.a,l.attachChild(n,"mapLabelAnnotations"),b=l.getChildren("mapLabelAnnotations")[g]),b.clear(),b._renderer&&(b._renderer=null),m=0,h=[]}else if(p==d-1){for(b.annotation.injectDependency("paper",l.getFromEnv("paper")),b.annotation.injectDependency("toolTipController",u),a=0;a<h.length;a++)h[a].animationLabel="entityLabel";for(i=b.addGroup(Object.assign(f,{id:"entityLabels"+g,items:h,animationLabel:"entityLabelGroup"}),o),l.config.labelsOnTop&&i.store.element.toFront(),a=0;a<i.items.length;a++)i.items[a].addEventListener("mouseover",h[a].onmouseover),i.items[a].addEventListener("mouseout",h[a].onmouseout),i.items[a].addEventListener("click",h[a].onclick)}p++}o.drawLabelConnFn(0)}drawLabelConnFn(e){let t,a,i,n,o,r=this,l=r.config,s=r.components.data,c=l.BATCH_SIZE,d=l.entityKeys,h=d.length,g=0;for(a=e;a<h;a++){if("object"==typeof(n=(o=s[d[a]]).config).options)for(t=(i=n.labels)&&i.length||0;t--;)i[t].labelConnectors&&(r.drawLabelConnectors(o,i[t].labelConnectors,r),g++);else n.labelConnectors&&(r.drawLabelConnectors(o,n.labelConnectors,r),g++);if(g===c){r.addJob("drawLabelConnectors",r.drawLabelConnFn.bind(this,a),Ct.b.entitydraw);break}}}_getLabelObject(e,t,a){let i,n,o,r,l,s,c,d,h,g,b,m,p=this,u=p.getFromEnv("chart"),f=e.config,v=u.config.scalingParams,x=e.graphics&&e.graphics.outlines,y=f.fontSize,C=f.labelPadding,O=f.labels||[],L=f.entityLabels||[];return t===Wt?(i=e.labelConfig,n=f.labelPosition,o=f.labelAlignment):(b=O[t],r=(i=(m=L[t]).config).style=b.style,n=b.labelPosition,o=b.labelAlignment),n?(l=n[0],s=n[1]):(l=(c=x.getBBox()).x+c.width/2,s=c.y+c.height/2),o?(d=o[0],h=o[1],d===qt?l-=C:d===$t&&(l+=C),h===Ut?s-=C:h===Jt&&(s+=C)):(d=ea,h=Qt),g=parseFloat(y)/v.sFactor,!a&&r&&(r.color&&(i.fontColor=r.color),r["font-size"]&&(g=parseFloat(r["font-size"])/v.sFactor),r["font-family"]&&(i.fontFamily=r["font-family"]),r["font-weight"]!==Wt&&(i.fontBold="bold"===r["font-weight"])),i.x=l.toString(),i.y=s.toString(),i.wrap=1,i.type="text",i.fontSize=g,{x:l.toString(),y:s.toString(),wrapwidth:da[d](void 0,l+void 0)-C,wrapheight:ha[h](void 0,s+void 0)-C,wrap:1,type:"text",align:i.align,valign:i.vAlign,text:i.displayValue,tooltext:i.toolText,css:i.link!==Wt&&{cursor:"pointer",_cursor:"hand"},bgcolor:i.bgColor,bordercolor:i.borderColor,fillcolor:i.fontColor,fontsize:i.fontSize,font:i.fontFamily,bold:i.fontBold,onclick:function(t){let a,i,n=e.graphics.outlines;if(n instanceof Array)for(a=0,i=n.length;a<i;a++)p.entityClick(n[a].outline,t);else p.entityClick(n,t)},onmouseover:function(t){let a,i,n=e.graphics.outlines;if(n instanceof Array)for(a=0,i=n.length;a<i;a++)p.entityRollOver(n[a].outline,t);else p.entityRollOver(n,t)},onmouseout:function(t){let a,i,n=e.graphics.outlines;if(n instanceof Array)for(a=0,i=n.length;a<i;a++)p.entityRollOut(n[a].outline,t);else p.entityRollOut(n,t)},ontouchstart:function(t){let a,i,n=e.graphics.outlines;if(n instanceof Array)for(a=0,i=n.length;a<i;a++)p.entityRollOver(n[a].outline,t);else p.entityRollOver(n,t);p.entityRollOver(n,t)}}}drawLabel(e,t){let a,i,n,o=this,r=e.config;if(r.showLabel)if("object"==typeof r.options)for(i=(n=r.labels)&&n.length||0,a=r.options.isDataEnabled;i--;)t.push(o._getLabelObject(e,i,a,!i));else t.push(o._getLabelObject(e,Wt,!0,!0))}drawLabelConnectors(e,t,a){let i,o,r=e.config,s=this,c=s.getFromEnv("chart"),d=c.getFromEnv("animationManager"),h=c.config.scalingParams,g=a.getLinkedParent().getChildContainer("plot"),b=t&&t.length||0,m=r.showLabel;for(;b--;)o=t[b],i=e.graphics.connectorElem,m?e.graphics.connectorElem=i=d.setAnimation({el:e.graphics.connectorElem||"path",attr:{path:o,opacity:1,transform:n.ib||!Xt?"":h.transformStr,stroke:Object(l.c)(r.connectorColor,r.connectorAlpha),"shape-rendering":ta,"stroke-width":r.connectorThickness},container:g,component:s,label:"labelConnectors"}):i&&i.hide()}entityClick(e,t){let a=e.node.__entity,i=this.getFromEnv("chart"),n=i.config.scalingParams,o=a.graphics.outlines.getBBox(),r=i.getFromEnv("linkClickFN"),l=a.config,s=l.link;o.width*=n.scaleFactor,o.height*=n.scaleFactor,o.x=o.x*n.scaleFactor+n.translateX,o.y=o.y*n.scaleFactor+n.translateY,o.x2=o.x+o.width,o.y2=o.y+o.height,i.fireChartInstanceEvent("entityclick",l.eventArgs,t),s!==Wt&&r.call({link:s,entity:a,entityBox:o},!0)}entityRollOver(e,t){let a=e.node.__entity,i=a.config,n=this.getFromEnv("chart"),o=n.getFromEnv("animationManager"),r=i.hoverAttr;n.plotEventHandler(e,t,"entityRollOver"),e.data("hovered")?clearTimeout(a.config.timer):i.useHoverColor&&i.isVisible&&!a.hidden&&r&&(n.config.hoverEntity=e,o.setAnimation({el:e,attr:r,component:this,state:"updating",label:"path"}),e.data("hovered",!0))}entityRollOut(e,t){let a,i=e.node.__entity,n=this,o=n.getFromEnv("chart"),r=o.getFromEnv("animationManager"),l=i.config.revertAttr;o.plotEventHandler(e,t,"entityRollOut"),i.config.timer=setTimeout(function(){!0!==(a=i.hidden)&&l&&(r.setAnimation({el:e,attr:l,component:n,state:"updating",label:"path"}),e.data("hovered",!1))},100)}addMouseGestures(e){let t,a,i,o,r,s=e.config,c=s.originalId,d=this,h=e.graphics,g=s.useHoverColor,b=s.hoverBorderThickness,m=s.hoverBorderColor,p=s.hoverBorderAlpha,u=s.entityBorderThickness,f=s.borderColor,v=s.borderAlpha,x=s.link,y=s.visibleEntityAttr,C=function(t){x!==Wt&&t.css({cursor:"pointer",_cursor:"hand"}),t.data("eventArgs",s.eventArgs),t.data("groupId","groupId"+c),t.node.__entity=e,e._listenersBinded||t.click(d.entityClick.bind(d,t)).hover(d.entityRollOver.bind(d,t),d.entityRollOut.bind(d,t))};for(t in s.eventArgs={value:s.cleanValue,label:s.label,shortLabel:s.shortLabel,originalId:s.origId,id:s.id||s.origId},s.legacyEventArgs={value:s.value,lName:s.label,sName:s.shortLabel,id:s.originalId||s.id},g&&(s.hoverAttr={fill:Object(n.Mb)(s.hoverColor)},s.revertAttr={fill:Object(n.Mb)(s.fillColor),stroke:Object(n.Mb)(s.borderColor,s.borderAlpha)},s.revertAttr["fill-opacity"]=y["fill-opacity"],b!==u&&(s.hoverAttr["stroke-width"]=Object(n.Bb)(b,u),s.revertAttr["stroke-width"]=u),(m!==f||p!==v)&&(s.hoverAttr.stroke=Object(l.c)(m,p),s.revertAttr.stroke=Object(l.c)(f,v))),h)if(h.hasOwnProperty(t))if(h[t]instanceof Array){for(a=0,o=(r=h[t]).length;a<o;a++)C(i=r[a].outline);e._listenersBinded=!0}else C(i=h[t]),e._listenersBinded=!0}getDataLimits(){let e=this.config;return{max:e.max,min:e.min}}initComplete(){let e=this.getFromEnv("chart"),t=this.components.data;this.drawLabels(t),e.config.entitiesReady=!0,e.checkComplete()}}var ma,pa=ba,ua=function(e,t,a,i,n){var o=Math.pow;return o(a-e,2)+o(i-t,2)<=o(n,2)},fa=Math.PI,va=Math.cos,xa=Math.sin,ya=Math.max,Ca=Math.min,Oa=fa/180,La=function(e,t,a,i,n,o){var r,l,s;return r=(i-t)*(n-a),l=(a-e)*(o-i),isNaN(r)&&(r=0),isNaN(l)&&(l=0),0===(s=r-l)?0:0<s?1:2},wa=function(e,t,a,i,n,o){return!!(a<=ya(e,n)&&a>=Ca(e,n)&&i<=ya(t,o)&&i>=Ca(t,o))},ka=function(e,t,a,i,n,o,r,l){var s=La(e,t,a,i,n,o),c=La(e,t,a,i,r,l),d=La(n,o,r,l,e,t),h=La(n,o,r,l,a,i);return!!(s!==c&&d!==h||0===s&&wa(e,t,n,o,a,i)||0===c&&wa(e,t,r,l,a,i)||0===d&&wa(n,o,e,t,r,l)||0===h&&wa(n,o,a,i,r,l))},ja=function(e,t,a,i,n,o,r){var l,s,c,d,h,g,b,m=0,p=!1;if(ua(e,t,a,i,n)&&3<=o){for(s=r===ma?.5*fa:function(e){return e%360*Oa}(r),b=2*fa/o,c=a+n*va(-s),g=i+n*xa(-s),l=0;l<o;l++){if(d=a+n*va(-(s+=b)),h=i+n*xa(-s),ka(c,g,d,h,e,t,1/0,t)){if(0===La(c,g,e,t,d,h))return wa(c,g,e,t,d,h);m++}c=d,g=h}p=0!=m%2}return p},Sa=(e,t)=>!e||e&&t&&t.i>e.i?t:e;class Aa{constructor(e){this.configure(e)}configure(e){var t=this;t.validatorFn=e?t.shapeValidator():t.defaultValidator()}defaultValidator(){var e=Math.pow,t=this;return function(a){var i=t.mousePoint;return!!(a&&1>=e((a.x-i.x)/t.xLimit,2)+e((a.y-i.y)/t.yLimit,2))}}shapeValidator(){var e=this;return function(t){var a,i,n,o,r,l,s,c,d,h=e.mousePoint,g=t&&t.shapeInfo,b=!1,m=h.x,p=h.y;return"circle"===(a=g&&g.type)?(n=g.radius,b=ua(m,p,t.x,t.y,n)):"arc"===a?(i=g.innerradius,n=g.radius,b=!ua(m,p,t.x,t.y,i)&&ua(m,p,t.x,t.y,n)):"polygon"===a?(n=g.radius,r=g.startAngle,o=g.sides,b=ja(m,p,t.x,t.y,n,o,r)):"rect"===a||"rectangle"===a?(l=t.x,c=t.y,s=l+(g.width||0),d=c+(g.height||0),b=m>=l&&m<=s&&p>=c&&p<=d):"default"===a&&(b=!1),b}}buildKdTree(e){return this.kdTree=function(e){function t(e,t,a){var i=e[t];e[t]=e[a],e[a]=i}var a,i,n,o=e&&e[0]&&e[0].r||5,r=Math.max,l=Math.floor,s=Math.sqrt,c=Math.min,d=Math.log,h=Math.exp,g=Math.pow;for(i=function(e,a,n,o){for(var g,b,m,p,u,f,v,x,y,C;o>n;){for(600<o-n&&(b=a-n+1,m=d(g=o-n+1),p=.5*h(2*m/3),u=.5*s(m*p*(g-p)/g)*(0>b-g/2?-1:1),f=r(n,l(a-b*p/g+u)),v=c(o,l(a+(g-b)*p/g+u)),i(e,a,f,v)),x=e[a],y=n,C=o,t(e,n,a),e[o].x>x.x&&t(e,n,o);y<C;){for(t(e,y,C),y++,C--;e[y].x<x.x;)y++;for(;e[C].x>x.x;)C--}e[n].x===x.x?t(e,n,C):t(e,++C,o),C<=a&&(n=C+1),a<=C&&(o=C-1)}},n=function(e,a,i,o){for(var g,b,m,p,u,f,v,x,y,C;o>i;){for(600<o-i&&(b=a-i+1,m=d(g=o-i+1),p=.5*h(2*m/3),u=.5*s(m*p*(g-p)/g)*(0>b-g/2?-1:1),f=r(i,l(a-b*p/g+u)),v=c(o,l(a+(g-b)*p/g+u)),n(e,a,f,v)),x=e[a],y=i,C=o,t(e,i,a),e[o].y>x.y&&t(e,i,o);y<C;){for(t(e,y,C),y++,C--;e[y].y<x.y;)y++;for(;e[C].y>x.y;)C--}e[i].y===x.y?t(e,i,C):t(e,++C,o),C<=a&&(i=C+1),a<=C&&(o=C-1)}},a=(e=e||[]).length;a--;)e[a].r>o&&(o=e[a].r),e[a].i=a,e[a].x=+e[a].x,e[a].y=+e[a].y;return{tree:0===e.length?{}:function e(t,a,o,r){var l,s={},c=r?"y":"x";return a===o?(s.point=t[a],s):1==o-a?(t[a][c]>t[o][c]?(s.point=t[a],s.left={point:t[o]}):(s.point=t[o],s.left={point:t[a]}),s):(l=a+o>>1,r?n(t,l,a,o):i(t,l,a,o),s.point=t[l],s.left=e(t,a,l-1,!r),s.right=e(t,l+1,o,!r),s)}(e,0,e.length-1,!1),search:function(e,t,a,i){function n(e,t,a,i){return s(g(e-a,2)+g(t-i,2))}function r(i,o){return"circle"===a?n(i,o,e,t)<=u:i>=u&&i<=f&&o>=v&&o<=x}function l(e,t,a){return e>=t&&e<=a}function c(a){var i=l(e,a.x1,a.x2)&&l(t,a.y1,a.y2),o=n(e,t,a.point.x,a.point.y);return h?void(i?y?a.point.i>h.point.i&&(h=a,y=i,C=o):(h=a,y=i,C=o):!y&&o<C&&(h=a,y=i,C=o)):(h=a,y=i,void(C=o))}function d(i,n){"circle"===a?u=i:(u=e-i||0,f=e+i||0,v=t-n||0,x=t+n||0)}var h,b,m,p=this.tree,u=e-o,f=e+o,v=t-o,x=t+o,y=!1,C=0;return i=i||{},m=function(e){e&&e.point&&(d(i.rx||e.point.r,i.ry||e.point.r),r(e.point.x,e.point.y)&&c(e),v<=e.point.y&&b(e.left),x>=e.point.y&&b(e.right))},(b=function(e){e&&e.point&&(d(i.rx||e.point.r,i.ry||e.point.r),r(e.point.x,e.point.y)&&c(e),u<=e.point.x&&m(e.left),f>=e.point.x&&m(e.right))})(p),h&&h.point||h}}}(e),this.tree=this.kdTree.tree,this}getNeighbour(e,t,a){var i=this,n=i.tree,o={x1:e.x-i.xLimit,x2:e.x+i.xLimit,y1:e.y-i.yLimit,y2:e.y+i.yLimit},r=i.validatorFn;return i.mousePoint=e,t?this.kdTree&&this.kdTree.search(e.x,e.y,a,e.options):n?i._searchBtwnLimit(o,n,!0,r):void 0}_searchBtwnLimit(e,t,a,i){var n,o,r=a?"x":"y",l=a?e.x1:e.y1,s=a?e.x2:e.y2;if((n=t&&t.point&&t.point[r])!==ma)return i(t.point)&&(o=t.point),n>=l&&t.left&&(o=Sa(o,this._searchBtwnLimit(e,t.left,!a,i))),n<=s&&t.right&&(o=Sa(o,this._searchBtwnLimit(e,t.right,!a,i))),o}_setSearchLimit(e,t){this.xLimit=e,this.yLimit=t}}Aa.prototype.constructor=Aa;var Fa=Aa;let Ba,Ta=window.navigator.userAgent,Ea=/msie/i.test(Ta)&&!window.opera,Pa="",_a="top",Da="bottom",Ia="right",Ma="left",Va="middle",za="center",Ra=.6,Na=window.Math,Ga=Na.min,Wa=Na.max,Ha="items",Ya=Math.PI/180,Xa="rgba(192,192,192,"+(Ea?.002:1e-6)+")",Za=function(e,t){let a=t?Object(n.T)(e.FCcolor,t,!1,!0):{FCcolor:e};return a.toString=n.Mb,a},Ka=function(e,t){let a,i=e&&e.length||!1,n=t||"id",o={};if(!e)return e;for(;i--;)(a=e[i])[n]!==Ba&&(o[a[n].toLowerCase()]=a);return o};Object(x.a)({name:"mapsAnimation",type:"animationRule",extension:Gt});class Ua extends pa{constructor(){super(),this.components={},this.getLabelAlignment={top:function(e,t,a){return{x:e.toString(),y:(t-a).toString(),align:za,valign:_a}},left:function(e,t,a){return{x:(e-a).toString(),y:t.toString(),align:Ia,valign:Va}},right:function(e,t,a){return{x:(e+a).toString(),y:t.toString(),align:Ma,valign:Va}},bottom:function(e,t,a){return{x:e.toString(),y:(t+a).toString(),align:za,valign:Da}},center:function(e,t){return{x:e.toString(),y:t.toString(),align:za,valign:Va}}},this.getWrapWidth={right:function(){return arguments[1]},left:function(e,t){return e-t},center:function(e,t){return 2*Ga(t,e-t)}},this.getWrapHeight={top:function(){return arguments[1]},middle:function(e,t){return 2*Ga(t,e-t)},bottom:function(e,t){return e-t}}}getName(){return"markers"}getType(){return"dataset"}configureAttributes(e){if(e){this.JSONData=e;let t=this,a=t.getFromEnv("chart").config.markerOpts;t.calculateDataLimits(),a.dataEnabled?this._parseMarkers():this.defineMarkersNShapes(),this.configureConnectors()}}calculateMarkerRadiusLimits(){if(this.JSONData){let e=this,t=e.JSONData,a=e.config,i=e.getFromEnv("chart"),n=i.config.width,o=i.config.height,r=t.markermaxradius,l=t.markerminradius,s=Ua.getMarkerRadiusLimits(n,o,r,l);a.minRadius=s.min,a.maxRadius=s.max}}calculateDataLimits(){let e,t,a,i,n,o=this.getFromEnv("chart"),r=this.config,l=(o.jsonData.markers||{})[Ha]||[],s=this.getFromEnv("number-formatter"),c=1/0,d=-1/0;for(n=0,a=l.length;n<a;n++)i=(e=l[n]).value,null!==(t=s.getCleanValue(i))&&(c=Ga(t,c),d=Wa(t,d));r.min=c,r.max=d}_parseMarkers(){let e,t,a,i,o,r,l,s,c=this,d=c.getFromEnv("chart"),h=d.jsonData.markers,g=h[Ha],b=h.shapes,m=d.config.markerOpts,p=this.getFromEnv("number-formatter"),u=c.components.shapeObjs={},f=c.components.markerObjs={};if(g&&g.length){if(b&&b.length)for(t=b.length;t;t-=1)(s=(i=b[t-1]).id.toLowerCase())&&(u[s]=i);for(t=g.length;t--;)(s=(i=g[t]).id&&i.id.toLowerCase())&&((e=i.value)!==Ba&&""!==e&&(e=parseFloat(e)),(o=(a=Ua._initializeMarkerItem(s,i,null,d)).config.options.shapeid)&&"string"==typeof o&&(o=o.toLowerCase()),l=(r=a.config).options,r.cleanValue=p.getCleanValue(e),r.formattedValue=null===r.cleanValue?Ba:p.dataLabels(e),r.fillColor=Object(n.zb)(l.fillcolor,l.color,m.fillColor),r.fillAlpha=Object(n.zb)(l.fillalpha,l.alpha,m.fillAlpha),r.fillRatio=Object(n.zb)(l.fillratio,m.fillRatio),r.fillAngle=Object(n.zb)(l.fillangle,m.fillAngle),r.borderThickness=Object(n.Bb)(l.borderthickness,m.borderThickness),r.borderColor=Object(n.zb)(l.bordercolor,m.borderColor),r.borderAlpha=Object(n.zb)(l.borderalpha,m.borderAlpha),r.labelPadding=l.labelpadding||m.labelPadding,a.dataset=c,i.__hideMarker&&(a._isHidden=!0),o&&(a.shapeObj=u[o]),f[s]=a)}}defineMarkersNShapes(){let e,t,a,i,o,r,l,s,c=this,d=c.getFromEnv("chart"),h=d.jsonData.markers,g=h.definition,b=this.getFromEnv("number-formatter"),m=d.config.markerOpts,p=Ka(g)||{},u=Ka(h.application)||{},f=h.shapes,v=c.components.shapeObjs=c.components.shapeObjs||(c.components.shapeObjs={}),x=c.components.markerObjs=c.components.markerObjs||(c.components.markerObjs={});if(g&&g.length){if(f&&f.length)for(i=f.length;i;i-=1)(s=(r=f[i-1]).id.toLowerCase())&&(v[s]=r);for(s in p)r=p[s],(o=x[s]=Ua._initializeMarkerItem(s,r,u[s],d)).dataset=c,l=o.config.options.shapeid,t=o.config,a=r.value,t.cleanValue=b.getCleanValue(a),e=t.options,t.formattedValue=null===t.cleanValue?Ba:b.dataLabels(a),t.fillColor=Object(n.zb)(e.fillcolor,e.color,m.fillColor),t.fillAlpha=Object(n.zb)(e.fillalpha,e.alpha,m.fillAlpha),t.fillRatio=Object(n.zb)(e.fillratio,m.fillRatio),t.fillAngle=Object(n.zb)(e.fillangle,m.fillAngle),t.borderThickness=Object(n.Bb)(e.borderthickness,m.borderThickness),t.borderColor=Object(n.zb)(e.bordercolor,m.borderColor),t.borderAlpha=Object(n.zb)(e.borderalpha,m.borderAlpha),t.labelPadding=e.labelpadding||m.labelPadding,t.options.tooltext=Object(n.zb)(e.tooltext,m.tooltext),t.link=e.link,l&&(o.shapeObj=v[l.toLowerCase()])}}static getMarkerRadiusLimits(e,t,a,i){let n=Ga(e,t);return i=parseFloat(i),a=parseFloat(a),isNaN(i)||isNaN(a)?isNaN(i)?isNaN(a)?{min:.02*n,max:.07*n}:{min:parseInt(a/10,10),max:a}:{min:i,max:10*i}:i<a?{min:i,max:a}:{min:a,max:i}}getDataLimits(){let e=this.config;return{min:e.min,max:e.max}}static _initializeMarkerItem(e,t,a){let i,o={},r=o.config;return r||(r=o.config={}),r.id=e,r.definition=t,r.application=a,r.hasValue=null,r.value=null,r.options=null,r.label=null,r.markerShape=null,r.markerLabel=null,r.drawOptions={shape:null,label:null},r.drawComplete=!1,i=o.config.options=Object(n.T)({},r.definition),r.dataEnabled?!isNaN(i.value)&&""!==i.value&&(o.value=parseFloat(i.value),o.hasValue=!0):r.applyAll?r.options=Object(n.T)(i,r.application):a&&(r.options=Object(n.T)(i,r.application)),o}configureConnectors(){let e,t,a,i,o,r,l,s,c,d,h,g,b,m,p=this,u=p.getFromEnv("chart"),f=u.jsonData,v=p.components,x=f.markers||{},y=x.connector||x.connectors||[],C=v.markerObjs,O=y.length,L=p.components.connectors,w=function(e){return function(t){let a=this,i=a.getElement();i&&a.unfilteredConfig.hoverEffect&&i.attr(a.unfilteredConfig._hoverAttrs),u.fireChartInstanceEvent("connectorrollover",e,t)}},k=function(e){return function(t){let a=this,i=a.getElement();i&&a.unfilteredConfig.hoverEffect&&i.attr(a.unfilteredConfig._defaultAttrs),u.fireChartInstanceEvent("connectorrollout",e,t)}},j=function(e){return function(t){u.fireChartInstanceEvent("connectorClick",e,t)}},S=u.config.connectorOpts,A={};for(L=p.components.connectors=[],m=0;m<O;m++)((b=y[m]).from||b.to)&&(t=C[b.from.toLowerCase()],a=C[b.to.toLowerCase()],t&&a)&&(i=y[m].label,(A=L[m])||(A=L[m]={}),A.config||(e=A.config={}),A.graphics||(A.graphics={}),(e=A.config=Object(n.T)({},b)).fromMarker=t,e.toMarker=a,e.link=b.link,e.showTooltip=Object(n.Bb)(b.showtooltip,S.showTooltip),o=e.tooltext=e.showTooltip?Object(n.zb)(b.tooltext,S.tooltext):Pa,r=e.thickness=Object(n.zb)(b.thickness,S.thickness),l=e.color=Object(n.zb)(b.color,S.color),s=e.alpha=Object(n.zb)(b.alpha,S.alpha),e.hoverEffect=Object(n.Bb)(b.showhovereffect,S.showHoverEffect),c=Object(n.zb)(b.hovercolor,S.hoverColor,l),d=Object(n.zb)(b.hoveralpha,S.hoverAlpha,s),h=Object(n.zb)(b.hoverthickness,S.hoverThickness,r),e.dashed=Object(n.zb)(b.dashed,S.dashed),e.dashLen=Object(n.Bb)(b.dashlen,S.dashlen),e.dashGap=Object(n.Bb)(b.dashgap,S.dashgap),o&&(e.tooltext=o=Object(n.xb)(Object(n.wb)(o,[3,40,41,42,43],{label:i,fromId:t.config.definition.id,toId:a.config.definition.id,fromLabel:t.config.definition.label,toLabel:a.config.definition.label},void 0))),e.eventArgs={fromMarkerId:t.config.id,toMarkerId:a.config.id,label:i},e._hoverAttrs={stroke:Za({color:c,alpha:d}).toString(),"stroke-width":h},e._defaultAttrs={stroke:Za({color:l,alpha:s}).toString(),"stroke-width":r},e.type="line",e.onclick=j(e.eventArgs),e.onmouseover=w(e.eventArgs),e.onmouseout=k(e.eventArgs),i&&(!(g=A.labelConfig)&&(g=A.labelConfig={}),g.type="text",g.text=i,g.align=za,g.valign=Va,g.font=S.font,g.fillcolor=S.fontColor,g.bgcolor=S.labelBgColor,g.bordercolor=S.labelBorderColor,g.tooltext=e.tooltext))}draw(){let e,t,a,i,n,o,r,l=this,s=l.getFromEnv("chart"),c=l.config,d=s.getChildren("mapAnnotations")[0],h=l.components.markerObjs,g=s.config,b=g.markerOpts,m=g.scalingParams,p=s.config.annotationConfig,u=l.getFromEnv("toolTipController"),f=[],v=[],x={};for(i in this._drawConnectors(),l.imageLoadCount=0,l.imageCount=0,r=d.addGroup(Object.assign(p,{id:"markers",fillalpha:"100",items:f,scaleimages:1}),l),o=d.addGroup(Object.assign(p,{id:"markerLabels",items:v,scaleimages:1}),l),g.labelsOnTop&&s.getChildren("mapLabelAnnotations")&&s.getChildren("mapLabelAnnotations")[0].annotation.groups[0].store.element.toFront(),l.components.markerGroup=r,l.components.markerLabelGroup=o,c.autoScale=b.autoScale?m.sFactor:1,h)e=null,(a=(t=h[i]).config).conIsHidden||(e=this._drawMarkerItem.call(t)),e&&(a._annotationIndex=f.length,x[i]=t,t.markerShape=e.markerShape&&d.addItem(r.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},e.markerShape),!0,l),(n=t.markerShape&&t.markerShape.getElement())&&u.enableToolTip(n,t.config.tooltext),f.push(t.markerShape),t.markerLabel=e.markerLabel&&d.addItem(o.getId(),Object.assign({animationLabel:"markerItem"},e.markerLabel),!0,l),v.push(t.markerLabel));l.addJob("buildKdtree",l._buildKdTree.bind(l),Ct.b.kdTree)}_buildKdTree(){let e,t,a=this,i=a.components.kdArrayMap,n=a.components.markerGroup,o=[],r=n&&n.items,l=r&&r.length||0;for(t=0;t<l;t++)i[e=r[t].config.id]&&o.push(i[e]);a.components.kDTree||(a.components.kDTree=new Fa(!0)),a.components.kDTree._setSearchLimit(1/0,1/0),a.components.kDTree.buildKdTree(o)}_drawMarkerItem(){let e,t,a,i,o,r,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O=this,L=O.dataset,w=L.getFromEnv("chart"),k=w.config,j=L.config,S=k.scalingParams,A=O.config,F=A.options,B=A.definition,T=k.markerOpts,E=T.dataLabels.style,P=F.shapeid,_=F.scale||1,D=F.label||Pa,I=w.config.scalingParams.scaleFactor*w.config.baseScaleFactor,M=(F.labelpos||_a).toLowerCase(),V=A.formattedValue===Ba?Ba:A.formattedValue,z=F.tooltext||T.tooltext,R=Object(n.Bb)(B.radius,A.radius,T.radius)*_*j.autoScale||1e-4,N=A.fillColor,G=A.fillAlpha,W=A.fillRatio,H=A.fillAngle,Y=A.borderThickness,X=A.borderColor,Z=A.borderAlpha,K=L.components.kdArrayMap||(L.components.kdArrayMap={}),U=O.config.id;if(A.autoScale=T.autoScale?I:1,P)return z=z?Object(n.xb)(Object(n.wb)(z,[1,2,3],{formattedValue:V,label:D},F)):V?D+T.tooltipSepChar+V:D,V!==Ba&&null!==V?D=D+T.labelSepChar+V:isNaN(_)?_=1:0>_?_=0:5<_&&(_=5),Object(n.T)(F,{x:F.x&&F.x.toString(),y:F.y&&F.y.toString(),fillcolor:N,fillalpha:G,fillratio:W,fillangle:H,borderthickness:Y,bordercolor:X,borderalpha:Z,hovereffect:Object(n.zb)(T.showHoverEffect),radius:R&&R.toString(),link:F.link,showshadow:Object(n.Bb)(F.showshadow,A.shadow),_markerLabel:D,_markerId:F.id,id:(F.id+Pa).toLowerCase()}),delete F.tooltext,A.tooltext=!!T.showTooltip&&z,u=+F.x*S.sFactor+S.translateX,f=+F.y*S.sFactor+S.translateY,R=F.radius,"triangle"===P?(Object(n.T)(F,{type:"polygon",sides:3,startangle:T.startAngle}),C="polygon",y=3):"diamond"===P?(Object(n.T)(F,{type:"polygon",sides:4,startangle:T.startAngle}),C="polygon",y=4):"arc"===P?(x=R*Ra,Object(n.T)(F,{type:"arc",startangle:0,endangle:360,innerradius:x}),C="arc"):"circle"===P?(F.type="circle",C="circle"):(g=L.getShapeArgs.call(O),T.dataEnabled&&T.valueToRadius&&F.radius!==Ba?delete g.radius:(!g.radius&&(g.radius=T.radius),g.radius*=_*A.autoScale),Object(n.T)(F,g),F.id=F._markerId&&F._markerId.toLowerCase(),x=g.innerradius,g.radius&&(R=g.radius),C=g.type&&g.type.toLowerCase(),y=g.sides||5,(R=+R)&&x&&R<x&&(p=R,F.radius=R=x,F.innerradius=x=p)),F.type=F.type&&F.type.toLowerCase(),Object(n.T)(F,{hoverfillcolor:Object(n.zb)(F.fillhovercolor,T.hoverFillColor,F.fillcolor),hoverfillalpha:Object(n.zb)(F.fillhoveralpha,T.hoverFillAlpha,F.fillalpha),hoverfillratio:Object(n.zb)(F.fillhoverratio,T.hoverFillRatio,F.fillratio),hoverfillangle:Object(n.zb)(F.fillhoverangle,T.hoverFillAngle,F.fillangle),hoverborderthickness:Object(n.Bb)(F.borderhoverthickness,T.hoverBorderThickness,F.borderthickness),hoverbordercolor:Object(n.zb)(F.borderhovercolor,T.hoverBorderColor,F.bordercolor),hoverborderalpha:Object(n.zb)(F.borderhoveralpha,T.hoverBorderAlpha,F.borderalpha)}),b={alpha:F.fillalpha,color:F.fillcolor,angle:360-F.fillangle,ratio:F.fillratio},m={alpha:F.hoverfillalpha,color:F.hoverfillcolor,angle:360-F.hoverfillangle,ratio:F.hoverfillratio},F._defaultattrs={fill:Object(n.Mb)(b),"stroke-width":"0"===F.showborder?0:F.borderthickness,stroke:Object(l.c)(F.bordercolor,F.borderalpha)},F._hoverattrs={fill:Object(n.Mb)(m),"stroke-width":"0"===F.showborder?0:F.hoverborderthickness,stroke:Object(l.c)(F.hoverbordercolor,F.hoverborderalpha)},"image"===F.type?(F.borderthickness=F.borderthickness||0,F.onload=function(e){let t=this.config,a=e.width,i=e.height,n={},o=(+t.x-a/(2*S.sFactor))*S.sFactor,r=(+t.y-i/(2*S.sFactor))*S.sFactor;(n=K[U]||(K[U]={})).x=o+S.translateX,n.y=r+S.translateY,n.element=O,n.shapeInfo={type:"rect",width:a,height:i},a&&i&&this.getElement().attr({x:o,y:r,width:a,height:i}),L.imageLoadCount++,L.imageLoadCount===L.imageCount&&L._buildKdTree()},F.onerror=function(){L.imageLoadCount++,L.imageLoadCount===L.imageCount&&L._buildKdTree()},L.imageCount++):((v=K[U]||(K[U]={})).x=u,v.y=f,v.element=O,v.shapeInfo={type:C,sides:y,radius:+R+F.borderthickness/2,innerradius:x}),A.drawOptions.shape=F,T.showLabels?(h=F.labelpadding||T.labelPadding,t=(e=L._getLabelOptions(M,h,F)).align,a=e.valign,i=A._labelBaseWidth,o=A._labelBaseHeight,r=A._labelXOffset,s=A._labelYOffset,c=T.labelWrapWidth?T.labelWrapWidth:L.getWrapWidth[t](i,+e.x+r),d=T.labelWrapHeight?T.labelWrapHeight:L.getWrapHeight[a](o,+e.y+s),c>h&&(c-=h),d>h&&(d-=h),A.drawOptions.label=Object(n.T)({type:"text"},{text:D,tooltext:F.tooltext,x:e.x,y:e.y,align:t,valign:e.valign,wrap:1,wrapwidth:c,wrapheight:d,fontsize:E.fontSize/S.sFactor,font:E.fontFamily,fillcolor:E.fontColor}),{markerShape:F,markerLabel:A.drawOptions.label}):{markerShape:F}}getHoverFn(){let e=this.getFromEnv("chart");return function(){let t,a,i=this.data("marker"),o=i.markerShape,r=o.unfilteredConfig,l=r._markerEventArgs,s=o.getElement(),c=s.getBBox(),d=i.config;s&&r.hovereffect&&("circle"===o.config.type&&(a={color:r.hoverfillcolor,alpha:r.hoverfillalpha,angle:360-r.hoverfillangle,ratio:r.hoverfillratio,gradientUnits:"objectBoundingBox",radialGradient:"radial"===o.config.rawFillPattern},r._hoverattrs.fill=Object(n.Mb)(a)),t=Object(n.T)({},r._hoverattrs),"image"===s.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),s.attr(t)),l||(l=r._markerEventArgs={x:c.x,y:c.y,scaledX:c.x/o.groupConfig.scaleX,scaledY:c.y/o.groupConfig.scaleY,chartX:c.x+c.width/2,chartY:c.y+c.height/2,id:r.id,label:r.label}),Object(Vt.e)(d.options.id,"markerRollOver",l,e.getFromEnv("chartInstance"),d,Ba,Ba,Ba)}}getHoverOutFn(){let e=this.getFromEnv("chart");return function(){let t,a=this.data("marker"),i=a.markerShape,o=i.getElement(),r=a.config,l=i.unfilteredConfig;o&&i.unfilteredConfig.hovereffect&&("circle"===i.config.type&&(l._defaultattrs.fill=Object(n.Mb)({alpha:i.config.rawAlpha,color:i.config.rawColor,angle:360-i.config.rawAngle,ratio:i.config.rawRatio,radialGradient:"radial"===i.config.rawFillPattern})),t=Object(n.T)({},i.unfilteredConfig._defaultattrs),"image"===o.type&&(delete t.fill,delete t.stroke,delete t["stroke-width"]),o.attr(t)),Object(Vt.e)(r.id,"markerRollOut",i.unfilteredConfig._markerEventArgs,e.getFromEnv("chartInstance"),Ba,Ba,Ba)}}getClickFn(){let e=this;return function(t){let a=this.data("marker"),i=a.config.options,n=e.getFromEnv("chart"),o=a.markerShape,r=o.config,l=this.getBBox(),s=r._markerEventArgs;s||(s=r._markerEventArgs={x:l.x,y:l.y,scaledX:l.x/o.groupConfig.scaleX,scaledY:l.y/o.groupConfig.scaleY,chartX:l.x+l.width/2,chartY:l.y+l.height/2,id:i.id,label:i.label}),n.fireChartInstanceEvent("markerClick",s,t)}}highlightPoint(e){let t,a,i,n,o,r,l,s,c,d,h=e.element,g=this,b=g.getFromEnv("chart"),m=b.graphics,p=g.getFromEnv("animationManager"),u=m.trackerElems||(m.trackerElems={}),f=e.shapeInfo,v=g.getFromEnv("toolTipController"),x=e.x,y=e.y,C=b.config.lastHoveredPoint,O=!1;return!1===e?((a=u[t=C&&C.shapeInfo.type])&&a.hide(),void(b.config.lastHoveredPoint=null)):(i={fill:Xa,stroke:Xa},"circle"===(t=f.type)&&(t="polygon"),a=u[t],"polygon"===t?(n=f.sides||1,o=f.startAngle,l=f.radius,!a&&(O=!0),a=m.trackerElems[t]=p.setAnimation({el:m.trackerElems[t]||"polypath",container:a,attr:Object.assign({polypath:[n,x,y,l,o]},i),component:g,label:"markers"})):"rect"===t?(r=f.width,c=f.height,!a&&(O=!0),a=m.trackerElems[t]=p.setAnimation({el:m.trackerElems[t]||"rect",container:a,attr:Object.assign({x:x,y:y,width:r,height:c},i),component:g,label:"markers"})):"arc"===t&&(s=h.markerShape.config.innerRadius,o=(360-h.markerShape.config.startAngle)*Ya,d=(360-h.markerShape.config.endAngle)*Ya,l=f.radius,!a&&(O=!0),a=m.trackerElems[t]=p.setAnimation({el:m.trackerElems[t]||"ringpath",container:a,attr:Object.assign({ringpath:[x,y,l,s,d,o]},i),component:g,label:"markers"})),b.config.lastHoveredPoint=e,O&&a.click(g.getClickFn()).hover(g.getHoverFn(),g.getHoverOutFn()),a.show().data("marker",h),void v.enableToolTip(a,h.config.tooltext))}_drawConnectors(){let e,t,a,i,n,o,r,l,s=this,c=s.getFromEnv("chart"),d=c.config.annotationConfig,h=s.components.connectors||(s.components.connectors=[]),g=h.length,b=c.config.scalingParams,m=c.config.connectorOpts,p=m.showLabels,u=c.getChildren("mapAnnotations")[0],f=[],v=[],x=[];for(x.push({id:"connectorLabels",fillalpha:"100",items:v}),x.push({id:"connectors",fillalpha:"100",items:f}),u.addGroup(Object.assign(d,x[1]),s),u.addGroup(Object.assign(d,x[0]),s),t=0;t<g;t++)h[t]&&(r=h[t].config.fromMarker.config,l=h[t].config.toMarker.config,a=r.options.x,i=r.options.y,n=l.options.x,o=l.options.y,h[t].config.x=a,h[t].config.y=i,h[t].config.tox=n,h[t].config.toy=o,f.push(h[t].config),(e=u.addItem("connectors",Object.assign({animationLabel:"markerItem"},h[t].config),!0,s)).addEventListener("mouseover",h[t].config.onmouseover),e.addEventListener("mouseout",h[t].config.onmouseout),e.addEventListener("click",h[t].config.onclick),h[t].labelConfig&&p&&(h[t].labelConfig.x=((+a+ +n)/2).toString(),h[t].labelConfig.y=((+i+ +o)/2).toString(),h[t].labelConfig.fontsize=m.fontSize/(b.scaleFactor*c.config.baseScaleFactor),v.push(h[t].labelConfig),u.addItem("connectorLabels",Object.assign({animationLabel:"markerItem"},h[t].labelConfig),!0,s)))}getShapeArgs(){let e,t=this.config,a=Object(n.T)({},this.shapeObj);return t.autoScale=1,a?("polygon"===a.type?3>a.sides?a.type="circle":a.startangle=t.startAngle:"arc"===a.type&&(e=(a.radius||t.markerRadius)*t.autoScale,a.radius=e,a.innerradius=a.innerradius&&a.innerradius*t.autoScale||e*Ra),a):null}_getLabelOptions(e,t,a,i,n){let o,r,l,s=e&&e.toLowerCase();return this.getLabelAlignment[s]||(s="center"),r=+a.x,l=+a.y,o=+(o=i===Ba||n===Ba?a.radius||0:/^(top|bottom)$/gi.test(s)&&.5*n||/^(left|right)$/gi.test(s)&&.5*i||0)+ +t,this.getLabelAlignment[s](r,l,o)}addMarkerItem(e){let t,a,i,o,r,l,s=this,c=s.getFromEnv("chart"),d=e,h=s.components.markerObjs,g=s.components.shapeObjs,b=s.components.markerGroup,m=s.components.markerLabelGroup,p=c.getChildren("mapAnnotations")[0],u=s.getFromEnv("number-formatter"),f=c.config.markerOpts;if(l=d.id.toLowerCase()){if(h[l])return;delete d.value,s.imageLoadCount=0,(t=Ua._initializeMarkerItem(l,d,null)).dataset=s,r=t.config.options.shapeid,i=t.config,o=d.value,i.cleanValue=u.getCleanValue(o),e=i.options,i.formattedValue=null===i.cleanValue?Ba:u.dataLabels(o),i.fillColor=Object(n.zb)(e.fillcolor,e.color,f.fillColor),i.fillAlpha=Object(n.zb)(e.fillalpha,e.alpha,f.fillAlpha),i.fillRatio=Object(n.zb)(e.fillratio,f.fillRatio),i.fillAngle=Object(n.zb)(e.fillangle,f.fillAngle),i.borderThickness=Object(n.Bb)(e.borderthickness,f.borderThickness),i.borderColor=Object(n.zb)(e.bordercolor,f.borderColor),i.borderAlpha=Object(n.zb)(e.borderalpha,f.borderAlpha),i.labelPadding=e.labelpadding||f.labelPadding,i.options.tooltext=Object(n.zb)(e.tooltext,f.tooltext),i.link=e.link,r&&(t.shapeObj=g[r&&r.toLowerCase()]),h[l]=t,a=s._drawMarkerItem.call(t),b&&m&&(t.markerShape=a.markerShape&&p.addItem(b.getId(),Object.assign({align:"center",valign:"middle",animationLabel:"markerItem"},a.markerShape),!0,s),t.markerLabel=a.markerLabel&&p.addItem(m.getId(),Object.assign({animationLabel:"markerItem"},a.markerLabel),!0,s)),s._buildKdTree()}}updateMarkerItem(e,t){let a,i,o,r,l=this,s=l.getFromEnv("chart"),c=s.getChildren("mapAnnotations")[0],d=l.components.markerObjs,h=s.config.markerOpts,g={},b=d[e];if(b){for(i in a=b.config.options,Object(n.T)(a,t),l.imageLoadCount=0,o=b.config,t)g[i.toLowerCase()]=t[i]&&t[i].toString();o.fillColor=Object(n.zb)(g.fillcolor,g.color,h.fillColor),o.fillAlpha=Object(n.zb)(g.fillalpha,g.alpha,h.fillAlpha),o.fillRatio=Object(n.zb)(g.fillratio,h.fillRatio),o.fillAngle=Object(n.zb)(g.fillangle,h.fillAngle),o.borderThickness=Object(n.Bb)(g.borderthickness,h.borderThickness),o.borderColor=Object(n.zb)(g.bordercolor,h.borderColor),o.borderAlpha=Object(n.zb)(g.borderalpha,h.borderAlpha),o.labelPadding=g.labelpadding||h.labelPadding,o.options.tooltext=Object(n.zb)(g.tooltext,h.tooltext),o.link=g.link,r=l._drawMarkerItem.call(b).markerShape,l._buildKdTree(),c.update(e,r)}}_removeMarkerItem(e){let t,a,i=this.components,n=i.markerObjs,o=n[e],r=i.kdArrayMap;o&&(t=o.markerShape,a=o.markerLabel,t&&t.dispose(),a&&a.dispose(),delete r[e],this._buildKdTree()),delete n[e]}getElement(e){if(this.components.kDTree)return this.components.kDTree.getNeighbour(e)}}var Ja=Ua;Object(x.a)({name:"mapsAnimation",type:"animationRule",extension:Gt});var qa=class extends r.a{getType(){return"group"}getName(){return"mapGroup"}configure(){this._mapChildren(e=>{e.configure&&e.configure()})}createContainer(){let e,t=this,a=t.getLinkedParent(),i=t.getFromEnv("animationManager");e=a.getChildContainer().plotGroup,t.getChildContainer("plotShadow")||t.addChildContainer("plotShadow",i.setAnimation({el:"group",attr:{name:"manager-plot-shadow",opacity:1},container:e,component:t,label:"group"})),t.getChildContainer("plot")||t.addChildContainer("plot",i.setAnimation({el:"group",attr:{name:"manager-plot",opacity:1},container:e,component:t,label:"group"}))}_transformGroup(){let e=this,t=this.getFromEnv("chart"),a=t.getFromEnv("chartInstance"),i=e.getFromEnv("animationManager"),o=t.jsonData,r=e.getChildContainer("plot"),l=e.getChildContainer("plotShadow"),s=t.config.scalingParams;r.hide(),l.hide(),t.config.entitiesReady=!1,a.addEventListener("internal.mapdrawingcomplete",function(t){t.detachHandler(),n.ib&&(a.args.link&&a.args.clickedEntityBox&&o.chart.linkedcharttransition,r&&i.setAnimation({el:r,attr:{transform:s.transformStr},component:e,label:"group"}),l&&i.setAnimation({el:l,attr:{transform:s.transformStr},component:e,label:"group"})),r.show(),l.show()}),t.checkComplete()}draw(){this.createContainer(),this._transformGroup()}getDataLimits(e){let t,a=this,i=1/0,n=-1/0,o=0,r=function(e){n=Math.max(n,e.max),i=Math.min(i,e.min)};return a._mapChildren(a=>a.getState("removed")||!1===a.getState("visible")?void(e&&(t=a.getDataLimits(e),r(t))):(o++,t=a.getDataLimits(e),void r(t))),o?a.setState("visible",!0):a.setState("visible",!1),this.config.range||(this.config.range={},this.config.range.min=this.config.dataMin,this.config.range.max=this.config.dataMax),{max:n,min:i}}},$a=function(e){var t,a=e.getFromEnv("dataSource"),i=a.data||{},o=a.markers;Object(n.M)(e,qa,"mapGroup"),t=e.getChildren("mapGroup")[0],Object(n.Q)(t,pa,"entities",1,[i]),o?Object(n.Q)(t,Ja,"markers",1,[o]):e.getDatasets()[1]&&e.getDatasets()[1].remove()},Qa=a(24);let ei,ti=function(e,t,a){let i=e[0],n=e[1],o=e[2],r=i+(t[0]-i)*a,l=n+(t[1]-n)*a,s=o+(t[2]-o)*a;return{hex:("#000000"+(r<<16|l<<8|s).toString(16)).slice(-6),rgb:[r,l,s]}};var ai=class extends r.a{constructor(){super();let e=this;e.mapByCategory=!1,e.colorArr=[],e.noValidRange=!0,e.sortLegend=!1}__setDefaultConfig(){super.__setDefaultConfig(),this.config.defaultObj={code:"CCCCCC",alpha:"100"}}getType(){return"colorComponent"}getName(){return"colorBucket"}configure(e){if(!e)return;let t,a,i,o,r,l,s,c,d,h,g,b=this,m=b.mapByCategory,p=e.numberFormatter,u=e.colorRange||{},f=Object(n.T)([],u.color),v=this.getLinkedParent(),x=b.getFromEnv("dataSource"),y=Math.min(Math.max(Object(n.Bb)(x.chart.palette,0)-1,0),4),C=v.defaultPaletteOptions&&v.defaultPaletteOptions.paletteColors[y],O=Object(n.Bb)(p.getCleanValue(u.maxvalue),1/0),L=Object(n.Bb)(p.getCleanValue(u.minvalue),-1/0),w=b.colorArr;if(e.mapByCategory!==ei&&(m=b.mapByCategory=!!+e.mapByCategory),(f=m?f.filter(e=>e.code||e.color):f.filter(e=>e.minvalue||e.maxvalue)).forEach(e=>{e.minvalue&&e.maxvalue&&+e.maxvalue<+e.minvalue&&(c=e.maxvalue,e.maxvalue=e.minvalue,e.minvalue=c),e.minvalue?e.maxvalue?(h=p.getCleanValue(e.minvalue),d=p.getCleanValue(e.maxvalue),e.rangeLabel=p.dataLabels(h)+"-"+p.dataLabels(d)):(h=p.getCleanValue(e.minvalue),e.maxvalue=d=O,e.rangeLabel=d===1/0?">"+p.dataLabels(h):p.dataLabels(h)+"-"+p.dataLabels(d)):(e.minvalue=h=L,d=p.getCleanValue(e.maxvalue),e.rangeLabel=h===-1/0?"<"+p.dataLabels(d):p.dataLabels(h)+"-"+p.dataLabels(d))}),f.sort((e,t)=>+e.minvalue==+t.minvalue?e.maxvalue-t.maxvalue:e.minvalue-t.minvalue),f&&(t=f.length)){for(w.length=0,a=0;a<t;a+=1)s=f[a],i=Object(n.zb)(s.color,s.code,C&&C[a]),o=Object(n.zb)(s.alpha),l=Object(n.zb)(s.bordercolor),r=Object(n.zb)(s.borderalpha,100),d=Object(n.Bb)(s.maxvalue),h=Object(n.Bb)(s.minvalue),g=Object(n.zb)(s.label,s.displayvalue,s.rangeLabel),(i&&d>=h||m&&g)&&w.push({code:i,alpha:o||"100",oriAlpha:o,maxvalue:d,minvalue:h,label:Object(n.xb)(g),labelId:g.toLowerCase(),bordercolor:l,borderAlpha:r,name:s.name});b.sortedColorArr=b.colorArr.slice(0)}else b.noValidRange=!0,b.colorArr=[],b.sortedColorArr=[]}getColorObj(e){if(e===ei)return{outOfRange:!0};let t,a=this,i=a.sortedColorArr,o=a.gradient?1:0,r=i[o];if(a.mapByCategory){for(e=Object(n.xb)(e).toLowerCase()||e.toString().toLowerCase();r;){if(r.labelId===e||r.maxvalue>=e&&r.minvalue<=e)return{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:o,legendItemId:r.legendItemId};r=i[o+=1]}return{outOfRange:!0}}if(a.gradient){if(a.scaleMin<=e&&a.scaleMax>=e){for(;r&&r.maxvalue<e;)r=i[o+=1];return t=(e-r.minvalue)/r.range,{code:ti(i[o-1].codeRGB,r.codeRGB,t).hex}}return{outOfRange:!0}}for(;r;){if(e<r.minvalue)return 0==o?{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:o,name:r.name,label:r.label,outOfRange:!0,bordercolor:r.bordercolor,borderalpha:r.borderAlpha}:{code:i[o-1].code,alpha:i[o-1].alpha||"100",oriAlpha:i[o-1].oriAlpha,seriesIndex:o,name:i[o-1].name,label:i[o-1].label,outOfRange:!0,bordercolor:i[o-1].bordercolor,borderalpha:i[o-1].borderAlpha};if(e>r.maxvalue&&o==i.length-1)return{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:o,name:r.name,label:r.label,outOfRange:!0,bordercolor:r.bordercolor,borderalpha:r.borderAlpha};if(r.maxvalue>=e&&r.minvalue<=e)return{code:r.code,alpha:r.alpha||"100",oriAlpha:r.oriAlpha,seriesIndex:o,name:r.name,label:r.label,bordercolor:r.bordercolor,borderalpha:r.borderAlpha};r=i[o+=1]}return i.length?void 0:{outOfRange:!0}}getColorRangeArr(e,t){var a,i,o,r,l,s,c,d,h=this.colorArr,g=[];if(!this.defaultAsigned&&(e>t&&(a=e,e=t,t=a),e<t&&(r=this.getColorObj(e),s=this.getColorObj(t),r&&s))){for(l=e,i=r.seriesIndex,o=s.seriesIndex;i<=o;i+=1)(c=Object(n.T)({},h[i])).minvalue!==l&&(c.minvalue=l),g.push(c),d=c,l=c.maxvalue;d&&(d.maxvalue=t)}return g}};let ii,ni=",",oi=(e,t,a)=>{var i,n,o=Math.round,r=e.value,s=e.code,c=Object(l.a)(s),d=t.value,h=t.code,g=Object(l.a)(h);return i=d-r,n=[o(c[0]+(g[0]-c[0])/i*(a-r)),o(c[1]+(g[1]-c[1])/i*(a-r)),o(c[2]+(g[2]-c[2])/i*(a-r))],Object(l.b)(n)};var ri=class extends r.a{constructor(){super(),this.colorRange={},this.valueRatio={},this.data={},this.mapByPercent=void 0}getType(){return"colorComponent"}getName(){return"gradientColorRange"}configure(e){if(!e)return;let t,a,i,n=this;for(n.data=e,n.appender="",i=n.colorRange=e.colorRange.sort(function(e,t){return e.value-t.value}),n.valueRatio=ii,n.values=[],t=0,a=i.length;t<a;t++)n.values.push(i[t].value)}getValueRatio(){var e,t,a=this.colorRange,i=a.length,n=this.valueRatio,o=a[i-1].value,r=a[0].value,l=0;if(n)return n;for(n=this.valueRatio=[],e=0;e<i;e++)t=(a[e].value-r)/(o-r),n.push(100*(t-l)),l=t;return n}getCumulativeValueRatio(){var e,t,a=this.colorRange,i=a.length,n=a[0].value,o=a[i-1].value,r=[];for(t=0;t<i;t++)e=a[t],r.push((e.value-n)/(o-n)*100);return r}getBoxFill(e){var t,a,i,o,r=this.colorRange,l=r.length,s=[];for(o=e?90:0,a=0;a<l;a++)t=r[a],s.push(t.code);return i={FCcolor:{alpha:"100,100,100",angle:o,color:s.join(ni),ratio:this.getValueRatio().join(ni)}},Object(n.Mb)(i)}getColorByValue(e){var t,a,i,n,o=this.values,r=this.colorRange;if(e!==ii&&null!==e){for(a=0,t=o.length;a<t;a++){if(e===o[a]){n=r[a].code;break}if(!a&&e<o[a]){i=!0;break}if(a===t-1&&e>o[a]){i=!0;break}if(e>o[a]&&e<o[a+1]){n=oi(r[a],r[a+1],e);break}}return i?void 0:n}}};function li(e){return Object(l.j)(e||ci)||ci}let si="rgba(192,192,192,"+(n.ob?.002:1e-6)+")",ci="#000000",di=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(n.Mb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:si,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:si,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,a){var i,o,r,s,c,d,h,g,b,m,p,u,f=Math.max,v=Math.min,x={},y=e.getFromEnv("number-formatter"),C=e.getFromEnv("dataSource"),O=C.dataset,L=C.data;if(a=a||{},!t)return!1;for("maps"!==e.defaultDatasetType||void 0!==a.min&&void 0!==a.max?"HeatMap"===e.getName()&&(void 0===a.min||void 0===a.max)&&(a={min:1/0,max:-1/0},O.forEach(e=>{e.data&&e.data.forEach(e=>{a.min=v(a.min,Object(n.Bb)(e.value,a.min)),a.max=f(a.max,Object(n.Bb)(e.value,a.max))})})):(a={min:1/0,max:-1/0},L&&L.forEach(e=>{a.min=v(a.min,Object(n.Bb)(e.value,a.min)),a.max=f(a.max,Object(n.Bb)(e.value,a.min))})),x.mapByPercent=p=!!Object(n.Bb)(t.mapbypercent,0),i=t.color||[],void 0===t.minvalue&&(t.minvalue=void 0===a.min?0:p?0:a.min),void 0===t.maxvalue&&(t.maxvalue=void 0===a.max?100:p?100:a.max),(t.maxvalue===t.minvalue||a.min===1/0||a.max===-1/0)&&(t.minvalue=0,t.maxvalue=100),u=!1,c=0,h=i.length;c<h;c++)if(i[c].maxvalue){u=!0;break}for(u||(i=[]),r=t.code,g=x.colorRange=[],x.gradient=!!Object(n.Bb)(t.gradient,1),i.length?r=li(r):(r?(s=li(r),r=li()):s=function(e){return Object(l.h)(e,1)}(r=li()),i.push({code:s,maxvalue:t.maxvalue,label:void 0})),function(t){var a,i,n,o=e.getFromEnv("number-formatter");for(a=0,i=t.length;a<i;a++)(n=t[a].maxvalue)&&(t[a].maxvalue=o.getCleanValue(n))}(i),i=i.sort(function(e,t){return e.maxvalue-t.maxvalue}),b=m=t.minvalue&&y.getCleanValue(t.minvalue),m=(void 0!==b||null!==b)&&(p?b+"%":y.legendValue(b)),g.push({code:Object(n.R)(r),value:b,displayValue:m,label:t.startlabel}),c=0,h=i.length;c<h;c++)d=li((o=i[c]).code||o.color),b=m=o.maxvalue,!isNaN(parseInt(b,10))&&(m=(void 0!==b||null!==b)&&(p?b+"%":y.legendValue(b)),g.push({code:Object(n.R)(d),value:b,displayValue:m,label:o.label||o.displayvalue}));return g[g.length-1].label=t.endlabel||o.label,x},getDefaultConf:function(e){return t[e]}}}();var hi=class extends r.a{constructor(){super(),this.datasource={},this.config.legendItemIds=[]}configure(){let e,t,a,i=this,o=this.getFromEnv("chart"),r="maps"===o.defaultDatasetType,l="TreeMap"===o.getName(),s=this.getFromEnv("dataSource").chart.mapbycategory,c=o.getFromEnv("number-formatter"),d=o.config.showLegend,h=o.getChildren("colorRange")&&o.getChildren("colorRange")[0];o.addToEnv("colorManager",i),i.datasource=o.getFromEnv("dataSource"),e=i.datasource.colorrange,h&&h.remove({instant:!0}),d||(i.config.legendItemIds=[]),"gradient"==(t=r?e.gradient&&+e.gradient?"gradient":e.color?"icon":"none":l?"gradient":e.gradient&&"0"!=e.gradient&&!+s?"gradient":"icon")?(di.init({chart:o}),a=di.legacyDataParser(e),Object(n.M)(o,ri,"colorRange",1,[a]),h=o.getChildren("colorRange")[0],o.addToEnv("colorRange",h),a||(h._dontPlot=!0),i.config.legendItemIds=[],i._configureGradientLegend(h)):"icon"===t?(Object(n.M)(o,ai,"colorRange",1,[{colorRange:e,sortLegend:0,mapByCategory:Object(n.Bb)(s,0),defaultColor:"cccccc",numberFormatter:c}]),o.addToEnv("colorRange",o.getChildren("colorRange")[0]),d&&i._addLegendItems()):"none"===t&&(o.deleteFromEnv("colorManager"),i.config.legendItemIds=[])}_configureGradientLegend(e){let t=this,a=t.getFromEnv("chart").getFromEnv("gLegend");a&&(a.setColorRange(e),t.addExtEventListener("rangeUpdated",function(e,a){t.fireEvent("legendUpdate",{"original-event":e,maxMinArray:a,component:"gradientlegend"})},a))}_addLegendItems(){let e,t,a,i,o,r=this,s=r.config,c=r.getFromEnv("chart"),d=c.getChildren("legend")[0],h=c.getFromEnv("colorRange").colorArr,g=h.length;for(i=0;i<g;i++)o={label:Object(n.zb)(h[i].label,h[i].displayvalue),datasetObj:h[i],index:i},t=Object(l.h)(h[i].code,40),e={FCcolor:{color:h[i].code+","+h[i].code+","+t,ratio:"0,70,30",angle:270,alpha:"100,100,100"}},(a=d.getItem(s.legendItemIds[i]))||(s.legendItemIds.push(d.createItem(r)),(a=d.getItem(s.legendItemIds[i])).addEventListener("click",a.itemClickFn)),a.removeLegendState("hidden"),h[i].legendItemId=a&&a.getId(),a.configure(o),a.setStateCosmetics("default",{symbol:{fill:Object(n.Mb)(e),rawFillColor:h[i].code}});for(i=g;i<s.legendItemIds.length;i++)d.disposeItem(s.legendItemIds[i]);s.legendItemIds.splice(g)}legendInteractivity(e){let t=this.getFromEnv("colorRange").colorArr[e.config.index];this.fireEvent("legendUpdate",{legendItem:e,colorObj:t,component:"legend"})}getColor(e){let t=this,a=t.datasource.colorrange;return!+t.datasource.chart.mapbycategory&&+a.gradient?{code:t.getColorByValue(e)}:t.getColorObj(e)}getValueRatio(){return this.getFromEnv("colorRange").getValueRatio()}getCumulativeValueRatio(){return this.getFromEnv("colorRange").getCumulativeValueRatio()}getBoxFill(e){return this.getFromEnv("colorRange").getBoxFill(e)}getColorByValue(e){return this.getFromEnv("colorRange").getColorByValue(e)}getColorObj(e){return this.getFromEnv("colorRange").getColorObj(e)}};var gi=function(e){!function(e){let t=e.getChildren("colorManager");e.getFromEnv("dataSource").colorrange?t?(e.addToEnv("colorManager",t[0]),t[0].configure()):(t=new hi,e.attachChild(t,"colorManager"),e.addToEnv("colorManager",t),t.configure()):(t&&(t[0].config.legendItemIds=[]),e.deleteFromEnv("colorManager"))}(e)};let bi,mi,pi,ui,fi={},vi="rgba(192,192,192,"+(n.ob?.002:1e-6)+")",xi=!1,yi=!0,Ci="%",Oi=",",Li="#000000",wi={}.hasOwnProperty,ki="M",ji="L";function Si(e,t){return function e(t,a){var i,n;for(n in t)wi.call(t,n)&&(i=t[n],a[n]===bi?a[n]=i:"object"==typeof i&&null!==i&&e(i,a[n]))}(e,t),t}function Ai(e){return Object(l.j)(e||Li)||Li}function Fi(e){var t,a=e.fontSize+"";return a?(t=a.replace(/(\d+)(px)*/,"$1px"),e.fontSize=t,e):e}function Bi(e){return!(e!==bi&&void 0!==e&&null!==e&&!isNaN(e))}fi.CAPTION="CAPTION",fi.LEGEND_BODY="LEGEND_BODY",fi.AXIS_LABEL="LEGEND_LABEL",fi.LEGEND_AXIS="LEGEND_AXIS",fi.RANGE="RANGE",fi.AXIS_VALUE="AXIS_VALUE",mi=function(){var e,t={legendCarpetConf:{spreadFactor:.85,allowDrag:!1,captionAlignment:"center",padding:{v:3,h:3},style:{fill:"#e4d9c1",stroke:"#c4b89d"}},legendCaptionConf:{spreadFactor:.2,padding:{v:2,h:2},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"bold",fontStyle:"normal"},bound:{style:{stroke:"none"}}},legendBodyConf:{spreadFactor:.8,padding:{v:2,h:2},bound:{style:{stroke:"none"}}}};return t.legendAxisConf={legendAxisHeight:11,spreadFactor:.4,padding:{v:1,h:1},style:{stroke:"none","stroke-opacity":0,"stroke-width":1},line:{grooveLength:3,offset:8,style:{stroke:"rgba(255, 255, 255, 0.65)","stroke-width":1.5}},shadow:{style:{stroke:"none",fill:Object(n.Mb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}},bound:{style:{stroke:"none"}}},t.sliderGroupConf={showTooltip:1,outerCircle:{rFactor:1.4,style:{fill:vi,stroke:"#757575","stroke-width":3}},innerCircle:{rFactor:.65,style:{fill:vi,stroke:"#FFFFFF"}}},t.axisTextItemConf={spreadFactor:.3,padding:{v:1,h:1},style:{fill:"#786B50",fontFamily:"sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}},{init:function(t){e=t.chart},legacyDataParser:function(t,a){var i,o,r,s,c,d,h,g,b,m,p,u,f={},v=e.getFromEnv("number-formatter");if(!t)return!1;for(f.mapByPercent=p=!!Object(n.Bb)(t.mapbypercent,0),i=t.color||[],t.minvalue===bi&&(t.minvalue=a.min===bi?0:p?0:a.min),t.maxvalue===bi&&(t.maxvalue=a.max===bi?100:p?100:a.max),u=!1,c=0,h=i.length;c<h;c++)if(i[c].maxvalue){u=!0;break}for(u||(i=[]),r=t.code,g=f.colorRange=[],f.gradient=!!Object(n.Bb)(t.gradient,1),i.length?r=Ai(r):(r?(s=Ai(r),r=Ai()):s=function(e){return Object(l.h)(e,1)}(r=Ai()),i.push({code:s,maxvalue:t.maxvalue,label:bi})),function(t){var a,i,n,o=e.getFromEnv("number-formatter");for(a=0,i=t.length;a<i;a++)(n=t[a].maxvalue)&&(t[a].maxvalue=o.getCleanValue(n))}(i),i=i.sort(function(e,t){return e.maxvalue-t.maxvalue}),b=m=t.minvalue&&v.getCleanValue(t.minvalue),m=(b!==bi||null!==b)&&(p?b+Ci:v.legendValue(b)),g.push({code:Object(n.R)(r),value:b,displayValue:m,label:t.startlabel}),c=0,h=i.length;c<h;c++)d=Ai((o=i[c]).code||o.color),b=m=o.maxvalue,!isNaN(parseInt(b,10))&&(m=(b!==bi||null!==b)&&(p?b+Ci:v.legendValue(b)),g.push({code:Object(n.R)(d),value:b,displayValue:m,label:o.label||o.displayvalue}));return g[g.length-1].label=t.endlabel||o.label,f},getDefaultConf:function(e){return t[e]}}}();class Ti{constructor(e){this.carpet=e}draw(e){return this.carpet.draw(e)}getLogicalSpace(e,t){return this.carpet.getLogicalSpace(e,t)}dispose(){this.carpet&&this.carpet.group&&this.carpet.group.remove()}}class Ei{constructor(e){this.conf=e,this._id="GL_CARPET",this.compositionsByCategory={},this.node=bi,this.group=bi,this._lSpace=bi,this.autoRecalculate=!1,this.groupName="fc-gradient-legend",this.moveInstructions={}}configure(e){this.conf=e}getName(){return"LegendCarpet"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}removeCompositions(e){delete this.compositionsByCategory[e]}getBoundingBox(e){var t,a,i=this.conf,n=i.spreadFactor,o=e.refSide,r=e.alignment,l=e.refOffset,s=e.x,c=e.y;return"bottom"===this.conf.legendPosition?(t=i.width=o*n,a=e.maxOtherSide,r&&(s===bi||null===s)&&(s=(l+o)/2-t/2)):(a=i.height=o*n,t=e.maxOtherSide,r&&(c===bi||null===c)&&(c=(l+o)/2-a/2)),{width:t,height:a,x:s,y:c}}getPostCalcDecisionsH(e,t){var a,i=this.conf.padding,n=0;for(a in this.moveInstructions={},t)n+=t[a].height||0;e.height=n+2*i.v}getLogicalSpace(e,t){var a,i,n,o,r,l=this._lSpace,s=["CAPTION","LEGEND_BODY"],c=this.conf.padding,d=this.compositionsByCategory,h=0,g={},b=0;if(l&&!t)return l.isImpure=!0,l;(Bi((l=this._lSpace=i=this.getBoundingBox(e)).x)||Bi(l.y)||Bi(l.height)||Bi(l.width))&&(this.autoRecalculate=!0),(n=Si(i,{})).height-=2*c.v,n.width-=2*c.h,n.x+=c.h,n.y+=c.v;for(let i=0;i<s.length;i++)(a=d[s[i]])&&((r=Si(n,{})).y+=h,h=n.height*a.conf.spreadFactor,r.height=h+b,o=a.getLogicalSpace(Si(r,{}),e,t),b=r.height-o.height,g[s[i]]=o,h=o.height);return this.getPostCalcDecisions(i,g),this._lSpace=i,i}setupDragging(){var e=this.group,t=0,a=0,i=0,o=0;e.css({cursor:"move"}),e.drag(function(n,r){t=n,a=r,e.attr({transform:"t"+(i+t)+","+(o+a)})},function(){i+=t,o+=a},n.Kb)}draw(e){var t,a,i,n=this.conf,o=["CAPTION","LEGEND_BODY"],r=this.compositionsByCategory,l=e.animationManager,s=e.parentGroup;this.getLogicalSpace(e,this.autoRecalculate),i=this._lSpace,this.group=t=l.setAnimation({el:this.group||"group",attr:{name:this.groupName},component:ui,container:s,label:"carpetGroup"}),this.node=l.setAnimation({el:this.node||"rect",attr:i,css:n.style,component:ui,container:t,label:"rect"});for(let s=0;s<o.length;s++)(a=r[o[s]])&&a.draw(n.captionAlignment,i,{animationManager:l,colorRange:e.colorRange,numberFormatter:e.numberFormatter,parentLayer:t,smartLabel:e.smartLabel,moveInstructions:this.moveInstructions[void 0],gLegend:e.gLegend});return n.allowDrag&&this.setupDragging(),this.node}getPostCalcDecisions(e,t){return"bottom"===this.conf.legendPosition?this.getPostCalcDecisionsH(e,t):this.getPostCalcDecisionsV(e,t)}getPostCalcDecisionsV(e,t){var a,i,n,o=this.conf.padding,r=Number.NEGATIVE_INFINITY,l=this.moveInstructions;for(i in this.getPostCalcDecisionsH(e,t),t)r=r<(a=t[i].width)?a:r;for(i in e.width=r+2*o.h,t)(n=r-(a=t[i].width))&&(l[i]="t"+n/2+",0")}}class Pi{constructor(e,t){this.rawText=e,this.conf=t,this._id="GL_CAPTION",this.node=bi,this.bound=bi,this._lSpace=bi,this.LegendCaption={},this.LegendCaption.LEFT={x:function(e,t){return t.x+e.width/2+2}},this.LegendCaption.RIGHT={x:function(e,t){return t.x+t.width-e.width/2-2}},this.LegendCaption.CENTER={x:function(){let e=arguments[1];return e.x+e.width/2}}}configure(e,t){this.rawText=e,this.conf=t}getName(){return"LegendCaption"}getType(){return"caption"}getLogicalSpace(e,t,a){var i,n,o,r,l=this.conf.padding,s=this._lSpace,c=this.rawText,d=t.gLegend.getFromEnv("chartConfig");return s&&!a?(s.isImpure=!0,s):(s=this._lSpace={bound:{height:0,width:0},node:{logicArea:bi,smartText:bi}},i=t.smartLabel,c?((n=Si(e,{})).height-=2*l.v,n.width-=2*l.h,n.x+=l.h,n.y+=l.v,i.useEllipsesOnOverflow(d.useEllipsesWhenOverflow),Fi(r=Si(this.conf.style,{})),i.setStyle(this._metaStyle=r),o=i.getSmartText(c,n.width,n.height),n.height=o.height,n.width=o.width,e.height=o.height+2*l.v,e.width=o.width+2*l.h,s.node.smartText=o,s.node.logicArea=n,s.bound=e,e):s.bound)}draw(){var e,t,a,i,n,o,r,l,s,c,d,h=this.conf,g=h.bound||{};return 3<=arguments.length?(r=arguments[0],l=arguments[1],s=arguments[2]):2<=arguments.length&&(r=arguments[0],s=arguments[1]),e=s.parentLayer,d=s.animationManager,this.group=t=d.setAnimation({el:this.group||"group",attr:{name:"legend-caption"},css:h.style,component:ui,container:e}),this.getLogicalSpace(l,s),c=(n=this._lSpace).node,i=n.bound,this.bound=a=d.setAnimation({el:this.bound||"rect",attr:i,css:g.style,container:t,component:ui}),o="string"==typeof r?this.LegendCaption[r.toUpperCase()].x(c.smartText,l||c.logicArea):r,this.node=d.setAnimation({el:this.node||"text",attr:{text:c.smartText.text,x:o,y:c.logicArea.y+c.smartText.height/2,lineHeight:this._metaStyle.lineHeight,fill:h.style.fill},container:t,component:ui}),{group:t,bound:a,node:this.node}}dispose(){this.group.remove(),this.bound.remove(),this.node.remove()}}class _i{constructor(e,t,a){this.colorRange=e,this.conf=t,this.childTextConf=a,this._id="GL_BODY",this.bound=bi,this.group=bi,this.compositionsByCategory={},this._lSpace=bi,this.SC_STACK=[fi.AXIS_LABEL,fi.LEGEND_AXIS,fi.AXIS_VALUE],this.DARW_STACK=[fi.AXIS_VALUE,fi.LEGEND_AXIS,fi.AXIS_LABEL]}configure(e,t,a){this.colorRange=e,this.conf=t,this.childTextConf=a,this.compositionsByCategory={}}getName(){return"LegendBody"}getType(){return"legend"}addCompositions(e,t){this.compositionsByCategory[t]=e}getSpaceTaken(e){return"bottom"===this.conf.legendPosition?e.height:e.width}getLogicalSpace(e,t,a){var i,n,o,r,l,s,c,d=this._lSpace,h=this.conf.padding,g=this.compositionsByCategory,b=0;if(d&&!a)return d.isImpure=!0,d;for(d=this._lSpace={bound:{height:0,width:0},node:{logicArea:bi}},(r=Si(e,{})).height-=2*h.v,r.width-=2*h.h,r.x+=h.h,r.y+=h.v,l=this.getCompositionPlotAreaFor(r),t.colorRange=this.colorRange,s=0,c=this.SC_STACK.length;s<c;s++)(i=g[this.SC_STACK[s]])&&(n=l(o,i.conf.spreadFactor),o=i.getLogicalSpace(Si(n,{}),t,a),b+=this.getSpaceTaken(o));return this.updateEffectivePlotArea(e,r,b),d.node.logicArea=r,d.bound=e,e}draw(){var e,t,a,i,n,o,r,l,s,c,d=this.childTextConf,h=this.conf.bound.style||{},g=this.compositionsByCategory;for(3<=arguments.length?(o=arguments[1],l=arguments[2]):2<=arguments.length&&(l=arguments[1]),t=l.parentLayer,e=l.animationManager,this.getLogicalSpace(o,l),r=this._lSpace,this.group=n=e.setAnimation({el:this.group||"group",attr:{name:"legend-body",transform:"t0,0"},css:d.style,container:t,component:ui}),this.bound=a=e.setAnimation({el:this.bound||"rect",attr:r.bound,css:h,container:n,component:ui}),l.colorRange=this.colorRange,l.parentLayer=n,s=0,c=this.DARW_STACK.length;s<c;s++)(i=g[this.DARW_STACK[s]])&&i.draw(l);return l.moveInstructions&&n.attr({transform:l.moveInstructions}),{bound:a,group:n}}getCompositionPlotAreaFor(e){var t,a="bottom"===this.conf.legendPosition;return t=Si(e,{}),function(i,n){return i=i||{},a?(t.y+=i.height||0,t.height=e.height*n):(t.x+=i.width||0,t.width=e.width*n),t}}updateEffectivePlotArea(e,t,a){var i=this.conf.padding;"bottom"===this.conf.legendPosition?(t.height=a,e.height=a+2*i.v):(t.width=a,e.width=a+2*i.h)}}class Di{constructor(e){this.conf=e,this.node=[],this._id="GL_LABELS"}configure(e){this.conf=e}getType(){return"label"}getName(){return"LegendLabel"}getEffectivePlotArea(e){var t=this.conf.padding;return e.height-=2*t.v,e.width-=2*t.h,e.x+=t.h,e.y+=t.v,e}getLogicalSpace(e,t,a){var i,n,o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j=Math.max,S="bottom"===this.conf.legendPosition,A=this._lSpace,F=this.conf,B=F.padding,T=[],E=t.gLegend.getFromEnv("chartConfig"),P=[];if(A&&!a)return A.isImpure=!0,A;for(i=t.colorRange,n=t.smartLabel,g=i.getCumulativeValueRatio(),o=i.colorRange,p=(A=this._lSpace={bound:{height:0,width:0},node:{logicArea:bi,smartTexts:[]}}).node.smartTexts,d=Si(e,{}),f=this.getEffectivePlotArea(d),k=S?f.width:f.height,n.useEllipsesOnOverflow(E.useEllipsesWhenOverflow),w=Si(F.style,{}),Fi(this._metaStyle=w),n.setStyle(w),v=n.getSmartText("W"),r=0,l=o.length;r<l;r++)(h=o[r].label)?P.push({oriIndex:r,label:h}):p[r]=bi;if(0===(l=P.length))return{height:0,width:0};for(m=b=1<l?(g[P[l-1].oriIndex]-g[P[0].oriIndex])/2*k/100:j(g[P[0].oriIndex],100-g[P[0].oriIndex])/2*k/100,S?((O=n.getSmartText(P[0].label,m,f.height)).x=g[P[0].oriIndex]*f.width/100,s=O.x+O.width):((O=n.getSmartText(P[0].label,m,f.width)).y=g[P[0].oriIndex]*f.height/100,s=O.y+O.width),T.push(O.height),p[P[0].oriIndex]=O,S?((O=n.getSmartText(P[l-1].label,m,f.height)).x=g[P[l-1].oriIndex]*f.width/100,c=O.x-O.width):((O=n.getSmartText(P[l-1].label,m,f.width)).y=g[P[l-1].oriIndex]*f.height/100,c=O.y-O.width),T.push(O.height),p[P[l-1].oriIndex]=O,C=s,r=1;r<l-1;r++)h=P[r].label,L=P[r].oriIndex,O=bi,x=r+1===l-1?c:g[P[r+1].oriIndex]*k/100,y=g[P[r].oriIndex]*k/100,(b=Math.min(y-C,x-y))>2*v.width&&(S?(O=n.getSmartText(h,b,f.height)).x=g[L]*f.width/100:(O=n.getSmartText(h,b,f.width)).y=g[L]*f.height/100,C=b,T.push(O.height)),p[P[r].oriIndex]=O;return u=j.apply(Math,T),S?(f.height=u,e.height=u+2*B.v):(f.width=u,e.width=u+2*B.v),A.node.logicArea=f,A.bound=e,e}draw(){var e,t,a,i,n,o,r,l,s,c,d,h,g="bottom"===this.conf.legendPosition,b=this.conf,m=b.bound&&b.bound.style||{stroke:"none"},p={};2<=arguments.length&&arguments[1]?(i=arguments[0],r=arguments[1]):1<=arguments.length&&(r=arguments[0]),h=r.animationManager,e=r.parentLayer,this.getLogicalSpace(i,r),s=(o=this._lSpace).node.logicArea,c=o.node.smartTexts,this.group=a=h.setAnimation({el:this.group||"group",attr:{name:"legend-labels"},container:e,component:ui}),this.bound=t=h.setAnimation({el:this.bound||"rect",attr:o.bound,css:m,container:a,component:ui});for(let e=0;e<this.node.length;e++)this.node[e].remove();for(this.node=[],l=0,d=c.length;l<d;l++)(n=c[l])&&(g?(p.y=s.y+n.height/2,p.x=l===d-1?s.x+n.x-n.width/2:l?s.x+n.x:s.x+n.x+n.width/2):(p.x=s.x+n.height/2,p.y=l===d-1?s.y+n.y-n.width/2:l?s.y+n.y:s.y+n.y+n.width/2),this.node.push(h.setAnimation({el:"text",attr:{text:n.text,x:p.x,y:p.y,lineHeight:this._metaStyle.lineHeight,fill:b.style.fill,transform:g?"R0":"R270,"+p.x+","+p.y},container:a,component:ui})));return{group:a,bound:t,node:this.node}}}class Ii{constructor(e){this.conf=e,this._id="FL_AXIS",this.node=bi,this.group=bi,this.shadow=bi,this.markerLine=bi,this.compositionsByCategory={}}configure(e){this.conf=e}getName(){return"LegendAxis"}getType(){return"axis"}addCompositions(e,t){this.compositionsByCategory[t]=e}getLogicalSpace(){var e,t,a,i,n,o,r="bottom"===this.conf.legendPosition,l=arguments[0],s=arguments[2],c=this._lSpace,d=this.conf,h=d.padding,g=d.legendAxisHeight,b=this.compositionsByCategory,m=0;return c&&!s?(c.isImpure=!0,c):(c=this._lSpace={bound:{height:0,width:0},node:{logicArea:bi}},(n=Si(l,{})).height-=2*h.v,n.width-=2*h.h,n.x+=h.h,n.y+=h.v,e=g/2+d.line.offset,t=g/2,(i=b[fi.RANGE])&&(o=i.sliders.false.conf.outerCircle.rFactor*g,t+=m=Math.max(o/2-g/2,0)),r?(n.y+=m,n.height=a=t+e+m,l.height=a+2*h.v):(n.x+=m,n.width=a=t+e+m,l.width=a+2*h.v),c.node.logicArea=n,c.bound=l,l)}getDrawableAxisArea(e){var t=this.conf,a="bottom"===this.conf.legendPosition;return{x:e.x,y:e.y,width:a?e.width:t.legendAxisHeight,height:a?t.legendAxisHeight:e.height,r:t.legendAxisHeight/2}}preDrawingRangeParamV(e){return{x:e.x+e.width/2,calculationBase:e.width,rangeStart:e.y,rangeEnd:e.y+e.height,prop:"x"}}preDrawingRangeParamH(e){return{y:e.y+e.height/2,calculationBase:e.height,rangeStart:e.x,rangeEnd:e.x+e.width,prop:"y"}}preDrawingRangeParam(e){return"bottom"===this.conf.legendPosition?this.preDrawingRangeParamH(e):this.preDrawingRangeParamV(e)}getScaleMarkerPathStrH(e,t){var a,i,n,o,r,l=Si(e,{}),s=this.conf.line,c="",d="";for(l.x+=l.r,l.width-=2*l.r,r=l.y+l.height,a=0,i=t.length;a<i;a++)n=t[a],o=l.x+n*l.width/100,c+=ki+o+Oi+(r-s.grooveLength)+ji+o+Oi+(r+s.offset);return c+(d+=ki+l.x+Oi+(r+s.offset)+ji+(l.x+l.width)+Oi+(r+s.offset))}getColorGradientH(e){return{axis:e.getBoxFill(),shadow:Object(n.Mb)({FCcolor:{alpha:"25,0,0",angle:90,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}draw(){var e,t,a,i,n,o,r,l,s,c,d,h,g,b,m=this.conf,p=m.bound||{},u=m.line,f=p.style||{},v=this.compositionsByCategory;for(a in 2<=arguments.length?(t=arguments[0],h=arguments[1]):1<=arguments.length&&(h=arguments[0]),g=h.animationManager,e=h.parentLayer,n=(i=h.colorRange).getCumulativeValueRatio(),this.getLogicalSpace(t,h),d=this._lSpace,this.group=r=g.setAnimation({el:this.group||"group",attr:{name:"legend-axis"},container:e,component:ui}),this.bound=g.setAnimation({el:this.bound||"rect",attr:d.bound,css:f,component:ui,container:r}),c=this.getDrawableAxisArea(d.node.logicArea),s=this.getColorGradient(i),m.style.fill=s.axis,m.shadow.style.fill=s.shadow,this.node=g.setAnimation({el:this.node||"rect",attr:c,css:m.style,container:r,component:ui}),this.shadow=g.setAnimation({el:this.shadow||"rect",attr:c,css:m.shadow.style,container:r,component:ui}),b=this.getScaleMarkerPathStr(c,n),this.path=g.setAnimation({el:this.path||"path",attr:{path:b},css:u.style,container:r,component:ui}),v)o=v[a],a===fi.RANGE&&(h[(l=this.preDrawingRangeParam(c)).prop]=l[l.prop],h.key=l.prop,h.rCalcBase=l.calculationBase,h.parentLayer=r,o.draw(l.rangeStart,l.rangeEnd,h))}getScaleMarkerPathStr(e,t){return"bottom"===this.conf.legendPosition?this.getScaleMarkerPathStrH(e,t):this.getScaleMarkerPathStrV(e,t)}getColorGradient(e){return"bottom"===this.conf.legendPosition?this.getColorGradientH(e):this.getColorGradientV(e)}getScaleMarkerPathStrV(e,t){var a,i,n,o,r,l=Si(e,{}),s=this.conf.line,c="",d="";for(l.y+=l.r,l.height-=2*l.r,o=l.x+l.width,a=0,n=t.length;a<n;a++)i=t[a],r=l.y+i*l.height/100,c+=ki+(o-s.grooveLength)+Oi+r+ji+(o+s.offset)+Oi+r;return c+(d+=ki+(o+s.offset)+Oi+l.y+ji+(o+s.offset)+Oi+(l.y+l.height))}getColorGradientV(e){return{axis:e.getBoxFill(!0),shadow:Object(n.Mb)({FCcolor:{alpha:"25,0,0",angle:360,color:"000000,FFFFFF,FFFFFF",ratio:"0,30,40"}})}}}class Mi{constructor(e,t,a){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=a,this.node=bi,this.tracker=bi,this.currPos=0,this.swing=[]}configure(e,t,a){this.conf=t.conf,this.sliderIndex=e,this.rangeGroup=t.sliderGroup,this._id=a,this.currPos=0,this.swing=[]}getType(){return"slider"}getName(){return"Slider"}updateSwingRange(e,t){this.swing[+e]=t}draw(e,t,a,i){var n,o,r,l,s,c,d=Math.ceil,h=i.parentLayer,g=i.animationManager,b=this.conf,m=b.outerCircle,p=b.innerCircle,u=d(m.rFactor*i.rCalcBase/2),f=d(p.rFactor*i.rCalcBase/2),v=u-f,x=this.sliderIndex;return b.outerRadius=u,b.innerRadius=f,this._scaleVal=t,p.style["stroke-width"]=v,f+=r=d(m.style["stroke-width"]/2),n=this.node=g.setAnimation({el:this.node||"group",attr:{name:"fc-gl-slider",cursor:"pointer",transform:"t0,0"},container:h,component:ui}),"x"===i.key?(l=a,s=e,s+=x?-f:+f):(l=e,s=a,l+=x?-f:+f),this.oCircle=g.setAnimation({el:this.oCircle||"circle",attr:{cx:l,cy:s,r:u},css:m.style,container:n,component:ui}),this.iCircle=g.setAnimation({el:this.iCircle||"circle",attr:{cx:l,cy:s,r:f},css:p.style,container:n,component:ui}),c=this.tracker=g.setAnimation({el:this.tracker||"circle",attr:{cx:l,cy:s,r:u+5,fill:vi,stroke:vi,cursor:"pointer"},container:n,component:ui}),n.attr({transform:"x"===i.key?"t0,"+this.currPos:"t"+this.currPos+",0"}),pi.enableToolTip(c,t),this._dragAPI=o=this.getDragAPI("x"===i.key),c.undrag(),c.drag(o.dragging,o.dragStart,o.dragEnd),{translateAscending:u+r}}getDragAPI(e){var t,a,i,n,o=this,r=o.node,l=o.sliderIndex,s=o.rangeGroup,c=o.conf.innerRadius;return{dragging:function(d){var h,g,b,m,p;return d.stopPropagation(),d.preventDefault(),b=e?d.data[1]:d.data[0],l?(h=t[0]-t[1]+c,g=0):(h=0,g=t[1]-t[0]-c),(p=o.currPos+b)<h?b+=h-p:p>g&&(b-=p-g),r.attr({transform:e?"t0,"+(o.currPos+b):"t"+(o.currPos+b)+",0"}),a=b,i&&clearTimeout(i),i=setTimeout(function(){s.updateWhenInRest(o,o.currPos+b)},100),m=s.updateWhenInMove(o,o.currPos+b),o.tracker.data("__FC_tooltipText",m),n=!0,!0},dragStart:function(e){e.stopPropagation(),e.preventDefault(),t=o.swing,n=!1,s.dragStarted(o)},dragEnd:function(){var e;s.dragCompleted(o,n,o.currPos+a),n&&(i&&clearTimeout(i),i=setTimeout(function(){s.updateWhenInRest(o,o.currPos)},100),o.currPos+=a,e=t[+l]+o.currPos,s.updateRange(o,e))}}}dispose(){this.node.remove(),this.oCircle.remove(),this.iCircle.remove(),this.tracker.remove()}}class Vi{constructor(e){var t={};this._id="GL_SG1",this.conf=e,t.conf=e,this.extremes=[],this.sliders={},this.min=void 0,this.max=void 0,t.sliderGroup=this,this.valueRange=[],this.callbacks=[],this.sliders[xi]=new Mi(xi,t,this._id+"_0"),this.sliders[yi]=new Mi(yi,t,this._id+"_1")}configure(e){var t={};this.min=void 0,this.max=void 0,this.conf=e,t.conf=e,t.sliderGroup=this,this.sliders[xi].configure(xi,t,this._id+"_0"),this.sliders[yi].configure(yi,t,this._id+"_1")}getType(){return"slider"}getName(){return"SliderGroup"}initRange(e,t){var a=e.sliderIndex;this.extremes[+a]=t}updateRange(e,t){var a=e.sliderIndex;this.sliders[!a].updateSwingRange(a,t)}reset(){var e={};e.conf=this.conf,e.sliderGroup=this,this.min=void 0,this.max=void 0,this.sliders[xi].configure(xi,e,this._id+"_0"),this.sliders[yi].configure(yi,e,this._id+"_1"),this.draw.apply(this,this._drawParams)}draw(e,t,a){var i,n,o,r,l,s=Math.ceil,c=this.sliders,d=c[!1],h=c[!0],g=a.colorRange,b=g.colorRange,m=g.data.mapByPercent,p=a.gLegend.getFromEnv("number-formatter");return this._fcChart=a.gLegend.getFromEnv("chart"),this.getValueFormPixel=function(e,t,a,i){this.getValueFormPixel=function(n){return e+(t-e)/(i-a)*n}},this.updateWhenInMove=function(e,t){this.updateWhenInMove=function(a,i){var n,o,r=this.extremes;return n=a.sliderIndex?r[1]-r[0]+i:i,o=this.getValueFormPixel(n),o=t?parseFloat(o).toFixed(2)+Ci:e.legendValue(o)}},this._drawParams=[e,t,a],this.updateWhenInMove(p,m),n=d.conf.outerCircle,o=s(d.conf.innerCircle.rFactor*a.rCalcBase/2),o+=s(n.style["stroke-width"]/2),this.extremes[0]=e+o,this.extremes[1]=t-o,r=this.extremes[1]-this.extremes[0],this.min=this.min?this.min:b[0].value,this.max=this.max?this.max:b[b.length-1].value,l=b[b.length-1].value-b[0].value,d.currPos=r*(this.min-b[0].value)/l,h.currPos=r*(this.max-b[0].value)/l-r,d.draw(e,m?p.legendPercentValue(this.min):p.legendValue(this.min),a[a.key],a),i=h.draw(t,m?p.legendPercentValue(this.max):p.legendValue(this.max),a[a.key],a),d.swing=this.extremes.slice(0),h.swing=this.extremes.slice(0),d.swing[1]+=h.currPos,h.swing[0]+=d.currPos,this.getValueFormPixel(b[0].value,b[b.length-1].value,this.extremes[0],this.extremes[1]),i}updateWhenInRest(e,t){var a,i,n=this.sliders,o=this.extremes,r=e.sliderIndex;r?(a=n[!r].currPos,i=o[1]-o[0]+t):(a=t,i=o[1]-o[0]+n[!r].currPos),this.min=+this.getValueFormPixel(a).toFixed(2),this.max=+this.getValueFormPixel(i).toFixed(2),this.gLegend.fireEvent("rangeUpdated",[{min:this.min,max:this.max}])}dragStarted(e){var t=this.sliders,a=this.extremes,i=e.conf,n=this._fcChart;n.fireChartInstanceEvent("legendpointerdragstart",{pointerIndex:+e.sliderIndex,pointers:[{value:this.getValueFormPixel(t.false.currPos)},{value:this.getValueFormPixel(a[1]-a[0]+t.true.currPos)}],legendPointerHeight:i.outerRadius,legendPointerWidth:i.innerRadius,outerRadius:i.outerRadius,innerRadius:i.innerRadius},[n.id])}dragCompleted(e,t,a){var i,n,o=this.sliders,r=this.extremes,l=e.conf,s=this.getValueFormPixel(o.false.currPos),c=this.getValueFormPixel(r[1]-r[0]+o.true.currPos),d=this._fcChart;e.sliderIndex?(i=s,n=this.getValueFormPixel(r[1]-r[0]+a)):(i=this.getValueFormPixel(a),n=c),t&&d.fireChartInstanceEvent("legendrangeupdated",{previousMinValue:s,previousMaxValue:c,minValue:i,maxValue:n},[d.id]),d.fireChartInstanceEvent("legendpointerdragstop",{pointerIndex:+e.sliderIndex,pointers:[{value:i},{value:n}],legendPointerHeight:l.outerRadius,legendPointerWidth:l.innerRadius,outerRadius:l.outerRadius,innerRadius:l.innerRadius},[d.id])}dispose(){this.sliders[xi].dispose(),this.sliders[yi].dispose()}}class zi extends Di{constructor(){super(arguments[0]),this._id="GL_VALUES",this.node=[]}configure(e){this.conf=e}getName(){return"LegendValues"}getType(){return"legend"}getLogicalSpace(e,t,a){var i,n,o,r,l,s,c,d,h,g,b,m,p,u,f,v,x,y,C,O,L,w,k,j,S,A=Math.min,F=Math.max,B="bottom"===this.conf.legendPosition,T=this._lSpace,E=this.conf,P=E.padding,_=t.gLegend.getFromEnv("chartConfig"),D=[],I=[];if(T&&!a)return T.isImpure=!0,T;for(i=t.colorRange,n=t.smartLabel,o=i.colorRange,c=i.getCumulativeValueRatio(),S=(T=this._lSpace={bound:{height:0,width:0},node:{logicArea:bi,smartTexts:[]}}).node.smartTexts,(O=Si(e,{})).height-=2*P.v,O.width-=2*P.h,O.x+=P.h,O.y+=P.v,n.useEllipsesOnOverflow(_.useEllipsesWhenOverflow),j=Si(E.style,{}),Fi(this._metaStyle=j),n.setStyle(j),k=n.getSmartText("W"),s=o.length,B?(b=d=(c[s-1]-c[0])/2*O.width/100,w=o[0].displayValue,(r=n.getSmartText("string"!=typeof w&&w!==bi&&w.toString()||w,b,O.height)).x=c[0]*O.width/100,m=r.x+r.width,D.push(r.height)):(b=d=(c[s-1]-c[0])/2*O.height/100,(r=n.getSmartText(o[0].displayValue,O.width,b)).y=c[0]*O.height/100,f=r.y+r.width,I.push(r.width)),S[0]=r,B?((r=n.getSmartText(o[s-1].displayValue,b,O.height)).x=c[s-1]*O.width/100,u=r.x-r.width,D.push(r.height),p=m):((r=n.getSmartText(o[s-1].displayValue,O.width,b)).y=c[s-1]*O.height/100,x=r.y-r.height,I.push(r.width),v=f),S[s-1]=r,l=1;l<s-1;l++)r=bi,L=o[l].displayValue,B?(h=l+1===s-1?u:c[l+1]*O.width/100,(d=A((g=c[l]*O.width/100)-p,h-g))>1.5*k.width&&((r=n.getSmartText(L,2*d,O.height)).x=c[l]*O.width/100,p=d,D.push(r.height))):(h=l+1===s-1?x:c[l+1]*O.height/100,(d=A((g=c[l]*O.height/100)-v,h-g))>2*k.height&&((r=n.getSmartText(L,O.width,2*d)).y=c[l]*O.height/100,v=d,I.push(r.width))),S[l]=r;return B?(y=F.apply(Math,D),O.height=y,e.height=y+2*P.v):(C=F.apply(Math,I),O.width=C,e.width=C+2*P.h),T.node.logicArea=O,T.bound=e,e}draw(){var e,t,a,i,n,o,r,l,s,c,d,h,g,b=this.conf,m="bottom"===b.legendPosition,p=b.bound&&b.bound.style||{stroke:"none"},u={};2<=arguments.length&&arguments[1]?(i=arguments[0],r=arguments[1]):1<=arguments.length&&(r=arguments[0]),g=r.animationManager,e=r.parentLayer,l=r.colorRange.getCumulativeValueRatio(),this.getLogicalSpace(i,r),o=(n=this._lSpace).node.logicArea,d=n.node.smartTexts,this.group=a=g.setAnimation({el:this.group||"group",attr:{name:"legend-values"},container:e,component:ui}),this.bound=t=g.setAnimation({el:this.bound||"rect",attr:n.bound,css:p,container:a,component:ui});for(let e=0;e<this.node.length;e++)this.node[e].remove();for(this.node=[],s=0,c=l.length;s<c;s++)(h=d[s])&&(m?(u.y=o.y+h.height/2,u.x=s===c-1?o.x+h.x-h.width/2:s?o.x+h.x:o.x+h.x+h.width/2):(u.x=o.x+h.width/2,u.y=s===c-1?o.y+h.y-h.height/2:s?o.y+h.y:o.y+h.y+h.height/2),this.node.push(g.setAnimation({el:"text",attr:{text:h.text,x:u.x,y:u.y,lineHeight:this._metaStyle.lineHeight,fill:b.style.fill},container:a,component:ui})));return{group:a,bound:t}}}var Ri=class extends r.a{getType(){return"gradientLegend"}getName(){return"gLegend"}constructor(){super(),ui=this,this.enabled=!1,this.drawOptions={},this.components={}}setColorRange(e){let t=this.drawOptions.colorRange=e;t&&t._preparationGoneWrong&&(this._dontPlot=!0)}configureAttributes(){var e,t,a,i,o,r,s,c,d,h,g=this,b=g.getFromEnv("chart"),m=g.getFromEnv("dataSource").chart,p=g.conf={},u=m.outcnvbasefont,f=m.outcnvbasefontsize,v=m.outcnvbasefontcolor,x=b.config.dataLabelStyle;mi.init({chart:b}),g.data=g.getFromEnv("dataSource").colorrange,g._dontPlot||(g.drawOptions={smartLabel:g.getFromEnv("smartLabel"),gLegend:g},g._dontPlot=!1,g._recalculateLogicalSpace=!0,pi=g.getFromEnv("toolTipController"),p.caption=Object(n.zb)(m.legendcaption),p.legendPosition=Object(n.zb)(m.legendposition,"bottom").toLowerCase(),p.showLegend=Object(n.Bb)(m.showlegend,1),p.interactiveLegend=Object(n.Bb)(m.interactivelegend,1),p.showLegendLabels=Object(n.Bb)(m.showlegendlabels,1),e=m.legenditemfontcolor||v,t=m.legenditemfont||u,a=m.legenditemfontsize||f,i=Object(n.Bb)(m.legenditemfontbold,0),o=m.legendcaptionfontcolor||v,r=m.legendcaptionfont||u,s=m.legendcaptionfontsize||f,c=Object(n.Bb)(m.legendcaptionfontbold,1),h=(d=m.legendaxisbordercolor?Object(n.kb)(Object(n.R)(m.legendaxisbordercolor)):bi)?Object(n.Bb)(m.legendaxisborderalpha,100)/100:bi,p.axisTextItemConf={style:{fill:e?Object(l.c)(Object(n.zb)(e)):x.color,fontFamily:t?Object(n.zb)(t):x.fontFamily,fontSize:a?Object(n.Bb)(a):x.fontSize.match(/\d+/)[0],fontWeight:i?"bold":x.fontWeight}},p.legendCaptionConf={style:{fill:o?Object(l.c)(Object(n.zb)(o)):x.color,fontFamily:r?Object(n.zb)(r):x.fontFamily,fontSize:s?Object(n.Bb)(s):x.fontSize.match(/\d+/)[0],fontWeight:c?"bold":x.fontWeight,fontStyle:"normal"}},p.legendAxisConf={legendAxisHeight:11,style:{stroke:d,"stroke-opacity":h},line:{style:{stroke:Object(l.c)(Object(n.zb)(m.legendscalelinecolor,"FFF8E9"),Object(n.Bb)(m.legendscalelinealpha,100)),"stroke-width":Object(n.Bb)(m.legendscalelinethickness)}}},p.sliderGroupConf={showTooltip:Object(n.Bb)(m.showtooltip,1),outerCircle:{rFactor:Object(n.Bb)(m.sliderdiameterfactor),style:{stroke:Object(l.c)(Object(n.zb)(m.legendpointerbordercolor,"757575"),Object(n.Bb)(m.legendpointerborderalpha,100))}},innerCircle:{rFactor:Object(n.Bb)(m.sliderholediameterfactor),style:{stroke:Object(l.c)(Object(n.zb)(m.legendpointercolor,"FFFFFF"),Object(n.Bb)(m.legendpointeralpha,100))}}},p.legendCarpetConf={spreadFactor:Object(n.Bb)(m.legendspreadfactor),allowDrag:!!Object(n.Bb)(m.legendallowdrag,0),captionAlignment:Object(n.zb)(m.legendcaptionalignment,"center"),style:{fill:Object(l.c)(Object(n.zb)(m.legendbgcolor,"e4d9c1"),Object(n.Bb)(m.legendbgalpha,100)),stroke:Object(l.c)(Object(n.zb)(m.legendbordercolor,"c4b89d"),Object(n.Bb)(m.legendborderalpha,100)),"stroke-width":Object(n.Bb)(m.legendborderthickness,1)}})}postConfigureInit(){var e,t,a,i,n,o,r,l,s,c,d,h=this,g=h.conf;h.elem={},g.interactiveLegend?(i=Si(mi.getDefaultConf("sliderGroupConf"),g.sliderGroupConf),this.sGroup?((a=h.elem.sGroup=this.sGroup).configure(i),h.elem.sGroup.gLegend=h):(this.sGroup=h.elem.sGroup=a=new Vi(i),a.configure(i),h.elem.sGroup.gLegend=h)):(this.sGroup&&this.sGroup.dispose(),this.sGroup&&delete this.sGroup),(i=Si(mi.getDefaultConf("legendCarpetConf"),g.legendCarpetConf)).legendPosition=g.legendPosition,d=mi.getDefaultConf("legendBodyConf"),"bottom"===g.legendPosition?(h.drawOptions.refSideKey="canvasWidth",h.drawOptions.refOffsetKey="canvasLeft",n=Si(mi.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),d.legendPosition="bottom",(c=Si(mi.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="bottom",n.legendPosition="bottom"):(h.drawOptions.refSideKey="canvasHeight",h.drawOptions.refOffsetKey="canvasTop",n=Si(mi.getDefaultConf("axisTextItemConf"),g.axisTextItemConf),d.legendPosition="right",(c=Si(mi.getDefaultConf("legendAxisConf"),g.legendAxisConf)).legendPosition="right",n.legendPosition="right"),Object.keys(this.components).length||(this.components.LegendCarpet=new Ei,this.components.LegendBody=new _i,this.components.LegendAxis=new Ii,this.components.LegendValues=new zi,g.showLegendLabels&&(this.components.LegendLabels=new Di)),t=this.components.LegendAxis,l=this.components.LegendValues,e=this.components.LegendCarpet,o=this.components.LegendBody,g.showLegendLabels&&(r=this.components.LegendLabels),this.components.LegendCarpet.configure(i),this.components.LegendValues.configure(n),this.components.LegendAxis.configure(c),this.components.LegendBody.configure(h.drawOptions.colorRange,d,n),g.showLegendLabels&&r.configure(n),g.caption?(s=Si(mi.getDefaultConf("legendCaptionConf"),g.legendCaptionConf),this.componentCaption&&Object.keys(this.componentCaption).length?this.componentCaption.configure(g.caption,s):(this.componentCaption=new Pi).configure(g.caption,s),e.addCompositions(this.componentCaption,fi.CAPTION)):(e.removeCompositions(fi.CAPTION),this.componentCaption&&this.componentCaption.dispose(),delete this.componentCaption),a&&t.addCompositions(a,fi.RANGE),r&&o.addCompositions(r,fi.AXIS_LABEL),o.addCompositions(t,fi.LEGEND_AXIS),o.addCompositions(l,fi.AXIS_VALUE),e.addCompositions(o,fi.LEGEND_BODY),h.elem.gl=new Ti(e)}getValueRange(){var e,t,a=this.elem&&this.elem.sGroup,i=a.sliders,n=a.extremes;return e=i.false.currPos,t=n[1]-n[0]+i.true.currPos,[{min:a.getValueFormPixel(e),max:a.getValueFormPixel(t)}]}_dispose(){var e=this;e.elem&&e.elem.gl&&e.elem.gl.dispose(),e.elem={},super._dispose()}getCalculatedLogicalSpace(){return this._logicalArea}setCalculatedLogicalSpace(e){this._logicalArea=e}getLogicalSpace(e){var t,a,i,n=this,o=n.conf,r={height:0,width:0},l=n.drawOptions,s=n.getFromEnv("chartConfig");return n._recalculateLogicalSpace?n._dontPlot?r:(n._recalculateLogicalSpace=!1,n.postConfigureInit(),o.showLegend?(a=l.refSideKey,i=l.refOffsetKey,n.drawOptions.refSide=s[a],n.drawOptions.refOffset=s[i],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,n.elem.gl&&(t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.elem.gl&&n.setCalculatedLogicalSpace(t)),n.getCalculatedLogicalSpace()):r):(a=l.refSideKey,i=l.refOffsetKey,n.drawOptions.refSide=s[a],n.drawOptions.refOffset=s[i],n.drawOptions.maxOtherSide=e||n.drawOptions.maxOtherSide,t=n.elem.gl.getLogicalSpace(n.drawOptions,!0),n.setCalculatedLogicalSpace(t),n.getCalculatedLogicalSpace()||r)}resetLegend(){var e;(e=this.elem&&this.elem.sGroup)&&e.reset()}allocatePosition(){var e,t,a,i,n,o,r=this.getFromEnv("chart"),l=r.config,s=this.conf||{},c=s.legendPosition,d=l.canvasLeft,h=l.canvasTop,g=l.canvasWidth,b=l.canvasHeight,m=l.marginBottom,p=l.marginRight;r.config.gLegendEnabled&&(e=this.getCalculatedLogicalSpace(),a=s.width=e.width,i=s.height=e.height,"bottom"===c?(n=d+(0>(t=g-a)?0:t/2),o=l.height-e.height-m-(l.actionBarHeight||0)):(o=h+(0>(t=b-i)?0:t/2),n=l.width-e.width-p),s.xPos=n,s.yPos=o)}draw(){var e=this.getFromEnv("chart"),t=e.getFromEnv("dataSource").colorrange,a=this.conf||{},i=e.hasGradientLegend;!e.config.gLegendEnabled||t&&i&&this.drawLegendComponent(a.xPos,a.yPos,{parentGroup:e.getContainer("parentgroup"),animationManager:e.getFromEnv("animationManager")})}drawLegendComponent(e,t,a){var i,n=this,o=n.conf;return n._dontPlot?void 0:o.showLegend?(n.drawOptions.animationManager=a.animationManager,n.drawOptions.parentGroup=a.parentGroup,n.drawOptions.x=e,n.drawOptions.y=t,n.drawOptions.maxOtherSide=n.drawOptions.maxOtherSide||a.maxOtherSide,i=n.elem.gl.draw(n.drawOptions).getBBox(),o.xPos=i.x,o.yPos=i.y,o.height=i.height,o.width=i.width,void(n.enabled=!0)):void(n.enabled=!1)}};var Ni=function(e){!function(e){let t,a=e.getFromEnv("dataSource").colorrange,i=e.getFromEnv("dataSource").chart.mapbycategory,o="maps"===e.defaultDatasetType,r="TreeMap"===e.getName(),l=e.getFromEnv("legend"),s=e.getFromEnv("gLegend");"gradient"==(t=a&&e.config.showLegend?o?a.gradient&&+a.gradient?"gradient":a.color?"icon":"none":r?a.gradient&&"0"!=a.gradient?"gradient":"none":a.gradient&&"0"!=a.gradient&&!+i?"gradient":"icon":"none")?(e.deleteFromEnv("legend"),l&&l.remove(),Object(n.M)(e,Ri,"gLegend",1),(s=e.getChildren("gLegend")[0]).configure(),e.addToEnv("gLegend",s)):"icon"===t?(e.deleteFromEnv("gLegend"),s&&s.remove(),Object(n.M)(e,_t,"legend",1,{showLegend:!0}),(l=e.getChildren("legend")[0]).configure(),e.addToEnv("legend",l)):"none"===t&&(e.deleteFromEnv("gLegend"),e.deleteFromEnv("legend"),s&&s.remove(),l&&l.remove())}(e)};let Gi,Wi=Object(Rt.c)({foregroundcolor:"333333",foregroundalpha:"100",foregrounddarkcolor:"111111",foregrounddarkalpha:"100",foregroundlightcolor:"666666",foregroundlightalpha:"100",backgroundlightcolor:"FFFFFF",backgroundlightalpha:"100",backgroundlightangle:90,backgroundlightratio:"",backgroundcolor:"FFFFCC",backgroundalpha:"100",backgrounddarkcolor:"ffcc66",backgrounddarkalpha:"100",backgrounddarkangle:270,backgrounddarkratio:"",shadow:1},Mt),Hi="0,100",Yi={basefontcolor:"foregroundcolor",bordercolor:"foregrounddarkcolor",borderalpha:"foregrounddarkalpha",bgcolor:"backgroundlightcolor",bgalpha:"backgroundlightalpha",bgangle:"backgroundlightangle",bgratio:"backgroundlightratio",canvasbordercolor:"foregrounddarkcolor",canvasborderalpha:"foregrounddarkalpha",canvasbgcolor:"backgroundlightcolor",canvasbgalpha:"backgroundlightalpha",canvasbgangle:"backgroundlightangle",canvasbgratio:"backgroundlightratio",tooltipbordercolor:"foregrounddarkcolor",tooltipborderalpha:"foregrounddarkalpha",tooltipbgcolor:"backgroundlightcolor",tooltipbgalpha:"backgroundlightalpha",tooltipfontcolor:"foregroundcolor",legendbordercolor:"foregrounddarkcolor",legendborderalpha:"foregrounddarkalpha",markerbordercolor:"foregroundlightcolor",markerborderalpha:"foregroundlightalpha",markerfillcolor:"backgrounddarkcolor",markerfillalpha:"backgrounddarkalpha",markerfillangle:"backgrounddarkangle",markerfillratio:"backgrounddarkratio",plotfillcolor:"backgroundcolor",plotfillalpha:"backgroundalpha",plotfillangle:"backgroundangle",plotfillratio:"backgroundratio",plothoverfillcolor:"backgrounddarkcolor",plothoverfillalpha:"backgrounddarkalpha",plothoverfillangle:"backgrounddarkangle",plothoverfillratio:"backgrounddarkratio",plotbordercolor:"foregroundcolor",plotborderalpha:"foregroundalpha",shadow:"shadow"},Xi={getMapName:function(){return this.jsVars.instanceAPI.getName().toLowerCase()},getEntityList:function(){let e,t,a,i,n,o,r,l=this.jsVars.instanceAPI.getDatasets()||[],s=l.length,c=[];for(e=0;e<s;e++)if("entities"===(r=(a=l[e]||[]).getName())){t=a;break}for(e in s=(i=t.components.data).length,i)i.hasOwnProperty(e)&&(o=(n=i[e]||{}).config||{},c.push({id:o.id,originalId:o.originalId||o.id,label:o.label,shortlabel:o.shortLabel,value:o.value,formattedValue:o.formattedValue,toolText:o.toolText}));return c},getMapAttribute:function(){return Object(Vt.f)(this,"12061210581","run","JavaScriptRenderer~getMapAttribute()",'Use of deprecated "getMapAttribute()". Replace with "getChartAttribute()".'),this.getChartAttribute.apply(this,arguments)},exportMap:function(){let e=this;return Object(Vt.f)(this,"12061210581","run","JavaScriptRenderer~exportMap()",'Use of deprecated "exportMap()". Replace with "exportChart()".'),e.exportChart&&e.exportChart.apply(e,arguments)},addMarker:function(e){let t,a,i,n,o=this.jsVars.instanceAPI.getDatasets()||[],r=o.length;for(t=0;t<r;t++)if("markers"===(n=(a=o[t]||[]).getName())){i=a;break}i&&!i.addMarkerItem(e)&&Object(Vt.f)(this,"1309264086","run","MapsRenderer~addMarker()","Failed to add marker. Check the options and try again.")},updateMarker:function(e,t){let a,i,n,o,r=this.jsVars.instanceAPI.getDatasets()||[],l=r.length;for(a=0;a<l;a++)if("markers"===(o=(i=r[a]||[]).getName())){n=i;break}n&&e&&(e=(e+Ui).toLowerCase(),n.updateMarkerItem(e,t))},removeMarker:function(e){let t,a,i,n,o=this.jsVars.instanceAPI.getDatasets()||[],r=o.length;for(t=0;t<r;t++)if("markers"===(n=(a=o[t]||[]).getName())){i=a;break}e&&(e=(e+Ui).toLowerCase(),i._removeMarkerItem(e))}},Zi="none",Ki=", ",Ui="",Ji="bottom",qi="circle",$i=window.Math,Qi=$i.min,en=$i.max,tn=function(e,t){let a=Object(n.db)(t.getFromEnv("chart-container"),e),i=a.chartX,o=a.chartY,r=t.config,l=r.canvasLeft,s=r.canvasTop,c=r.canvasLeft+r.canvasWidth,d=r.canvasHeight+r.canvasTop;return a.insideCanvas=!1,a.originalEvent=e,i>l&&i<c&&o>s&&o<d&&(a.insideCanvas=!0),a};class an extends r.a{constructor(e,t){for(var a in super(),this.subpalette="",this.key="",this.index=t,e)this.subpalette=Wi[e[a]],this[a]=this.subpalette instanceof Array?this.subpalette[t]:this.subpalette,this.key=a}}class nn extends It{constructor(){super(),this.friendlyName="Map",this.revision=1,this.hasCanvas=!0,this.standaloneInit=!1,this.defaultDatasetType="maps",this.defaultSeriesType="geo",this.fireGroupEvent=!0,this.legendposition="right",this.hasGradientLegend=!0,this.isMap=!0,this.defaultPaletteOptions={paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:[Hi,Hi,Hi,Hi,Hi],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]},this.colorPaletteMap=Yi,this.eiMethods=Xi,this.registerFactory("legend",Ni,["canvas"]),this.registerFactory("axis",()=>{},["canvas"]),this.registerFactory("colormanager-decider",gi,["legend"]),this.registerFactory("dataset",$a,["colormanager-decider"]),this.registerFactory("canvas",Qa.a)}_checkInvalidSpecificData(){return this.config.invalid=!1,!1}__setDefaultConfig(){var e=this.config;e.baseWidth||(e.baseWidth=400),e.baseHeight||(e.baseHeight=300),e.baseScaleFactor||(e.baseScaleFactor=1)}static getName(){return"maps"}static getType(){return"chartAPI"}getName(){return this.config.name||"GEO"}getType(){return"chartAPI"}configureAttributes(e){let t,a=this,i=a.getChildren("colorPalette")&&a.getChildren("colorPalette")[0];t=e.chart=e.chart||e.graph||e.map||{},a.jsonData=e,Object(n.M)(a,zt.a,"mapAnnotations"),i||(i=new an(this.colorPaletteMap,(0<t.palette&&6>t.palette?t.palette:Object(n.Bb)(a.paletteIndex,1))-1),a.attachChild(i,"colorPalette")),a.config.skipCanvasDrawing=!0,super.configureAttributes(e),a._parseBackgroundCosmetics()}parseChartAttr(e){let t,a,i,o,r,l=this,s=l.jsonData,c=s.chart||s.map,d=s.markers,h=new an(this.colorPaletteMap,(0<c.palette&&6>c.palette?c.palette:Object(n.Bb)(l.paletteIndex,1))-1),g=Object(n.zb)(c.entitybordercolor,c.bordercolor,h.plotbordercolor),b=Object(n.zb)(c.entityfillcolor,c.fillcolor,h.plotfillcolor),m=Object(n.zb)(c.entityfillalpha,c.fillalpha,h.plotfillalpha),p=Object(n.zb)(c.entityfillratio,c.fillratio,h.plotfillratio),u=Object(n.zb)(c.entityfillangle,c.fillangle,h.plotfillangle),f=Object(n.zb)(c.nullentityfillcolor,c.nullentitycolor,b),v=Object(n.Bb)(c.usevaluesformarkers,s.markers&&s.markers.items&&s.markers.items.length,!(s.markers&&s.markers.application&&s.markers.application.length&&s.markers.definition&&s.markers.definition.length));super.parseChartAttr(e),(t=l.config).origMarginTop=Object(n.Bb)(c.charttopmargin,c.maptopmargin,11),t.origMarginLeft=Object(n.Bb)(c.chartleftmargin,c.mapleftmargin,11),t.origMarginBottom=Object(n.Bb)(c.chartbottommargin,c.mapbottommargin,11),t.origMarginRight=Object(n.Bb)(c.chartrightmargin,c.maprightmargin,11),t.labelsOnTop=Object(n.Bb)(c.entitylabelsontop,1),a=(r=t.style).inCancolor,i=r.inCanfontFamily,o=r.inCanfontSize,t.entityOpts={baseScaleFactor:t.baseScaleFactor,dataLabels:{style:{fontFamily:i,fontSize:o,lineHeight:r.inCanLineHeight,color:r.inCancolor}},fillColor:b,fillAlpha:m,fillRatio:p,fillAngle:u,borderColor:g,borderAlpha:Object(n.zb)(c.entityborderalpha,c.borderalpha,l.borderAlpha,"100"),borderThickness:Object(n.Bb)(c.showentityborder,c.showborder,1)?Object(n.Bb)(c.entityborderthickness,c.borderthickness,1):0,scaleBorder:Object(n.Bb)(c.scaleentityborder,c.scaleborder,0),hoverFillColor:Object(n.zb)(c.entityfillhovercolor,c.hoverfillcolor,c.hovercolor,h.plothoverfillcolor),hoverFillAlpha:Object(n.zb)(c.entityfillhoveralpha,c.hoverfillalpha,c.hoveralpha,h.plothoverfillalpha),hoverFillRatio:Object(n.zb)(c.entityfillhoverratio,c.hoverfillratio,c.hoverratio,h.plothoverfillratio),hoverFillAngle:Object(n.zb)(c.entityfillhoverangle,c.hoverfillangle,c.hoverangle,h.plothoverfillangle),hoverBorderThickness:Object(n.zb)(c.entityborderhoverthickness,c.hoverborderthickness),hoverBorderColor:Object(n.zb)(c.entityborderhovercolor,g,h.plotbordercolor),hoverBorderAlpha:Object(n.zb)(c.entityborderhoveralpha,h.plotborderalpha),nullEntityColor:f,nullEntityAlpha:Object(n.zb)(c.nullentityfillalpha,c.nullentityalpha,m),nullEntityRatio:Object(n.zb)(c.nullentityfillratio,c.nullentityratio,p),nullEntityAngle:Object(n.zb)(c.nullentityfillangle,c.nullentityangle,u),connectorColor:Object(n.zb)(c.labelconnectorcolor,c.connectorcolor,a),connectorAlpha:Object(n.zb)(c.labelconnectoralpha,c.connectoralpha,"100"),connectorThickness:Object(n.Bb)(c.labelconnectorthickness,c.borderthickness,1),showHoverEffect:Object(n.Bb)(c.showentityhovereffect,c.usehovercolor,c.showhovereffect,1),hoverOnNull:Object(n.Bb)(c.hoveronnull,c.entityhoveronnull,1),labelPadding:Object(n.Bb)(c.labelpadding,5),showLabels:Object(n.Bb)(c.showlabels,1),labelsOnTop:Object(n.Bb)(c.entitylabelsontop,1),includeNameInLabels:Object(n.Bb)(c.includenameinlabels,1),includeValueInLabels:Object(n.Bb)(c.includevalueinlabels,0),useSNameInTooltip:Object(n.Bb)(c.usesnameintooltip,0),useShortName:Object(n.Bb)(c.usesnameinlabels,1),labelSepChar:Object(n.zb)(c.labelsepchar,Ki),showTooltip:Object(n.Bb)(c.showentitytooltip,c.showtooltip,1),tooltipSepChar:Object(n.zb)(c.tooltipsepchar,", "),tooltext:c.entitytooltext,hideNullEntities:Object(n.Bb)(c.hidenullentities,0),showHiddenEntityBorder:Object(n.Bb)(c.showhiddenentityborder,1),showNullEntityBorder:Object(n.Bb)(c.shownullentityborder,1),hiddenEntityColor:Object(n.zb)(c.hiddenentitycolor,c.hiddenentityfillcolor,c.hiddenentityalpha||c.hiddenentityfillalpha?f:"ffffff"),hiddenEntityAlpha:Object(n.zb)(c.hiddenentityalpha,c.hiddenentityfillalpha,.001),shadow:Object(n.Bb)(c.showshadow,l.defaultPlotShadow,h.shadow)},t.markerOpts={dataLabels:{style:{fontFamily:Object(n.zb)(c.markerfont,i),fontSize:Object(n.Bb)(c.markerfontsize,parseInt(o,10)),fontColor:Object(n.zb)(c.markerfontcolor,a)}},showTooltip:Object(n.Bb)(c.showmarkertooltip,c.showtooltip,1),showLabels:Object(n.Bb)(c.showmarkerlabels,c.showlabels,1),showHoverEffect:Object(n.Bb)(c.showmarkerhovereffect,1),labelPadding:Object(n.zb)(c.markerlabelpadding,"5"),labelWrapWidth:Object(n.Bb)(c.markerlabelwrapwidth,0),labelWrapHeight:Object(n.Bb)(c.markerlabelwrapheight,0),fillColor:Object(n.zb)(c.markerfillcolor,c.markerbgcolor,h.markerfillcolor),fillAlpha:Object(n.zb)(c.markerfillalpha,h.markerfillalpha),fillAngle:Object(n.zb)(c.markerfillangle,h.markerfillangle),fillRatio:Object(n.zb)(c.markerfillratio,h.markerfillratio),fillPattern:Object(n.zb)(c.markerfillpattern,h.markerbgpattern),hoverFillColor:c.markerfillhovercolor,hoverFillAlpha:c.markerfillhoveralpha,hoverFillRatio:c.markerfillhoverratio,hoverFillAngle:c.markerfillhoverangle,borderThickness:Object(n.zb)(c.markerborderthickness,1),borderColor:Object(n.zb)(c.markerbordercolor,h.markerbordercolor),borderAlpha:Object(n.Bb)(c.markerborderalpha,h.markerborderalpha),hoverBorderThickness:c.markerborderhoverthickness,hoverBorderColor:c.markerborderhovercolor,hoverBorderAlpha:c.markerborderhoveralpha,radius:Object(n.Bb)(c.markerradius&&Object(n.Ob)(c.markerradius),7),shapeId:Object(n.zb)(c.defaultmarkershape,qi),labelSepChar:Object(n.zb)(c.labelsepchar,Ki),tooltipSepChar:Object(n.zb)(c.tooltipsepchar,", "),autoScale:Object(n.Bb)(c.autoscalemarkers,0),tooltext:Object(n.zb)(d&&d.tooltext,c.markertooltext),dataEnabled:v,valueToRadius:Object(n.Bb)(c.markerradiusfromvalue,1),valueMarkerAlpha:Object(n.zb)(c.valuemarkeralpha,"75"),hideNull:Object(n.Bb)(c.hidenullmarkers,0),nullRadius:Object(n.Bb)(c.nullmarkerradius,c.markerradius,7),adjustViewPort:Object(n.Bb)(c.adjustviewportformarkers,0),startAngle:Object(n.Bb)(c.markerstartangle,90),maxRadius:Object(n.Bb)(c.maxmarkerradius,0),minRadius:Object(n.Bb)(c.minmarkerradius,0),applyAll:Object(n.Bb)(c.applyallmarkers,0),shadow:Object(n.Bb)(c.showmarkershadow,c.showshadow,0)},t.connectorOpts={showHoverEffect:Object(n.Bb)(c.showconnectorhovereffect,1),thickness:Object(n.Bb)(c.connectorthickness,c.markerconnthickness,"2"),color:Object(n.zb)(c.connectorcolor,c.markerconncolor,h.markerbordercolor),alpha:Object(n.zb)(c.connectoralpha,c.markerconnalpha,"100"),hoverThickness:Object(n.Bb)(c.connectorhoverthickness,c.connectorthickness,c.markerconnthickness,"2"),hoverColor:Object(n.zb)(c.connectorhovercolor,c.connectorcolor,c.markerconncolor,h.markerbordercolor),hoverAlpha:Object(n.zb)(c.connectorhoveralpha,c.connectoralpha,c.markerconnalpha,"100"),dashed:Object(n.Bb)(c.connectordashed,c.markerconndashed,0),dashLen:Object(n.Bb)(c.connectordashlen,c.markerconndashlen,3),dashGap:Object(n.Bb)(c.connectordashgap,c.markerconndashgap,2),font:Object(n.zb)(c.connectorfont,c.markerconnfont,i),fontColor:Object(n.zb)(c.connectorfontcolor,c.markerconnfontcolor,a),fontSize:Object(n.Bb)(c.connectorfontsize,c.markerconnfontsize,parseInt(o,10)),showLabels:Object(n.Bb)(c.showconnectorlabels,c.showmarkerlabels,c.showlabels,1),labelBgColor:Object(n.zb)(c.connectorlabelbgcolor,c.markerconnlabelbgcolor,h.plotfillcolor),labelBorderColor:Object(n.zb)(c.connectorlabelbordercolor,c.markerconnlabelbordercolor,h.markerbordercolor),shadow:Object(n.Bb)(c.showconnectorshadow,c.showmarkershadow,c.showshadow,0),showTooltip:Object(n.Bb)(c.showconnectortooltip,c.showmarkertooltip,c.showtooltip,1),tooltext:Object(n.zb)(d&&d.connectortooltext,c.connectortooltext),hideOpen:Object(n.Bb)(c.hideopenconnectors,1)},t.adjustViewPortForMarkers=Object(n.Bb)(c.adjustviewportformarkers,v)}_attachMouseEvents(){let e=this,t=e.getFromEnv("eventListeners"),a=e.getFromEnv("chart-container");He.a.unlisten(a,n.jb?"touchstart":"mousemove",nn.searchMouseMove),t.push(He.a.listen(a,"touchstart mousemove",nn.searchMouseMove,e))}static searchMouseMove(e){let t,a=e.data,i=a.config,n={};!a.getFromEnv("chart-container")||(t=tn(e,a))&&t.insideCanvas&&(i.lastMouseEvent=e,n={x:t.chartX,y:t.chartY},a._searchNearestNeighbour(n))}_searchNearestNeighbour(e){let t,a=this,i=a.getDatasets()[1];if(i){if(!i.components.kDTree)return;(t=i.getElement(e))?a.config.lastHoveredPoint!==t&&i.highlightPoint(t):i.highlightPoint(!1)}}_createLayers(){super._createLayers(),this._attachMouseEvents()}_parseBackgroundCosmetics(){let e,t=this,a=t.getChildren("background")[0].config,i=t.getChildren("colorPalette")[0],o=t.getFromEnv("chart-attrib");e=a.showBorder=Object(n.Bb)(o.showcanvasborder,1),a.borderWidth=e?Object(n.Bb)(o.canvasborderthickness,1):0,a.borderRadius=a.borderRadius=Object(n.Bb)(o.canvasborderradius,0),a.borderDashStyle=a.borderDashStyle=Object(n.Bb)(o.borderdashed,0)?Object(n.Y)(Object(n.Bb)(o.borderdashlen,4),Object(n.Bb)(o.borderdashgap,2)):Zi,a.borderAlpha=Object(n.zb)(o.canvasborderalpha,i.borderAlpha),a.borderColor=a.borderColor=Object(l.c)(Object(n.zb)(o.canvasbordercolor,i&&i.borderColor),a.borderAlpha)}_getBackgroundCosmetics(){let e=this,t=e.getFromEnv("chart-attrib")||e.jsonData.map,a=e.getChildren("colorPalette")[0];return{FCcolor:{color:Object(n.zb)(t.bgcolor,t.canvasbgcolor,a.bgcolor),alpha:Object(n.zb)(t.bgalpha,t.canvasbgalpha,a.bgalpha),angle:Object(n.zb)(t.bgangle,t.canvasbgangle,a.bgangle),ratio:Object(n.zb)(t.bgratio,t.canvasbgratio,a.bgratio)}}}_parseCanvasCosmetics(){super._parseCanvasCosmetics();let e=this,t=e.config,a=e.getFromEnv("chart-attrib")||e.jsonData.map,i=e.getChildren("canvas")[0].config;t.origMarginTop=Object(n.Bb)(a.maptopmargin,11),t.origMarginLeft=Object(n.Bb)(a.mapleftmargin,11),t.origMarginBottom=Object(n.Bb)(a.mapbottommargin,11),t.origMarginRight=Object(n.Bb)(a.maprightmargin,11),t.origCanvasLeftMargin=Object(n.Bb)(a.canvasleftmargin,0),t.origCanvasRightMargin=Object(n.Bb)(a.canvasrightmargin,0),t.origCanvasTopMargin=Object(n.Bb)(a.canvastopmargin,0),t.origCanvasBottomMargin=Object(n.Bb)(a.canvasbottommargin,0),i.canvasBorderRadius=Object(n.Bb)(a.canvasborderradius,0),i.origCanvasTopPad=Object(n.Bb)(a.canvastoppadding,0),i.origCanvasBottomPad=Object(n.Bb)(a.canvasbottompadding,0),i.origCanvasLeftPad=Object(n.Bb)(a.canvasleftpadding,0),i.origCanvasRightPad=Object(n.Bb)(a.canvasrightpadding,0)}preliminaryScaling(){let e,t,a,i=this.jsonData,n=i.markers&&i.markers.items||[],o=n&&n.length||0,r=1/0,l=1/0,s=-1/0,c=-1/0;for(;o--;)e=+(a=n[o]).x,t=+a.y,r=Qi(r,e),l=Qi(l,t),s=en(s,e),c=en(c,t);return{x:r,y:l,x1:s,y1:c}}getScalingParameters(e,t,a,i){let n,o,r=e/t,l=a/(e*this.config.baseScaleFactor),s=i/(t*this.config.baseScaleFactor),c=0,d=0;return l>s?(c+=(a-i*r)/2,o=200/(t*(n=s))):(d+=(i-a/r)/2,o=200/(e*(n=l))),{scaleFactor:n,strokeWidth:o,translateX:c,translateY:d}}calculateMarkerBounds(e,t,a){let i,n,o,r,l,s,c,d,h,g,b,m,p,u,f=this,v=f.config,x=v.markerOpts,y=f.getDatasets(),C=f.getDataLimits(),O=C.dataMin,L=C.dataMax,w=x.hideNull,k=x.nullRadius,j=x.valueToRadius,S=1/0,A=1/0,F=-1/0,B=-1/0;for(s=0,h=y.length;s<h;s++)"markers"===(c=(d=y[s]).getName())&&(i=d);if(i)for(s in i.calculateMarkerRadiusLimits(),o=(n=i.config||{}).minRadius,r=n.maxRadius,l=i.components&&i.components.markerObjs||{})p=(v=(u=l[s]).config).definition||{},null!==v.cleanValue?(j&&p.radius===Gi&&(v.radius=o+(r-o)*(v.cleanValue-O)/(L-O)),m=+v.radius,g=(+p.x+t)*e,b=(+p.y+a)*e,S=Qi(S,g-m),A=Qi(A,b-m),F=en(F,g+m),B=en(B,b+m)):w?v.__hideMarker=!0:null===v.radius&&(v.radius=k);return{x:S,y:A,x1:F,y1:B}}_spaceManager(){let e,t,a,i,o,r,l,s,c,d=this,h=d.config,g=d.getChildren("legend")&&d.getChildren("legend")[0],b=g&&g.config.legendPos,m=d.getFromEnv("chart-attrib"),p=h.showBorder,u=h.origMarginLeft,f=h.origMarginTop,v=d.config.baseWidth,x=d.config.baseHeight,y={},C=0,O=0,L=h.markerOpts,w=h.borderWidth=p?Object(n.Bb)(m.borderthickness,1):0;d._allocateSpace({top:w,bottom:w,left:w,right:w}),d._allocateSpace(d._manageActionBarSpace&&d._manageActionBarSpace(.225*h.availableHeight)||{}),s="right"===b?.3*h.canvasWidth:.3*h.canvasHeight,h.showLegend&&d._manageLegendSpace(s),e=b===Ji?.225*h.canvasHeight:.225*h.canvasWidth,c=d._manageChartMenuBar(e),a=h.canvasWidth,i=h.canvasHeight,L.dataEnabled?(h.adjustViewPortForMarkers?((y=d.preliminaryScaling()).x1>v&&(v=y.x1),0>y.x&&(v+=-y.x,C=-y.x),y.y1>x&&(x=y.y1),0>y.y&&(x+=-y.y,O=-y.y),t=d.getScalingParameters(v,x,a,i),r=i,l=a,0>(y=d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,C,O)).x&&(u+=-y.x,a+=y.x),0>y.y&&(f+=-y.y,i+=y.y),y.x1>l&&(a-=y.x1-l),y.y1>r&&(i-=y.y1-r)):(t=d.getScalingParameters(v,x,a,i),d.calculateMarkerBounds(t.scaleFactor*d.config.baseScaleFactor,C,O)),u+=C*(t=d.getScalingParameters(v,x,a,i)).scaleFactor*d.config.baseScaleFactor,f+=O*t.scaleFactor*d.config.baseScaleFactor):t=d.getScalingParameters(v,x,a,i),d.config.scalingParams=t,o=t.scaleFactor,t.translateX+=u,t.translateY=t.translateY+f+c.top||0,t.sFactor=o*d.config.baseScaleFactor*100/100,t.transformStr=["t",t.translateX,",",t.translateY,"s",o,",",o,",0,0"].join(""),d.config.annotationConfig={id:"Geo",showbelow:0,autoscale:0,grpxshift:t.translateX?t.translateX:0,grpyshift:t.translateY?t.translateY:0,xscale:100*(o?o*d.config.baseScaleFactor:1),yscale:100*(o?o*d.config.baseScaleFactor:1),scaletext:1,options:{useTracker:!0}},d.getChildren("mapAnnotations")[0].clear(),d.getChildren("mapAnnotations")[0].configureAttributes()}getDataLimits(){let e,t,a,i=this.getDatasets(),n=i.length,o=1/0,r=-1/0;for(a=0;a<n;a++)t=(e=i[a]).getDataLimits(),o=Qi(o,t.min),r=en(r,t.max);return{dataMin:o,dataMax:r}}getEntityPaths(e){let t,a={},i=this.config.entities;if(e){for(t in i)a[t]=i[t];return a}return i}checkComplete(){let e=this;e.config.entityFlag&&e.config.entitiesReady&&(e.config.entityFlag=!1,e.config.markersDrawn=!0,e.fireChartInstanceEvent("internal.mapdrawingcomplete",{renderer:e}))}}var on=nn;a.d(t,"Maps",function(){return on});t.default={name:"maps",type:"package",requiresFusionCharts:!0,extension:e=>e.addDep(on)}}}]);